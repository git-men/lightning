(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"+9YH":function(e,t,n){"use strict";n("vc6j");var r=n("Q9CN"),a=n("tJVT"),i=n("q1tI"),o=n.n(i);function c(e){var t=e.onChange,n=e.value;n=void 0===n?[null,null]:n;var i=Object(a["a"])(n,2),c=i[0],l=i[1],u=function(e){t(null===e&&null===l?void 0:[e,l])},s=function(e){t(null===c&&null===e?void 0:[c,e])},d=function(e){return""===e?null:e};return o.a.createElement("div",{style:{width:"100%",display:"flex"}},o.a.createElement(r["a"],{placeholder:"\u5927\u4e8e\u7b49\u4e8e",style:{flex:1},value:c,onBlur:function(e){return u(d(e.target.value))},max:null===l?void 0:l}),o.a.createElement("span",{style:{marginLeft:8,marginRight:8}},"~"),o.a.createElement(r["a"],{style:{flex:1},placeholder:"\u5c0f\u4e8e\u7b49\u4e8e",value:l,onBlur:function(e){return s(d(e.target.value))},min:null===c?void 0:c}))}t["a"]=c},"+s2E":function(e,t,n){"use strict";var r=n("0Owb"),a=n("k1fw"),i=n("jrin"),o=n("q1tI"),c=n.n(o),l=n("LyJH"),u=n("jfUH");t["a"]=function(e){var t,n=e.value,o=e.field,s=o.refField,d=o.ref,f=e.onChange,p=Object(l["b"])(e),m=Object(u["sb"])(d),_=n&&(t={},Object(i["a"])(t,s,n[s]),Object(i["a"])(t,m,n[m]),t);return c.a.createElement(l["a"],Object(r["a"])({},e,{fields:p.filter((function(e){return![s,m].includes(e.name)})),onChange:function(e){f(Object(a["a"])(Object(a["a"])({},e),_))}}))}},"04aD":function(e,t,n){"use strict";(function(e){n("52nx");var r,a=n("7bDm"),i=(n("eNCU"),n("pjJH")),o=n("oBTY"),c=n("jrin"),l=n("k1fw"),u=n("fWQN"),s=n("mtLc"),d=n("yKVA"),f=n("879j"),p=n("q1tI"),m=n.n(p),_=n("Wwog"),h=n("Utjr"),b=n("AAgL"),v=n("0TMk"),g=n("sMR+"),O=n("jfUH"),y=n("txBY"),j=n("VW+w"),w=Object(g["a"])(),E=Object(y["a"])(r=function(t){Object(d["a"])(r,t);var n=Object(f["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),e.state={adding:!1},e.encodePkF=function(t,n){var r=Object(O["N"])(e.refModel);return Object(l["a"])(Object(l["a"])({},t),{},Object(c["a"])({},r,JSON.stringify({rawId:t[r],index:n})))},e.mapValue=Object(_["a"])((function(t){return t?t.map(e.encodePkF):[]})),e}return Object(s["a"])(r,[{key:"refSchema",get:function(){var e=this.props.schemas;return e[this.refModel]}},{key:"refModel",get:function(){var e=this.props.field;return e.ref}},{key:"refAdmin",get:function(){var e=this.props.adminConfig;return e[this.refModel]}},{key:"fields",get:function(){var e=this.props.fields;return e}},{key:"display",get:function(){var e=this.props,t=e.display,n=e.schemas;return Object(j["displayPreprocess"])(t||this.refAdmin.display,this.refModel,n)}},{key:"sort",value:function(t){var n,r,a=this.display;return(n=e).orderBy.apply(n,[t].concat(Object(o["a"])((r=e).zip.apply(r,Object(o["a"])(a.filter((function(e){return e.sort_direction})).map((function(e){return[e.name,e.sort_direction]})))))))}},{key:"handleChange",value:function(e){var t=this.props.onChange,n=Object(O["N"])(this.refModel);t(e.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},Object(c["a"])({},n,JSON.parse(e[n]).rawId))})))}},{key:"render",value:function(){var e=this,t=this.fields,n=this.display,r=this.props,l=r.value,u=r.canAdd,s=void 0===u||u,d=r.form,f=r.field.refField,p=this.state.adding,_=this.mapValue(l),b=m.a.createElement(m.a.Fragment,null,m.a.createElement(w,{showFilter:!1,modalForm:!0,formProps:function(n){return{fields:t,object:_.find((function(t){return Object(O["M"])(t,e.refModel)===Object(O["M"])(n.state.currentObject,e.refModel)})),onSubmit:function(t,r){var a=_.find((function(t){return Object(O["M"])(t,e.refModel)===r}));Object.assign(a,t),e.handleChange(_),n.hideModal()}}},display:n,data:{list:this.sort(_)||[]},model:this.refModel,showCreate:!0,showStat:!1,inlineActions:Object(j["inlineActionsPreprocess"])(["edit",{title:"\u5220\u9664",type:"func",confirm:!0,params:{func:function(t){var n=e.props.value;e.handleChange(n.map(e.encodePkF).filter((function(n){return Object(O["M"])(n,e.refModel)!==t})))}}}])}),!0===s?m.a.createElement(m.a.Fragment,null,m.a.createElement(i["a"],{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:function(){return e.setState({adding:!0})},icon:"plus"},"\u65b0\u589e"),m.a.createElement(a["a"],{title:this.refSchema&&"\u65b0\u589e".concat(this.refSchema.displayName),width:"60%",destroyOnClose:!0,visible:p,closable:!0,keyboard:!0,onCancel:function(){return e.setState({adding:!1})},footer:null},m.a.createElement(v["b"],{model:this.refModel,fields:t,onSubmit:function(t){e.handleChange([].concat(Object(o["a"])(_),[e.encodePkF(t,_.length)])),e.setState({adding:!1})}}))):"");return m.a.createElement(h["c"].Provider,{value:Object(c["a"])({},f,d.getFieldsValue())},b)}}]),r}(b["a"]))||r;t["a"]=E}).call(this,n("LvDl"))},"0SIm":function(e,t,n){"use strict";n("lNFX");var r,a,i=n("VE2L"),o=n("jrin"),c=n("tJVT"),l=n("k1fw"),u=n("fWQN"),s=n("mtLc"),d=n("yKVA"),f=n("879j"),p=n("q1tI"),m=n.n(p),_=n("AAgL"),h=n("jfUH"),b=n("txBY"),v=n("jxO0"),g=n("Utjr"),O=n("LvDl"),y=n.n(O),j=function(e){var t=e.choicesFilter,n=e.form,r=e.monitormodel,a=e.instance,i=e.relativeFormContext;return Object(v["a"])(t,n.getFieldsValue(),r,a,i)},w=(r=Object(h["d"])((function(){return{relativeFormContext:Object(p["useContext"])(g["c"])}})),r(a=Object(b["a"])(a=function(e){Object(d["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={dataMap:{},leaves:{},loadings:{}},e.loadData=function(t){var n=e.props,r=n.fetchAll,a=n.groupBy,i=e.state.dataMap,o=t[t.length-1];e.setState((function(e){var n=e.loadings,r=new Set(n[t.length]);return r.add(o.value),n[t.length]=r,{loadings:Object(l["a"])({},n)}}));var c=e.paths.slice(-t.length-1)[0];r({model:c.name,filters:[{field:a.split(".").slice(-t.length)[0],operator:"=",value:Object(h["S"])(i[e.paths.slice(-t.length)[0].name][o.value],c.name,a.split(".").slice(-t.length)[0])}],expandFields:[]}).then((function(n){n.length?e.setState((function(e){var t=e.dataMap;return n.forEach((function(e){t[c.name]||(t[c.name]={}),t[c.name][Object(h["M"])(e,c.name)]=e})),{dataMap:Object(l["a"])({},t)}})):e.setState((function(e){var n=e.leaves,r=new Set(n[t.length]);return r.add(o.value),n[t.length]=r,{leaves:n}}))})).finally((function(){e.setState((function(e){var n=e.loadings,r=new Set(n[t.length]);return r.delete(o.value),n[t.length]=r,{loadings:Object(l["a"])({},n)}}))}))},e}return Object(s["a"])(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){var e=this,t=this.props.fetchAll,n=this.paths.slice(-1)[0],r=j(this.props);t({model:n.name,filters:r}).then((function(t){return e.setState((function(){var e={};return t.forEach((function(t){e[n.name]||(e[n.name]={}),e[n.name][Object(h["M"])(t,n.name)]=t})),{dataMap:Object(l["a"])({},e)}}))}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.value,a=n.detail,i=n.groupBy,o=n.fetchAll,c=n.onChange,u=this.state.dataMap,s=j(this.props);y.a.isEqual(s,j(e))||(c(null),this.init()),!this.fetchedDetail&&r&&Object.keys(u).length<=1&&(this.fetchedDetail=!0,a({model:this.refModel,id:Object(h["M"])(r,this.refModel),expandFields:i&&[i]}).then((function(e){t.setState({detail:e});var n=i.split("."),r=e;t.paths.slice(0,-1).forEach((function(e){var a=n.shift();r=r[a],o({model:e.name,filters:[{field:a,operator:"=",value:Object(h["S"])(r,e.name,a)}],expandFields:[]}).then((function(n){t.setState((function(t){var r=t.dataMap;return n.forEach((function(t){r[e.name]||(r[e.name]={}),r[e.name][Object(h["M"])(t,e.name)]=t})),{dataMap:Object(l["a"])({},r)}}))}))}))})))}},{key:"refSchema",get:function(){var e=this.props.schemas;return e[this.refModel]}},{key:"refModel",get:function(){var e=this.props.field;return e.ref}},{key:"paths",get:function(){var e=this.props,t=e.schemas,n=e.groupBy,r=[this.refSchema];return n&&n.split(".").forEach((function(e){var n=r[r.length-1].fields.find((function(t){return t.name===e}));r.push(t[n.ref])})),r}},{key:"choicesOptions",get:function(){var e,t=this.props.groupBy,n=this.state,r=n.dataMap,a=n.loadings,i=n.leaves,o=t.split(".");return y.a.values(this.paths.reduce((function(n,c,u){var s=o.shift(),d=y.a.cloneDeep(r[c.name])||[],f=y()(d).groupBy(s).mapValues((function(r){return r.map((function(r){var d=n[r[e]],f=!t||!!s&&t.split(".").length-o.length===1,p=(i[t.split(".").length+1-u]||new Set).has(Object(h["M"])(r,c.name));return Object(l["a"])(Object(l["a"])({value:Object(h["M"])(r,c.name),label:r[c.titleField],isLeaf:p||f,disabled:p&&!f},d&&{children:d}),{},{loading:(a[t.split(".").length+1-u]||new Set).has(Object(h["M"])(r,c.name))})}))})).value();return e=s&&Object(h["w"])(c.name,s),f}),{})).flat()}},{key:"value",get:function(){var e=this.props.groupBy,t=this.state.detail;if(!t)return[];var n=e.split("."),r=[];return this.paths.forEach((function(e){r.unshift(Object(h["M"])(t,e.name)),t=t[n.shift()]})),r}},{key:"render",value:function(){var e=this,t=this.props,n=t.onChange,r=t.groupBy,a=this.state.dataMap;return m.a.createElement(i["a"],{options:this.choicesOptions,loadData:this.loadData,onChange:function(t){if(t.length){var i=a[e.refModel][t.slice(-1)[0]];if(n(Object(l["a"])({},i)),r){var u=y.a.zip(r.split(".").reverse(),t.slice(1),e.paths.reverse().slice(1)).reduce((function(e,t){var n=Object(c["a"])(t,3),r=n[0],i=n[1],u=n[2];return Object(l["a"])(Object(l["a"])({},a[u.name][i]),{},Object(o["a"])({},r,e))}),Object(l["a"])({},a[e.paths.slice(-1)[0].name][t[0]]));e.setState({detail:u})}else e.setState({detail:Object(l["a"])({},i)})}else n(null)},value:this.value})}}]),n}(_["a"]))||a)||a);t["a"]=w},"0TMk":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n("0Owb"),a=n("PpiC"),i=n("q1tI"),o=n.n(i),c=n("wiuW"),l=n("xJcd"),u=n("G9e4"),s=Object(l["c"])(l["b"]),d=function(e){var t=e.model,n=Object(a["a"])(e,["model"]),u=Object(i["useMemo"])((function(){return Object(l["c"])(c["b"][t]||l["b"])}),[t]);return o.a.createElement(u,Object(r["a"])({model:t},n))},f=function(e){var t=e.model,n=Object(a["a"])(e,["model"]),s=Object(i["useMemo"])((function(){return Object(l["c"])(c["a"][t]||u["b"])}),[t]);return o.a.createElement(s,Object(r["a"])({model:t},n))}},"1X5l":function(e,t,n){"use strict";(function(e){n("cW/2");var r,a=n("RtDF"),i=n("0Owb"),o=n("fWQN"),c=n("mtLc"),l=n("yKVA"),u=n("879j"),s=n("q1tI"),d=n.n(s),f=n("AAgL"),p=n("jfUH"),m=n("txBY"),_=Object(m["a"])(r=function(t){Object(l["a"])(r,t);var n=Object(u["a"])(r);function r(){var e;Object(o["a"])(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),e.myProps=["parent"],e.doSearch=function(){var t=e.props.cacheAll;if(Object(p["C"])(e.fieldType)||"mref"===e.fieldType){var n=e.refSchema;t({model:n.name,titleField:n.titleField})}},e}return Object(c["a"])(r,[{key:"componentDidMount",value:function(){this.doSearch()}},{key:"titleField",get:function(){return this.refSchema.titleField}},{key:"fieldType",get:function(){var e=this.props.field;return e.type}},{key:"refSchema",get:function(){var e=this.props.schemas;return e[this.refModel]}},{key:"refModel",get:function(){var e=this.props.field;return e.ref}},{key:"parentField",get:function(){var e=this.props,t=e.parent,n=e.adminConfig,r=e.schemas;return t||n[this.refModel].parentField||r[this.refModel].parentField||"parent"}},{key:"choiceObject",get:function(){var t=this,n=this.props.all;return e.fromPairs((n[this.refModel]||[]).map((function(e){return[t.toField(e),e]})))}},{key:"toField",value:function(e){return Object(p["S"])(e,this.refModel,this.parentField)}},{key:"render",value:function(){var t=this,n=this.props,r=n.value,o=n.onChange,c={placeholder:"\u672a\u9009\u62e9",allowClear:!0},l=e.values(this.choiceObject).map((function(e){return{id:t.toField(e),pId:e[t.parentField],title:e[t.titleField],value:t.toField(e)}}));return Object(p["C"])(this.fieldType)?d.a.createElement(a["a"],Object(i["a"])({},c,{treeData:l,treeDataSimpleMode:!0,onChange:function(e){return o(t.choiceObject[e])},value:r&&this.toField(r),treeDefaultExpandedKeys:r&&[r.toString()],showSearch:!0,treeNodeFilterProp:"title"},this.widgetProps)):"mref"===this.fieldType?d.a.createElement(a["a"],Object(i["a"])({},c,{treeData:l,treeDataSimpleMode:!0,onChange:function(e){return o(e.map((function(e){return t.choiceObject[e]})))},value:r&&r.map((function(e){return t.toField(e)})),treeDefaultExpandedKeys:r&&r.map((function(e){return t.toField(e).toString()})),multiple:!0,treeNodeFilterProp:"title"},this.widgetProps)):d.a.createElement(a["a"],c)}}]),r}(f["a"]))||r;t["a"]=_}).call(this,n("LvDl"))},"2CK3":function(e,t,n){e.exports={tableListForm:"tableListForm___2HivC",submitButtons:"submitButtons___1Zcv2"}},"2W84":function(e,t,n){"use strict";var r=n("Utjr");t["a"]=Object(r["d"])((function(){return Promise.all([n.e(36),n.e(28)]).then(n.bind(null,"U2hj"))}))},"2mwZ":function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n("0Owb"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=n("q1tI"),u=n.n(l),s=n("9Ndd"),d=n("AAgL"),f={char:"string",int:"integer",positiveint:"integer",positivesmallint:"integer",smallint:"integer",bigint:"integer",bool:"bool",text:"text",time:"time",email:"string",slug:"string",url:"string",float:"float",decimal:"decimal",date:"date",datetime:"datetime",auto:"integer",ipaddr:"string",uuid:"string",image:"image",file:"file",bigauto:"integer"},p=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.type_field,n=e.form,a=e.value,i=e.onChange,o=n.getFieldValue(t),c=f[o];if(!c)return null;var l=s["b"][s["e"][c]];return u.a.createElement(l,Object(r["a"])({},this.props,{value:a&&a.value,onChange:function(e){return i({value:e})}}))}}]),n}(d["a"])},"3V3B":function(e,t,n){"use strict";(function(e){var r,a,i,o,c,l,u,s=n("jrin"),d=n("0Owb"),f=(n("OaEy"),n("2fM7")),p=n("tJVT"),m=n("k1fw"),_=n("fWQN"),h=n("mtLc"),b=n("yKVA"),v=n("879j"),g=n("q1tI"),O=n.n(g),y=n("17x9"),j=n.n(y),w=n("/MKj"),E=n("AAgL"),k=n("jfUH"),C=n("Utjr"),x=n("jxO0"),M=(r=Object(w["c"])((function(e){var t=e.content;return{schemas:t.schemas}})),a=Object(k["d"])((function(){return{relativeFormContext:Object(g["useContext"])(C["c"])}})),i=Reflect.metadata("design:type",Function),o=Reflect.metadata("design:paramtypes",[void 0]),r(c=a(c=i(c=o((u=l=function(t){Object(b["a"])(r,t);var n=Object(v["a"])(r);function r(e){var t;Object(_["a"])(this,r),t=n.call(this,e),t.myProps=["choices","excludes","canAdd","titlefield","idfield","addfields","choicesFilter","optionSize","choicesDisabled","choicesShow"],t.doSearch=function(e){var n=t.props,r=n.dispatch,a=n.monitormodel,i=n.form,o=n.choicesFilter,c=n.instance,l=n.optionSize,u=n.relativeFormContext;if(Object(k["C"])(t.fieldType)||"mref"===t.fieldType){var s=i?Object(x["a"])(o,i.getFieldsValue(),a,c,u):[];if(!s)return void t.setState({remoteChoices:[]});var d=t.refSchema,f=t.props.field,p=200;r({type:"content/choices",payload:{model:d.name,q:e,conditions:s,titleField:t.titleField,query:{page:1,size:l||p+1},data:Object(m["a"])({order_by:["-".concat(Object(k["N"])(d.name))]},"oref"===t.fieldType?{expand_fields:[f.refField]}:{})}}).then((function(n){var r=l||(!e&&n.length>p?7:p);t.setState({remoteChoices:n.slice(0,r)})}))}};var a=e.monitorvalues,i=e.monitorfields,o={};if(i&&a&&a.length){var c=Object(p["a"])(a,2),l=c[0],u=c[1];-1!==i.map((function(e){return e.split(".")[0]})).indexOf(l)&&(o[l]=u)}return t.state={watchValues:o,remoteChoices:[]},t}return Object(h["a"])(r,[{key:"componentWillReceiveProps",value:function(e){var t=e.monitorvalues,n=e.monitorfields,r=e.value,a=this.props,i=a.monitorvalues,o=a.onChange,c=a.allowUndefined,l=a.value,u=this.state.watchValues;if(Object(k["C"])(this.fieldType)&&r&&l&&r[this.idField]===l[this.idField]&&r[this.titleField]!==l[this.titleField]&&this.doSearch(),t!==i){var s=Object(p["a"])(t,2),d=s[0],f=s[1];-1!==n.map((function(e){return e.split(".")[0]})).indexOf(d)&&u[d]!==f&&(u[d]=f,this.setState({watchValues:u}),Object(k["C"])(this.fieldType)?(o(c?void 0:null),this.doSearch()):"mref"===this.fieldType&&(o([]),this.doSearch()))}}},{key:"titleField",get:function(){return this.props.titlefield||this.refSchema.titleField}},{key:"fieldType",get:function(){var t=this.props,n=t.field,r=t.choices;return e.isPlainObject(r)?"ref":n.type}},{key:"realFieldType",get:function(){var e=this.props.field;return e.type}},{key:"refSchema",get:function(){var e=this.props.schemas;return e[this.refModel]}},{key:"refModel",get:function(){var t=this.props,n=t.field,r=t.choices;return e.isPlainObject(r)?r.model:n.ref}},{key:"idField",get:function(){return this.props.idfield||Object(k["N"])(this.refModel)}},{key:"render",value:function(){var t=this,n=this.props,r=n.choices,a=n.dispatch,i=n.value,o=n.onChange,c=n.canAdd,l=n.excludes,u=n.addfields,_=n.nullOption,h=n.allowUndefined,b=n.choicesDisabled,v=n.choicesShow,g=n.choicesPipe,y=n.form,j=n.field,w=this.state.remoteChoices,E=g?g(w):w,C={placeholder:Object(k["C"])(this.fieldType)||"mref"===this.fieldType?"\u641c\u7d22".concat(this.refSchema?this.refSchema.displayName:""):"\u672a\u9009\u62e9",allowClear:!0};if(e.isArray(r)&&r.length)return O.a.createElement(f["a"],Object(d["a"])({},C,this.widgetProps,{showSearch:r.length>7,onChange:function(e){o(void 0===e?h?void 0:null:e)},value:i,filterOption:function(e,t){var n=t.value,r=t.children;return r.toLowerCase().includes(e.toLowerCase())||n.toLowerCase().includes(e.toLowerCase())}}),r.filter((function(e){return!v[e[0]]||!y||e[0]===i||Object(k["i"])(v[e[0]],(function(e){return y.getFieldValue(e)}))})).map((function(e){return O.a.createElement(f["a"].Option,{key:e[0],value:e[0],disabled:b[e[0]]&&y&&e[0]!==i&&Object(k["i"])(b[e[0]],(function(e){return y.getFieldValue(e)}))},e[1])})));if(e.isPlainObject(r))return O.a.createElement(f["a"],Object(d["a"])({},C,this.widgetProps,{onChange:o,value:i,onSearch:this.doSearch,filterOption:!1,showSearch:!0}),E.map((function(e){return O.a.createElement(f["a"].Option,{key:e[1][t.idField],value:e[1][t.idField]},e[1][t.titleField])})));var x=E;return Object(k["C"])(this.fieldType)?(i&&i[this.idField]&&!x.find((function(e){return e[0]===i[t.idField]}))&&x.push([i[this.idField],i]),O.a.createElement(f["a"],Object(d["a"])({},C,this.widgetProps,{virtual:!1,onChange:function(e){o(void 0===e?h?void 0:null:null===e?null:x.find((function(t){return t[0]===e}))[1])},value:i&&i[this.idField],onSearch:this.doSearch,filterOption:!1,showSearch:!0,onDropdownVisibleChange:function(e){e&&t.doSearch()}}),_&&O.a.createElement(f["a"].Option,{value:null},"\u65e0"),x.map((function(e){var n=Object(p["a"])(e,2),r=n[0],a=n[1],o=l.map((function(e){return e[t.idField]})),c=-1!==o.indexOf(r)&&r!==i[t.idField],u=(!i||r!==i[t.idField])&&"oref"===t.fieldType&&a[j.refField];return O.a.createElement(f["a"].Option,{key:r,value:r,disabled:c||u},a[t.titleField]||a[t.idField])})))):"mref"!==this.fieldType||c?"mref"===this.fieldType&&c?(i&&i.forEach((function(e){x.find((function(n){return n[0]===e[t.idField]}))||x.push([e[t.idField],e])})),O.a.createElement(f["a"],Object(d["a"])({},C,this.widgetProps,{virtual:!1,mode:"tags",onChange:function(e){o(e.map((function(e){var n=x.find((function(n){return n[1][t.titleField]===e}));return n?n[1]:(a({type:"content/createTag",payload:{model:t.refModel,values:Object(m["a"])(Object(s["a"])({},t.titleField,e),u)}}).then((function(e){o((i||[]).concat(e)),t.doSearch()})),null)})).filter(Boolean))},value:i&&i.map((function(e){return e[t.titleField]})),onSearch:function(e){t.doSearch(e)},filterOption:!1,onDropdownVisibleChange:function(e){e&&t.doSearch()}}),x.map((function(e){return O.a.createElement(f["a"].Option,{key:e[0],value:e[1][t.titleField]},e[1][t.titleField])})))):O.a.createElement(f["a"],null):(i&&i.forEach((function(e){x.find((function(n){return n[0]===e[t.idField]}))||x.push([e[t.idField],e])})),O.a.createElement(f["a"],Object(d["a"])({},C,this.widgetProps,{virtual:!1,mode:"multiple",onChange:function(e){o(e.map((function(e){return x.find((function(t){return t[0]===e}))[1]})))},value:i&&i.map((function(e){return e[t.idField]})),onSearch:this.doSearch,filterOption:!1,onDropdownVisibleChange:function(e){e&&t.doSearch()}}),x.map((function(e){return O.a.createElement(f["a"].Option,{key:e[0],value:e[0]},e[1][t.titleField])}))))}}]),r}(E["a"]),l.propTypes={field:j.a.object.isRequired,choices:j.a.any,monitorfields:j.a.array,excludes:j.a.array,titlefield:j.a.string,idfield:j.a.string,addfields:j.a.object,nullOption:j.a.bool},l.defaultProps={choices:[],monitorfields:[],excludes:[],titlefield:void 0,addfields:{},nullOption:!1,allowUndefined:!1,choicesDisabled:{},choicesShow:{}},c=u))||c)||c)||c)||c);t["a"]=M}).call(this,n("LvDl"))},"3hZV":function(e,t,n){"use strict";(function(e){var r,a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=n("q1tI"),u=n.n(l),s=n("/MKj"),d=n("sMR+"),f=Object(d["a"])(),p=Object(s["c"])((function(e){var t=e.content,n=e.user.currentUser,r=e.bsmSetting;return{content:t,currentUser:n,bsmSetting:r}})),m=p(r=function(t){Object(o["a"])(r,t);var n=Object(c["a"])(r);function r(){return Object(a["a"])(this,r),n.apply(this,arguments)}return Object(i["a"])(r,[{key:"render",value:function(){var t,n=this.props,r=n.value,a=n.field,i=n.content.schemas,o=n.fields;if(!r||e.isEmpty(r))return u.a.createElement(l["Fragment"],null);var c=(null===a||void 0===a?void 0:a.ref)||o[0].ref,s={list:r},d=null===(t=i[c])||void 0===t?void 0:t.fields,p={size:"small"};return u.a.createElement("div",{style:{display:"flex"}},u.a.createElement(f,{model:c,showFilter:!1,data:s,display:d,tableProps:p}))}}]),r}(l["Component"]))||r;t["a"]=m}).call(this,n("LvDl"))},"3i6F":function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return P})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return W})),n.d(t,"b",(function(){return Y})),n.d(t,"k",(function(){return re})),n.d(t,"j",(function(){return ae})),n.d(t,"m",(function(){return oe})),n.d(t,"g",(function(){return ce})),n.d(t,"l",(function(){return le})),n.d(t,"h",(function(){return ue})),n.d(t,"i",(function(){return se})),n.d(t,"a",(function(){return de}));var r=n("k1fw"),a=n("PpiC"),i=n("0Owb"),o=(n("eE3J"),n("GSZB")),c=(n("En1n"),n("71Ds")),l=(n("Ztx6"),n("8Ik2")),u=n("tJVT"),s=(n("+BJd"),n("mr32")),d=n("9og8"),f=n("WmNS"),p=n.n(f),m=n("q1tI"),_=n.n(m),h=n("wd/R"),b=n.n(h),v=n("jfUH"),g=n("iXby"),O=n("LVWL"),y=n("xceu"),j=n("2W84"),w=n("bDUM"),E=n("3hZV"),k=n("nKGo"),C=n("CM9M"),x={string:["text","timeStamp","image","file"],integer:["text","timeStamp"],float:["text"],decimal:["text"],bool:["bool"],date:["date"],datetime:["datetime"],time:["text"],image:["image"],file:["file"],video:["video"],ref:["title"],oref:["title"],boref:["title"],mref:["title"],bref:["title"],object:["object"],array:["array"],text:["text","longtext"],duration:["duration"]},M=e(x).mapValues(e.first).mapValues((function(e){return e||"ErrorWidget"})).value(),P=function(e){return M[e]},S=["textimg"],A={text:"\u6587\u5b57",timeStamp:"\u65f6\u95f4\u6233\u683c\u5f0f",RichTextEditor:"\u5bcc\u6587\u672c\u7f16\u8f91\u5668",bool:"\u5f00\u5173",tag:"\u5f69\u8679\u6807\u7b7e",link:"\u94fe\u63a5",image:"\u56fe\u7247",datetime:"\u65e5\u671f\u65f6\u95f4",video:"\u89c6\u9891",textimg:"\u56fe\u6587",urlImg:"\u56fe\u96c6",title:"\u6807\u9898",longtext:"\u957f\u6587\u672c",file:"\u6587\u4ef6\u9884\u89c8"},D={promise:void 0};function F(e){return T.apply(this,arguments)}function T(){return T=Object(d["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!D.promise){e.next=2;break}return e.abrupt("return",D.promise);case 2:return D.promise=new Promise((function(e){setTimeout((function(){t(),e()}),0)})),e.prev=3,e.next=6,D.promise;case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,D.promise=void 0,e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])}))),T.apply(this,arguments)}function L(t){var n=t.Schemas,r=t.model,a=t.field,i=t.value;if(!i)return _.a.createElement(s["a"],null,"\u65e0");var o=n[r],c=[],l=e.isArray(i)?i:[i],u=o.fields.filter((function(e){return e.name===a.name}))[0].ref,d=n[u],f=d.titleField;return l.forEach((function(e){return c.push(e[f])})),c.join(", ")}function I(t){var n=t.value;if(!n)return _.a.createElement(s["a"],null,"\u65e0");var r=e.last(n.split(".")[0].split(" ")),a=r.split(":").map((function(e){return parseInt(e,10)})),i=Object(u["a"])(a,3),o=i[0],c=i[1],l=i[2],d=n.includes(" ")?parseInt(n.split(" ")[0],10):0,f=86400*d+3600*o+60*c+l,p=f<0,m=Math.abs(f),h=Math.floor(m/86400),b=Math.floor(m%86400/3600),v=Math.floor(m%3600/60),g=m%60,O="";return h&&(O+="".concat(h,"\u5929")),b&&(O+="".concat(b,"\u65f6")),v&&(O+="".concat(v,"\u5206")),g&&(O+="".concat(g,"\u79d2")),O?(p&&(O="-".concat(O)),O):"0"}function U(e){var t,n=e.value,r=e.field,a=e.fields;if(r&&void 0!==r.choices){var i=r.choices.find((function(e){return e[0]===n}));return i?i[1]:n||""}if(a&&void 0!==a[0].choices){var o=a[0].choices.find((function(e){return e[0]===n}));return o?o[1]:n||""}return["number","boolean"].includes(typeof n)?n:"text"===(null===r||void 0===r?void 0:r.type)||a&&"text"===(null===(t=a[0])||void 0===t?void 0:t.type)?_.a.createElement(y["a"],{value:n,type:"text"}):null===n?_.a.createElement(s["a"],null,"\u65e0"):n||""}function R(t){var n=t.value,r=t.isExpand,a=t.textType,i=void 0===a?"longText":a,o=n;return e.isObject(n)&&(o=JSON.stringify(n)),_.a.createElement(y["a"],{value:o,type:i,isExpand:r})}function V(e){var t=e.avatar,n=e.title,r=e.text,a=e.changePreviewImageUrl,i=e.setPreviewImageVisible,o=e.placeholderIcon,u=void 0===o?"picture":o,s=e.uploadProvider;return _.a.createElement(c["a"].Item.Meta,{avatar:_.a.createElement(l["a"],{size:"large",style:t&&{cursor:"zoom-in"},onClick:function(){t&&(a(t),i(!0))},src:Object(v["v"])(t,{width:40,height:40,uploadProvider:s}),icon:!t&&u}),title:n,description:r})}function W(e){var t=e.value,n=e.fields,r=e.field,a=void 0===r?n&&n[0]:r,i=e.tagSetting,o=void 0===i?{}:i,c=o[t];return null===t?null:_.a.createElement("div",null,_.a.createElement(s["a"],{color:c},_.a.createElement(U,{value:t,field:a})))}function B(e){var t=e.value,n=null===t||void 0===t?void 0:t.lastIndexOf("/"),r=null===t||void 0===t?void 0:t.slice(n+1);return _.a.createElement("a",{target:-1!==(null===t||void 0===t?void 0:t.indexOf("http"))?"_blank":"_self",href:t},r||t)}function q(e){var t=e.value,n=t?t.split("#"):[t||void 0],r=Object(u["a"])(n,1),a=r[0],i=null===a||void 0===a?void 0:a.lastIndexOf("/"),o=null===a||void 0===a?void 0:a.slice(i+1);return _.a.createElement("div",null,_.a.createElement(C["a"],{url:t,title:o,onChildrenShow:!0},(function(e){var n=e.onShow;return _.a.createElement("a",{onClick:n,rel:"noopener noreferrer"},null!==o&&void 0!==o?o:t)})))}function N(e){var t=e.value,n=e.date;return t||n?b()(t||n).format("YYYY-MM-DD"):""}function K(e){var t=e.value,n=e.datetime;return t||n?b()(t||n).format("YYYY-MM-DD HH:mm:ss"):""}function H(e){var t=e.value,n=e.timeFormat,r=e.customFormat,a=void 0===r?n:r;return b()(Number(t),"X").format(a||"YYYY-MM-DD HH:mm:ss")}function z(e){var t=e.value,n=e.bool;return t||n?_.a.createElement(o["a"],{type:"check-circle",theme:"filled",style:{color:"#70BF2B"}}):_.a.createElement(o["a"],{type:"close-circle",theme:"filled",style:{color:"#DD4646"}})}function J(e){var t=e.value,n=e.changePreviewImageUrl,r=e.setPreviewImageVisible,a=e.component,i=e.uploadProvider;return t?_.a.createElement("div",{style:{height:100}},_.a.createElement("img",{src:Object(v["v"])(t,{width:100,height:100,uploadProvider:i}),alt:"",className:k["gmImg"],style:{width:100,maxHeight:100,objectFit:"cover",cursor:"zoom-in"},onClick:function(){n(t),r(!0)},onLoad:function(){return F((function(){a&&a.forceUpdate()}))}})):_.a.createElement(m["Fragment"],null)}function Y(e){var t=e.icon,n=e.restProps,r=void 0===n?{}:n;if(!t)return null;var a=Object(v["n"])(t);return _.a.createElement(o["a"],Object(i["a"])({},a,r))}function G(e){var t=e.icon,n=e.text;return _.a.createElement("span",null,Y({icon:t}),_.a.createElement("span",{style:{marginLeft:10}},n))}function Q(){return _.a.createElement("span",{style:{color:"red"}},"\u6682\u4e0d\u652f\u6301\u663e\u793a\u8be5\u7c7b\u578b\u5b57\u6bb5")}function Z(e){var t=e.value;return JSON.stringify(t)}var X={text:U,longtext:R,tag:W,link:B,file:q,video:O["a"],date:N,datetime:K,timeStamp:H,bool:z,image:J,icon:Y,title:L,duration:I,ErrorWidget:Q},$=function(e){return function(t){var n=t.value,r=Object(a["a"])(t,["value"]);return null===n||void 0===n?void 0:n.map((function(t,a){return _.a.createElement(_.a.Fragment,null,_.a.createElement(e,Object(i["a"])({},r,{value:t})),a<n.length-1&&", ")}))}},ee=Object(r["a"])(Object(r["a"])({},e(X).mapValues($).mapKeys((function(e,t){return"multi-".concat(t)})).value()),{},{"multi-image":j["a"],"multi-title":L}),te=Object(r["a"])(Object(r["a"])(Object(r["a"])({},X),ee),{},{textimg:V,iconText:G,array:E["a"],object:Z,table:g["a"],MultiFile:w["a"]});function ne(){var e=Object(v["hb"])((function(e){var t=e.displayWidgets;return t}));return e?Object(r["a"])(Object(r["a"])({},te),e):te}function re(){var e=Object(v["hb"])((function(e){var t=e.displayWidgetName;return t}));return e?Object(r["a"])(Object(r["a"])({},A),e):A}function ae(){var e=Object(v["hb"])((function(e){var t=e.displayWidgetMapping;return t}));if(e){var t=Object(r["a"])({},x);return e.forEach((function(e){var n=Object(u["a"])(e,2),r=n[0],a=n[1];a in t&&t[a].push(r)})),t}return x}function ie(e,t,n){var r=t,a=!1;return e.split(".").forEach((function(e){if(r){var t=Object(v["t"])(r,e,n);t&&Object(v["z"])(t)&&(a=!0),r=null===t||void 0===t?void 0:t.ref}})),a}function oe(){var e=Object(v["wb"])();return ce(e)}function ce(e){return function(t,n){var r=t.widget,a=t.name,i=t.fields,o=void 0===i?{value:a}:i,c=r,l=o.value,u=void 0===l?a:l;if(u){if(!c&&u){var s=Object(v["j"])(n,u,e);if(!s)return"ErrorWidget";c=P(s.type)}ie(u,n,e)&&c in X&&(c="multi-".concat(c))}return c}}function le(e){var t=oe();return function(n){return t(n,e)}}function ue(t,n,r,a){return ie(a,n,t)?Object(v["m"])(a,r):e.get(r,a)}function se(e){var t=ne();if(!e)return Q;var n=t[e];return n||Q}function de(t){var n=t.fields,r=t.model,a=t.widgetName,o=t.record,c=t.widgetProps,l=t.providedSchemas,u=Object(v["wb"])(),s=l||u,d=se(a),f=e.mapValues(n,(function(e){return ue(s,r,o,e)}));return _.a.createElement(d,Object(i["a"])({},c,f))}}).call(this,n("LvDl"))},4:function(e,t){},"4l6Y":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n("Utjr"),a=Object(r["d"])((function(){return Promise.all([n.e(34),n.e(26)]).then(n.bind(null,"ZnhR"))})),i=Object(r["d"])((function(){return Promise.all([n.e(32),n.e(24)]).then(n.bind(null,"CCXB"))}))},5:function(e,t){},"556t":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r={edit:"\u7f16\u8f91",delete:"\u5220\u9664",detail:"\u8be6\u60c5",action:"\u4e91\u51fd\u6570",info:"\u5f39\u7a97\u6d88\u606f",link:"\u94fe\u63a5",copy:"\u590d\u5236",partEdit:"\u90e8\u5206\u7f16\u8f91",nowEdit:"\u66f4\u65b0\u6570\u636e",refEdit:"\u5173\u8054\u7f16\u8f91",refDetail:"\u5173\u8054\u8be6\u60c5",refAdd:"\u5173\u8054\u521b\u5efa"},a=["refEdit","refDetail","refAdd"]},6:function(e,t){},"6GND":function(e,t,n){"use strict";n("vc6j");var r=n("Q9CN"),a=n("fWQN"),i=n("yKVA"),o=n("879j"),c=n("lt+M"),l=function(e){Object(i["a"])(n,e);var t=Object(o["a"])(n);function n(){var e;Object(a["a"])(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),e.Component=r["a"],e}return n}(c["a"]);t["a"]=l},"6fcy":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),i=n("3i6F");t["a"]=function(e){var t=e.value,n=e.field,r=e.fields,o=Object(i["l"])(n.ref);return a.a.createElement(i["a"],{widgetName:o({fields:r}),fields:r,model:n.ref,record:t})}},"6nhF":function(e,t,n){},7:function(e,t){},8:function(e,t){},"8MRj":function(e,t,n){"use strict";n("h/qz");var r=n("GmeQ"),a=n("0Owb"),i=n("fWQN"),o=n("mtLc"),c=n("yKVA"),l=n("879j"),u=n("q1tI"),s=n.n(u),d=n("AAgL"),f=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange;return s.a.createElement(r["a"],Object(a["a"])({checked:!!t},this.widgetProps,{onChange:n}))}}]),n}(d["a"]);t["a"]=f},9:function(e,t){},"91mv":function(e,t,n){"use strict";n("A06R");var r=n("+Gxc"),a=(n("En1n"),n("71Ds")),i=(n("SePM"),n("PMX6")),o=(n("eE3J"),n("GSZB")),c=n("tJVT"),l=n("q1tI"),u=n.n(l);t["a"]=function(e){var t=e.loading,n=e.data,l=n.list,s=n.pagination,d=s.current,f=s.total,p=s.pageSize,m=e.field,_=m.id,h=m.title,b=m.url,v=e.onImageClick,g=e.onPaginationChange,O=e.actions,y=void 0===O?[]:O,j=b.split("#"),w=Object(c["a"])(j,1),E=w[0];return u.a.createElement("div",null,u.a.createElement(a["a"],{rowKey:_,loading:t,grid:{gutter:24,lg:3,md:2,sm:1,xs:1},dataSource:l,renderItem:function(e){return u.a.createElement(a["a"].Item,{key:e[_]},u.a.createElement(i["a"],{cover:u.a.createElement("img",{alt:e[h],style:{objectFit:"cover",height:400,maxWidth:800,cursor:"zoom-in"},src:-1!==e[E].indexOf(".myqcloud.com/")?"".concat(e[E],"?imageView2/1/w/800/h/400"):"".concat(e[E],"?x-oss-process=image/resize,m_mfit,h_400,w_800"),onClick:function(){return v(e)}}),hoverable:!0,actions:y.map((function(t){return u.a.createElement("div",{key:t.name,onClick:function(){return t.onClick(e)}},t.icon&&u.a.createElement(o["a"],{type:t.icon}),t.label)}))},u.a.createElement(i["a"].Meta,{style:{height:24},title:e[h]})))}}),u.a.createElement(r["a"],{showSizeChanger:!0,showQuickJumper:!0,onChange:g,onShowSizeChange:g,current:d,total:f,pageSize:p||0}))}},"9Ndd":function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return N})),n.d(t,"b",(function(){return H})),n.d(t,"a",(function(){return z})),n.d(t,"f",(function(){return J})),n.d(t,"c",(function(){return Y})),n.d(t,"i",(function(){return G})),n.d(t,"h",(function(){return Q})),n.d(t,"g",(function(){return Z}));var r=n("tJVT"),a=n("k1fw"),i=n("oBTY"),o=n("COtZ"),c=n("0SIm"),l=n("Rzkh"),u=n("lO8B"),s=n("GPui"),d=n("WRAw"),f=n("6GND"),p=n("EKfP"),m=n("3V3B"),_=n("8MRj"),h=n("mefr"),b=n("hJ9C"),v=n("Vtfu"),g=n("chM4"),O=n("buKw"),y=n("UCuA"),j=n("FJV0"),w=n("1X5l"),E=n("oORW"),k=n("uRgk"),C=n("dUs0"),x=n("04aD"),M=n("qa+J"),P=n("LyJH"),S=n("+s2E"),A=n("K/pY"),D=n("HrPU"),F=n("juLU"),T=n("hNBN"),L=n("psPf"),I=n("sw8h"),U=n("onda"),R=n("AGEi"),V=n("k5tp"),W=n("6fcy"),B=n("jfUH"),q={string:void 0,integer:void 0,float:void 0,decimal:void 0,bool:!1,date:void 0,datetime:void 0,time:void 0,image:void 0,file:void 0,video:void 0,ref:void 0,mref:[],bref:[],object:{},array:[]},N={string:"TextInput",text:"TextArea",richtext:"RichTextEditor",integer:"NumberInput",float:"NumberInput",decimal:"NumberInput",bool:"Switch",ref:"Select",mref:"Select",bref:"InlineForm",oref:"Select",boref:"BORefForm",time:"TimePicker",datetime:"DatePicker",date:"DatePicker",image:"ImageUploader",file:"FileUploader",video:"VideoUploader",gallery:"Gallery",transfer:"Transfer",treeselect:"TreeSelect",password:"PasswordInput",checkbox:"Checkbox",cascader:"Cascader",radio:"Radio",object:"ObjectForm",array:"ArrayForm"},K=e.mapValues(N,(function(e,t){return[e].concat(Object(i["a"])({string:["TextArea","PasswordInput","ImageUploader","FileUploader","Radio","VideoUploader"],bool:["Checkbox"],integer:["Radio","TimeStamp"],ref:["Gallery","TreeSelect","Cascader","GroupCascader","Radio","TableSelect"],mref:["Gallery","MultiFileUploader","Transfer","TreeSelect","Checkbox","TableSelect"],text:["RichTextEditor","JsonEditor","CodeEditor"],bref:["InnerTable"]}[t]||[]))})),H={TextInput:v["a"],TextArea:h["a"],RichTextEditor:b["a"],NumberInput:f["a"],Switch:_["a"],Select:m["a"],InlineForm:C["a"],InnerTable:x["a"],TimePicker:g["a"],ImageUploader:s["a"],FileUploader:u["a"],MultiFileUploader:R["a"],VideoUploader:d["a"],Gallery:j["a"],Transfer:y["a"],TreeSelect:w["a"],PasswordInput:E["a"],Checkbox:l["a"],Cascader:o["a"],GroupCascader:c["a"],Radio:p["a"],DatePicker:O["a"],ObjectForm:P["a"],BORefForm:S["a"],ArrayForm:M["a"],IconSelect:k["a"],ModelSelect:A["a"],FieldPicker:D["a"],RefEdit:F["a"],JsonEditor:T["a"],CodeEditor:L["a"],TimeStamp:I["a"],MapPicker:U["a"],TableSelect:V["a"],Display:W["a"]},z={TextInput:"\u5355\u884c\u8f93\u5165\u6846",TextArea:"\u591a\u884c\u8f93\u5165\u6846",RichTextEditor:"\u5bcc\u6587\u672c\u7f16\u8f91\u5668",NumberInput:"\u6570\u5b57\u8f93\u5165\u6846",Switch:"\u5f00\u5173",Select:"\u4e0b\u62c9\u9009\u62e9\u5668",TableSelect:"\u8868\u683c\u9009\u62e9",InlineForm:"\u5185\u8054\u8868\u5355",InnerTable:"\u5185\u5d4c\u8868\u683c",TimePicker:"\u65f6\u95f4\u9009\u62e9\u5668",ImageUploader:"\u56fe\u7247\u4e0a\u4f20",FileUploader:"\u6587\u4ef6\u4e0a\u4f20",MultiFileUploader:"\u6587\u4ef6\u4e0a\u4f20",VideoUploader:"\u89c6\u9891\u4e0a\u4f20",Gallery:"\u56fe\u7247\u4e0a\u4f20",Transfer:"\u7a7f\u68ad\u6846",TreeSelect:"\u6811\u578b\u9009\u62e9\u5668",PasswordInput:"\u5bc6\u7801\u8f93\u5165\u6846",Checkbox:"\u590d\u9009\u6846",Cascader:"\u7ea7\u8054\u9009\u62e9\u5668\uff08\u6811\u5f62\uff09",GroupCascader:"\u7ea7\u8054\u9009\u62e9\u5668\uff08\u5206\u7ec4\uff09",Radio:"\u5355\u9009\u6846",DatePicker:"\u65e5\u671f\u9009\u62e9\u5668",ObjectForm:"\u5bf9\u8c61\u8868\u5355",ArrayForm:"\u6570\u7ec4\u8868\u5355",IconSelect:"\u56fe\u6807\u9009\u62e9\u5668",ModelSelect:"\u6a21\u578b\u9009\u62e9\u5668",JsonEditor:"JSON",CodeEditor:"\u4ee3\u7801\u7f16\u8f91\u5668",TimeStamp:"\u65f6\u95f4\u6233",FieldPicker:"\u5b57\u6bb5\u9009\u62e9\u5668",MapPicker:"\u5730\u56fe\u62fe\u53d6\u5668"};function J(e,t,n){H[e]=t,z[e]=n||e}function Y(t,n){var r={};if(!t||!n)return r;var a=n.map((function(t){return e.isObject(t)?t.name:t}));return t.fields.filter((function(e){return a.includes(e.name)})).forEach((function(e){var t=e.default;r[e.name]=void 0!==t?t:q[e.type]})),r}function G(){var e=Object(B["hb"])((function(e){var t=e.formWidgets;return t}));return e?Object(a["a"])(Object(a["a"])({},H),e):H}function Q(){var e=Object(B["hb"])((function(e){var t=e.formWidgetNames;return t}));return e?Object(a["a"])(Object(a["a"])({},z),e):z}function Z(){var t=Object(B["hb"])((function(e){var t=e.formTypeMapWidget;return t}));if(t){var n=e.mapValues(K,(function(e){return Object(i["a"])(e)}));return t.forEach((function(e){var t=Object(r["a"])(e,2),a=t[0],i=t[1];i in n&&n[i].push(a)})),n}return K}}).call(this,n("LvDl"))},AAgL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("k1fw"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=n("q1tI"),u=n.n(l),s=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;Object(a["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),e.options={},e.commonProps=["dispatch","children","data-__field","data-__meta","content","schemas","value","form","field","onChange","monitorfields","monitorvalues","validateparams","extra"],e.myProps=[],e}return Object(i["a"])(n,[{key:"widgetProps",get:function(){var e=this.props,t=this.commonProps.concat(this.myProps),n=Object(r["a"])({},this.options);return Object.keys(this.props).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}}]),n}(u.a.PureComponent)},AGEi:function(e,t,n){"use strict";n("nTdE");var r=n("IZHl"),a=(n("+L6B"),n("2/Rp")),i=n("jrin"),o=n("oBTY"),c=n("tJVT"),l=n("q1tI"),u=n.n(l),s=n("z7Xi"),d=n("jfUH");t["a"]=function(e){var t=e.field.ref,n=e.urlField,f=void 0===n?"url":n,p=e.onChange,m=e.value,_=Object(l["useState"])([]),h=Object(c["a"])(_,2),b=h[0],v=h[1],g=Object(d["rb"])(t),O=Object(d["zb"])(t),y=Object(o["a"])(b);m&&m.length&&(y=y.concat(m.map((function(e){var t;return{id:g(e),url:e[f]&&e[f].split("#")[0],uid:e[f],name:null!==(t=O(e))&&void 0!==t?t:e[f]}}))));var j=Object(d["Bb"])(),w=Object(d["Ab"])(t),E=Object(d["sb"])(t);return u.a.createElement(r["a"].Dragger,{action:j.uploadHost,data:j.formData,beforeUpload:j.init,multiple:!0,fileList:y,onChange:function(e){var t=e.file,n=e.fileList;v(n.filter((function(e){return"uploading"===e.status})));var r=function(){var e=j.getUrl(t),n=Object(i["a"])({},f,e);return E!==w&&(n[w]=t.name),n};p(n.filter((function(e){return"done"===e.status})).map(r).concat(n.filter((function(e){return void 0===e.status})).map((function(e){return m.find((function(t){return t[f]===e.uid}))}))))}},u.a.createElement("p",{className:"ant3-upload-drag-icon"},u.a.createElement(s["a"],null)),u.a.createElement("p",{className:"ant3-upload-text"},u.a.createElement(a["a"],null,"\u70b9\u51fb\u4e0a\u4f20")),u.a.createElement("p",{className:"ant3-upload-hint"},"\u6216\u62d6\u52a8\u6587\u4ef6\u76f4\u6b64\u5904"))}},AhFF:function(e,t,n){"use strict";(function(e){n("UvA9");var r=n("u4G2"),a=(n("eNCU"),n("pjJH")),i=(n("GPKB"),n("mFAc")),o=n("k1fw"),c=n("oBTY"),l=n("9og8"),u=n("tJVT"),s=(n("Dvpn"),n("myml")),d=n("WmNS"),f=n.n(d),p=n("q1tI"),m=n.n(p),_=n("/MKj"),h=n("jfUH"),b=n("mmaM"),v=s["a"].Column,g=s["a"].ColumnGroup,O="read",y="write",j=function(t){var n=t.dispatch,d=t.detailObject,_=d.app_label,j=d.table_name,w="".concat(_,"__").concat(j),E=Object(p["useState"])([]),k=Object(u["a"])(E,2),C=k[0],x=k[1],M=Object(p["useState"])(),P=Object(u["a"])(M,2),S=P[0],A=P[1],D=Object(p["useState"])(!1),F=Object(u["a"])(D,2),T=F[0],L=F[1],I=Object(p["useState"])([]),U=Object(u["a"])(I,2),R=U[0],V=U[1],W=Object(h["tb"])(w),B=Object(h["fb"])(w),q=function(){var t=Object(l["a"])(f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isEmpty(C)){t.next=2;break}return t.abrupt("return");case 2:Object(b["queryContent"])({model:"auth__group"}).then(A),null===W||void 0===W||W.fields.forEach((function(e){C.push({name:e.name,field:e.displayName})})),x(Object(c["a"])(C)),V(B.map((function(e){return Object(o["a"])({},e)})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(p["useEffect"])((function(){q()}),[W]);var N=function(e,t,n,r){var a=R.find((function(e){return e.group===t&&e.field===n})),i=a||{group:t,field:n};"write"===r&&e&&(i.read=!0),i[r]=e,a||R.push(i),V(Object(c["a"])(R))},K=function(e,t,n){var r=R.find((function(n){return n.group===e&&n.field===t}))||{};return r[n]},H=function(){var e=Object(l["a"])(f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,e.next=4,Object(b["cloudFunction"])({model:"bsm_config__fieldpermission",functionName:"update_field_permission",params:{model:w,permissions:R}});case 4:n({type:"content/getConfig"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),i["a"].error("error");case 10:L(!1),i["a"].success("\u4fee\u6539\u6210\u529f");case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return m.a.createElement("div",null,m.a.createElement(s["a"],{bordered:!0,dataSource:C,pagination:!1,footer:function(){return m.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},m.a.createElement(a["a"],{type:"primary",loading:T,onClick:H},"\u66f4\u65b0"))}},m.a.createElement(v,{title:"\u5b57\u6bb5\u540d",dataIndex:"field",key:"name"}),m.a.createElement(g,{title:"\u89d2\u8272"},S&&S.list.map((function(e){return m.a.createElement(v,{title:e.name,key:e.id,render:function(t,n){return m.a.createElement("div",null,m.a.createElement(r["a"],{disabled:K(e.id,n.name,y),checked:K(e.id,n.name,O),onChange:function(t){var r=t.target.checked;return N(r,e.id,n.name,O)}},"\u8bfb"),m.a.createElement(r["a"],{checked:K(e.id,n.name,y),onChange:function(t){var r=t.target.checked;return N(r,e.id,n.name,y)}},"\u5199"))}})})))))};t["a"]=Object(_["c"])()(j)}).call(this,n("LvDl"))},BAaj:function(e,t,n){"use strict";n("g9YV");var r=n("wCAj"),a=n("0Owb"),i=(n("ascH"),n("GqlH")),o=n("PpiC"),c=n("fWQN"),l=n("mtLc"),u=n("yKVA"),s=n("879j"),d=n("k1fw"),f=n("q1tI"),p=n.n(f),m=n("FTpL"),_=n.n(m);function h(e){var t=[];return e.forEach((function(e){e.needTotal&&t.push(Object(d["a"])(Object(d["a"])({},e),{},{total:0}))})),t}var b=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(e){var r;Object(c["a"])(this,n),r=t.call(this,e),r.handleRowSelectChange=function(e,t){var n=r.state.needTotalList;n=n.map((function(e){return Object(d["a"])(Object(d["a"])({},e),{},{total:t.reduce((function(t,n){return t+parseFloat(n[e.dataIndex],10)}),0)})}));var a=r.props.onSelectRow;a&&a(t),r.setState({selectedRowKeys:e,needTotalList:n})},r.handleTableChange=function(e,t,n){var a=r.props.onChange;a&&a(e,t,n)},r.cleanSelectedKeys=function(){r.handleRowSelectChange([],[])};var a=e.columns,i=h(a);return r.state={selectedRowKeys:[],needTotalList:i},r}return Object(l["a"])(n,[{key:"render",value:function(){var e=this.state,t=e.selectedRowKeys,n=e.needTotalList,c=this.props,l=c.data,u=void 0===l?{}:l,s=c.rowKey,m=c.shouldSelect,h=c.expandOptions,b=void 0===h?{}:h,v=Object(o["a"])(c,["data","rowKey","shouldSelect","expandOptions"]),g=u.list,O=void 0===g?[]:g,y=u.pagination,j=!!y&&Object(d["a"])({showSizeChanger:!0,showQuickJumper:!0},y),w=m?{selectedRowKeys:t,preserveSelectedRowKeys:!0,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}}:null;return p.a.createElement("div",{className:_.a.standardTable},t.length>0?p.a.createElement("div",{className:_.a.tableAlert},p.a.createElement(i["a"],{message:p.a.createElement(f["Fragment"],null,"\u5df2\u9009\u62e9 ",p.a.createElement("a",{style:{fontWeight:600}},t.length)," \u9879\xa0\xa0",n.map((function(e){return p.a.createElement("span",{style:{marginLeft:8},key:e.dataIndex},e.title,"\u603b\u8ba1\xa0",p.a.createElement("span",{style:{fontWeight:600}},e.render?e.render(e.total):e.total))})),p.a.createElement("a",{onClick:this.cleanSelectedKeys,style:{marginLeft:24}},"\u6e05\u7a7a")),type:"info",showIcon:!0})):"",p.a.createElement(r["a"],Object(a["a"])({rowKey:s||"key",rowSelection:w,dataSource:O,pagination:j,onChange:this.handleTableChange},v,b)))}}],[{key:"getDerivedStateFromProps",value:function(e){if(0===e.selectedRows.length){var t=h(e.columns);return{selectedRowKeys:[],needTotalList:t}}return null}}]),n}(f["PureComponent"]);t["a"]=b},"BE/h":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("52nx");var r=n("7bDm"),a=n("q1tI"),i=n.n(a),o=n("jfUH");function c(e){var t=e.currentActionObject,n=e.currentActionParams,c=void 0===n?{}:n,l=e.model,u=e.currentObject,s=e.context,d=e.visible,f=e.handleOk,p=e.handleCancel,m=Object(o["wb"])();function _(){var e=t.name,n=t.title;return n?"function"===typeof n?n({model:l,currentObject:u,currentActionObject:t,currentActionParams:c,Schemas:m}):n:e}function h(){var e=t.width,n="60%";return e||n}function b(){var e=t.component;return e?e({model:l,currentActionObject:t,currentObject:u,currentActionParams:c,context:s}):i.a.createElement(a["Fragment"],null)}return i.a.createElement(r["a"],{title:_(),width:h(),destroyOnClose:!0,visible:d,closable:!0,keyboard:!0,onOk:f,onCancel:p,footer:null},b())}},CM9M:function(e,t,n){"use strict";(function(e){var r=n("tJVT"),a=(n("2qtc"),n("kLXV")),i=n("4Qd8"),o=n.n(i),c=n("q1tI"),l=n.n(c),u=a["a"].confirm,s=["bmp","doc","docx","htm","html","jpg","jpeg","pdf","png","ppt","pptx","tiff","txt","xls","xlsx"],d=function(t){var n=t.url,d=void 0===n?"":n,f=t.title,p=t.children,m=Object(c["useState"])(!1),_=Object(r["a"])(m,2),h=_[0],b=_[1],v=function(){window.location.href=d},g=function(){b(!1)},O=d.lastIndexOf("."),y=function(){var e=d.substr(O+1).split("#")[0];s.some((function(t){return t===e}))?b(!0):u({title:"\u63d0\u793a",content:"\u662f\u5426\u4e0b\u8f7d\u8be5\u6587\u4ef6",onOk:function(){v()}})},j=null!==f&&void 0!==f?f:d.substring(d.lastIndexOf("/")+1,O),w=Object(c["useMemo"])((function(){return l.a.createElement(o.a,{config:{header:{disableHeader:!0}},style:{width:"100%",height:"100%"},pluginRenderers:i["DocViewerRenderers"],documents:[{uri:d}]})}),[d]);return l.a.createElement("div",{className:"file-view"},l.a.createElement(a["a"],{className:"fileModal",title:j,bodyStyle:{background:"green",height:"80vh",padding:"0"},width:"80vw",okText:"\u4e0b\u8f7d",cancelText:"\u5173\u95ed",onOk:v,onCancel:g,visible:h,destroyOnClose:!0},w),e.isFunction(p)?p({onShow:y}):p)};t["a"]=d}).call(this,n("LvDl"))},COtZ:function(e,t,n){"use strict";(function(e){var r=n("fWQN"),a=n("mtLc"),i=n("yKVA"),o=n("879j"),c=(n("lNFX"),n("VE2L")),l=n("0Owb"),u=n("q1tI"),s=n.n(u),d=n("AAgL"),f=n("jfUH"),p=function(e){var t=e.optionList,n=e.choiceObject,r=e.initialValue,a=e.widgetProps,i=e.onChange,o=e.leafOnly,u=void 0!==o&&o;return s.a.createElement(c["a"],Object(l["a"])({options:t,onChange:function(e){return i(e.length?n[e.slice(-1)[0]]:null)},value:r,changeOnSelect:!u,expandTrigger:u?"click":"hover"},a))},m=function(e){Object(i["a"])(n,e);var t=Object(o["a"])(n);function n(){var e;Object(r["a"])(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),e.myProps=["remoteChoices"],e}return Object(a["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.leafOnly,r=e.choiceObject,a=e.optionList,i=e.initialValue;return s.a.createElement(p,{onChange:t,leafOnly:n,optionList:a,choiceObject:r,initialValue:i,widgetProps:this.widgetProps})}}]),n}(d["a"]);t["a"]=function(t){var n=Object(f["xb"])((function(e){var t=e.content;return t.all})),r=t.field.ref,a=Object(f["U"])(r),i=Object(f["tb"])(r),o=Object(f["Ab"])(r),c=t.parent,d=void 0===c?a.parentField||i.parentField||"parent":c,p=Object(u["useCallback"])((function(e){return Object(f["S"])(e,r,d)}),[d,r]),_=n[r],h=Object(u["useMemo"])((function(){return e.fromPairs((_||[]).map((function(e){return[p(e),e]})))}),[_,p]),b=Object(u["useMemo"])((function(){var t=e.mapValues(h,(function(e){return{value:p(e),label:e[o]}}));return e.forEach(h,(function(e,n){var r=e[d];r&&(t[r].children||(t[r].children=[]),t[r].children.push(t[n]))})),e.filter(t,(function(e,t){return!h[t][d]}))}),[h,p,d,o]),v=t.value,g=v&&!e.isEmpty(h),O=Object(u["useMemo"])((function(){if(!g)return[];var e=p(v),t=[];do{t.unshift(e),e=h[e][d]}while(e);return t}),[g,h,p,d,v]),y=Object(f["ab"])("cacheAll"),j=t.field.type,w=Object(u["useCallback"])((function(){Object(f["C"])(j)&&y({model:r,titleField:o})}),[y,j,r,o]);return Object(u["useEffect"])((function(){w()}),[w]),s.a.createElement(m,Object(l["a"])({},t,{choiceObject:h,optionList:b,initialValue:O}))}}).call(this,n("LvDl"))},CsTM:function(e,t,n){e.exports={clickable:"clickable___1U41I"}},CzB9:function(e,t,n){"use strict";(function(e){n("O3gP");var r=n("lrIw"),a=(n("5NDa"),n("5rEg")),i=n("tJVT"),o=n("q1tI"),c=n.n(o),l=n("mmaM"),u=n("jfUH"),s=n("l+S1");t["a"]=function(t){var n=t.model,d=t.searchFields,f=void 0===d?[]:d,p=t.onSearch,m=Object(o["useState"])([]),_=Object(i["a"])(m,2),h=_[0],b=_[1],v=Object(u["ub"])(n),g=Object(u["Ab"])(n),O=Object(o["useRef"])(null),y=function(e){var t;return null===(t=v(e))||void 0===t?void 0:t.displayName},j=function(e){return e?Object(l["queryContent"])({model:n,page:1,size:7,filters:[{operator:"or",children:f.map((function(t){return{field:t,operator:"icontains",value:e}}))}]}).then((function(e){return e.list})):[]},w=Object(u["cb"])(j,(function(t,n){var r=f.map((function(r){return{label:"\u6309".concat(y(r),"\u67e5\u627e"),options:t.map((function(t){return[e.get(t,r),t]})).map((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];return[String(n),r]})).filter((function(e){var t=Object(i["a"])(e,1),r=t[0];return null===r||void 0===r?void 0:r.includes(n)})).map((function(e){var t=Object(i["a"])(e,2),a=t[0],o=t[1];return{value:a,label:c.a.createElement(c.a.Fragment,null,Object(u["y"])(a,n)," ",g!==r&&c.a.createElement("span",{style:{opacity:.45}},o[g]))}}))}})).filter((function(e){return e.options.length}));b(r)})),E=Object(i["a"])(w,1),k=E[0];return c.a.createElement(r["a"],{backfill:!0,style:{width:"100%"},options:h,onSearch:function(e){return k(e.trim())}},c.a.createElement(a["a"].Search,{placeholder:"\u641c\u7d22".concat(f.map(y).join("\u3001")),ref:O,onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},size:"large",enterButton:c.a.createElement(c.a.Fragment,null,c.a.createElement(s["a"],null)," \u641c \u7d22",c.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0},onMouseDown:function(e){e.stopPropagation(),e.preventDefault()}})),onSearch:function(e,t){t.stopPropagation(),t.preventDefault(),O.current.blur(),p(e.trim())}}))}}).call(this,n("LvDl"))},EBSl:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return b})),n.d(t,"j",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return y})),n.d(t,"f",(function(){return j})),n.d(t,"i",(function(){return w})),n.d(t,"a",(function(){return E})),n.d(t,"q",(function(){return k})),n.d(t,"m",(function(){return C})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return A})),n.d(t,"p",(function(){return D})),n.d(t,"l",(function(){return N})),n.d(t,"k",(function(){return K}));n("GPKB");var r=n("mFAc"),a=(n("52nx"),n("7bDm")),i=n("tJVT"),o=n("9og8"),c=n("k1fw"),l=n("WmNS"),u=n.n(l),s=n("RLxJ"),d=n("4a3J"),f=n("jfUH"),p=n("mmaM"),m=n("q1tI"),_="ACTION_TYPE_INLINE",h="ACTION_TYPE_MODEL",b="ACTION_TYPE_BATCH",v="modal",g="action",O="func",y="info",j="drawer",w="link",E={ACTION_TYPE_INLINE:{},ACTION_TYPE_MODEL:{},ACTION_TYPE_BATCH:{}};function k(e){var t=e.type,n=e.action,r=E[t];r[n]=e}function C(e,t){var n=E[e];return n[t]}function x(t,n){var r=window.g_app._store.getState(),a=r.bsmSetting,i=E[t];return e.values(i).filter((function(e){var t=e.autoAdd,r=e.shouldShow,i=e.model,o=!1;if(n&&i){var c="function"===typeof i?i({setting:a}):i;o=c===n}var l=!0;return r&&"function"===typeof r&&(l=r({setting:a})),t&&o&&l}))}function M(e){var t=e.config;return t}function P(e){var t=e.config;return t}function S(t){var n,r,a=t.config,i=t.record,o=t.model,c=t.modalForm,l=t.modalDetail,u=Object(f["M"])(i,o),s=o;if(null!==(n=a.params)&&void 0!==n&&n.field){var d=Object(f["r"])(o,a.params.field,i),p=d.id,m=d.schemaField;if(void 0===p)return{type:"message",title:a.title,action:"message",params:{type:"info",text:"\u6682\u65e0".concat(a.title)}};s=m.ref,p&&(u=p)}switch(a.action||a.type){case"copy":return{action:"copy",type:"modal",title:a.title,confirm:a.confirm,params:{isCopy:!0}};case"nowEdit":return{action:"patch",type:"func",title:a.title,confirm:a.confirm,params:{payload:a.params}};case"partEdit":return e.isEmpty(a.params.editFields)?{action:"patch",type:"func",title:a.title,confirm:a.confirm,params:{payload:a.params}}:{type:"modal",action:"partEdit",title:a.title,confirm:a.confirm,params:a.params};case"edit":return c&&(null===(r=a.params)||void 0===r||!r.field)||a.modalForm||a.showInModal?{type:"modal",action:"edit",title:a.title,confirm:a.confirm}:{type:"link",action:"edit",params:{link:"/content/".concat(s,"/edit/").concat(u)},confirm:a.confirm,title:a.title};case"refEdit":return a.showInModal?{type:"modal",action:"refEdit",title:a.title,confirm:a.confirm,params:{field:a.params.field}}:{type:"link",action:"refEdit",params:{link:"/content/".concat(s,"/edit/").concat(u)},title:a.title,confirm:a.confirm};case"refAdd":return{type:"modal",action:"refAdd",title:a.title,confirm:a.confirm,params:{field:a.params.field,action:"refAdd",values:a.params.values}};case"delete":return{type:"func",action:"delete",title:a.title,confirm:a.confirm||!0,params:{action:"delete",payload:{model:o,id:Object(f["M"])(i,o)}}};case"detail":var _,h=a.params.page;return!l||null!==(_=a.params)&&void 0!==_&&_.field?{type:"link",action:"detail",params:{link:"/content/".concat(s,"/detail/").concat(u).concat(h?"?page=".concat(h):"")},title:a.title,confirm:a.confirm}:{type:"modal",title:a.title,confirm:a.confirm,action:"detail",params:{page:h,type:"detail"}};case"refDetail":return a.showInModal?{type:"modal",title:a.title,confirm:a.confirm,action:"refDetail",params:{type:"detail",field:a.params.field}}:{type:"link",action:"refDetail",params:{link:"/content/".concat(s,"/detail/").concat(u)},title:a.title,confirm:a.confirm};default:return a.action||(a.action=a.type),a}}function A(e,t){return e===_?Object(c["a"])(Object(c["a"])({},S(t)),{},{sence:_}):e===b?Object(c["a"])(Object(c["a"])({},M(t)),{},{sence:b}):Object(c["a"])(Object(c["a"])({},P(t)),{},{sence:h})}function D(e){e.startsWith("http")?window.open(e,"__blank"):s["a"].push(e)}function F(e,t,n){var r=t.record,a=C(e.sence,e.action),i=n.link(r,a,e.params);D(i)}function T(e,t,n){var r=t.record,a=C(e.sence,e.action);n.showModal(r,a,e.params)}function L(e,t,n){var r=t.record,a=C(e.sence,e.action);n.showDrawer(r,a,e.params)}function I(e,t,n){var r,a=t.record,i=t.model,o=Object(c["a"])(Object(c["a"])({},C(e.sence,e.action)),{},{params:e.params}),l=o.func;if(!l&&(null!==(r=e.params)&&void 0!==r&&r.func))return e.params.func(Object(f["M"])(a,i));return e.sence===_?l(a,i,o,n):e.sence===h?l(i,o,n):e.sence===b?l(a,i,o,n):null}function U(e,t,n){return R.apply(this,arguments)}function R(){return R=Object(o["a"])(u.a.mark((function e(t,n,r){var a,i,o,c,l,s,d,p,m,_,h=arguments;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=n.success,i=n.error,o=n.title,c=r.record,l=r.model,s=c?Object(f["M"])(c,l):"",d="".concat(n.title,":").concat(s),p=h.length,m=new Array(p>3?p-3:0),_=3;_<p;_++)m[_-3]=h[_];return e.next=7,Object(f["O"])(t.apply(void 0,[n,r].concat(m)),{title:o,key:d,success:a,error:i});case 7:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}var V=U.bind(null,I);function W(e,t,n){var o,l,u,s=t.record,m=void 0===s?null:s,h=t.model,v={type:e.sence,action:"action",name:"\u4e91\u51fd\u6570",rspType:g,confirm:e.sence===b},O=Object(c["a"])(Object(c["a"])({},v),{},{params:e.params}),y=(null===O||void 0===O||null===(o=O.params)||void 0===o?void 0:o.payload)||{};e.sence===_&&(y.id=Object(f["M"])(m,h)),e.sence===b&&(y.ids=m.map((function(e){return Object(f["M"])(e,h)})));var j=function(t,o,c){return Object(p["cloudFunction"])({model:h,functionName:O.cloudFunc||O.params.action,params:t}).then((function(t){var l=t.result,u=void 0===l?"":l,s=t.error_code,d=t.error_message,f=t.logs;null===f||void 0===f||f.forEach((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];switch(n){case 10:console.debug(r);break;case 20:console.info(r);break;case 30:console.warn(r);break;case 40:case 50:console.error(r);break;default:console.log(r)}}));var p=O.callback;p?p(n):n.refresh(),"0"===s?o?o(u,n):r["a"].success("".concat(e.title||e.name||"","\u6267\u884c\u6210\u529f")):c?c(s,d):a["a"].error({title:"\u6267\u884c\u5931\u8d25",content:d})}))},w=function(t,i){var o="tip";return i||r["a"].loading({content:"".concat(e.title||e.name||"","\u6267\u884c\u4e2d"),key:o,duration:0}),j(t,(function(t){var c;i&&n.hideCollectInput(),null!==(c=O.params)&&void 0!==c&&c.rsp_processor?("show"===O.params.rsp_processor&&(a["a"].info({title:"\u6267\u884c\u7ed3\u679c",content:Object(d["a"])(t)}),r["a"].success({content:"".concat(e.title||e.name||"","\u6267\u884c\u5b8c\u6bd5"),duration:1,key:o})),"nop"===O.params.rsp_processor&&r["a"].success({content:"".concat(e.title||e.name||"","\u6267\u884c\u6210\u529f"),key:o})):r["a"].success({content:"".concat(e.title||e.name||"","\u6267\u884c\u6210\u529f"),key:o})}),(function(t,n){r["a"].error({key:o,content:"".concat(e.title||e.name||"","\u6267\u884c\u5931\u8d25, \u9519\u8bef\u4ee3\u7801\uff1a").concat(t,", \u9519\u8bef\u6d88\u606f\uff1a").concat(n)})}))};return null!==O&&void 0!==O&&null!==(l=O.params)&&void 0!==l&&l.fields&&(null===O||void 0===O||null===(u=O.params)||void 0===u?void 0:u.fields.length)>0?n.collectInputs(O.params.fields,(function(e){return y=Object(c["a"])(Object(c["a"])({},y),e),w(y,!0)}),(function(){console.log("\u53d6\u6d88\u4e86\u8f93\u5165")})):w(y,!1)}function B(e){var t=e.params,n=t.type,a=void 0===n?"info":n,i=t.text,o=void 0===i?"":i;r["a"][a](o)}function q(e,t){var n=e.params,r=n.type,i=void 0===r?"info":r,o=n.title,c=n.content,l=t.record;a["a"][i]({title:Object(f["Q"])(o,(function(e){return l[e]})),content:Object(f["Q"])(c,(function(e){return l[e]}))})}function N(e,t,n){var r=e.type,i=a["a"].confirm,o=C(e.sence,e.action);r||(r=o.rspType);var c=function(){switch(r){case"link":return F(e,t,n);case"modal":return T(e,t,n);case"action":return W(e,t,n);case"func":return V(e,t,n);case"info":return q(e,t,n);case"message":return B(e,t,n);case"drawer":return L(e,t,n);default:return null}},l=e.confirm||(null===o||void 0===o?void 0:o.confirm);if(l&&e.sence!==_){var u="string"===typeof l?l:"\u60a8\u786e\u8ba4\u5bf9\u9009\u4e2d\u7684\u591a\u6761\u6570\u636e\u8fdb\u884c".concat(e.title||e.name,"\u64cd\u4f5c\u5417\uff1f");return i({title:"\u786e\u8ba4\u6267\u884c\u6279\u91cf\u64cd\u4f5c",content:u,onOk:function(){return c()},onCancel:function(){}})}return c()}var K=function(e){var t=e.action,n=e.model,r=e.handler,a=e.children,i=Object(m["useContext"])(f["b"]);if(t.action in i.tableActions){var o=i.tableActions[t.action],l=new o(t.title,t.params||{},n,Object(c["a"])(Object(c["a"])({},r),{},{_renderer:a}));return l.render()}return a((function(){return N(t,{model:n},r)}),t.title)}}).call(this,n("LvDl"))},EKfP:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("0Owb"),a=(n("6dnR"),n("CQJL")),i=n("tJVT"),o=n("fWQN"),c=n("mtLc"),l=n("yKVA"),u=n("879j"),s=n("q1tI"),d=n.n(s),f=n("AAgL"),p=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;Object(o["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.myProps=["choices"],e}return Object(c["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,o=e.choices;return d.a.createElement(a["a"].Group,Object(r["a"])({onChange:function(e){return n(e.target.value)},value:t},this.widgetProps),o.map((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];return d.a.createElement(a["a"],{key:n,value:n},r)})))}}]),n}(f["a"])},"EnK/":function(e,t,n){e.exports={renderField:"renderField___1NkOd",renderIcon:"renderIcon___36Kxc"}},FJV0:function(e,t,n){"use strict";n("nTdE");var r,a,i,o=n("IZHl"),c=n("0Owb"),l=(n("eE3J"),n("GSZB")),u=n("jrin"),s=n("fWQN"),d=n("mtLc"),f=n("yKVA"),p=n("879j"),m=n("q1tI"),_=n.n(m),h=n("/MKj"),b=n("OFLC"),v=n("AAgL"),g=n("jfUH"),O=(r=Object(h["c"])((function(e){var t=e.content;return{content:t}})),a=Object(g["d"])((function(){return{uploader:Object(g["Bb"])()}})),r(i=a(i=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){var e;Object(s["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={previewUrl:!1,preview:!1,uploadingList:[]},e.getThumb=function(t){var n=e.props.uploadProvider;return Object(g["v"])(t,{uploadProvider:n})},e.handleUpload=function(t){var n=t.file,r=t.fileList,a=e.props,i=a.onChange,o=a.urlField,c=void 0===o?"url":o,l=a.field,s=a.value;e.setState({uploadingList:r.filter((function(e){return"uploading"===e.status}))});var d=function(){var t=e.props.uploader.getUrl(n),r=Object(u["a"])({},c,t);return Object(g["N"])(l.ref)!==e.titleField&&(r[e.titleField]=n.name),r};Object(g["D"])(l)?"done"===n.status&&i(d(n)):"mref"!==l.type&&"array"!==l.type||i(r.filter((function(e){return"done"===e.status})).map(d).concat(r.filter((function(e){return void 0===e.status})).map((function(e){return s.find((function(t){return t[c]===e.uid}))}))))},e}return Object(d["a"])(n,[{key:"titleField",get:function(){return this.refSchema.titleField}},{key:"refSchema",get:function(){var e=this.props.content.schemas;return e[this.refModel]}},{key:"refModel",get:function(){var e=this.props.field;return e.ref}},{key:"render",value:function(){var e=this,t=this.state,n=t.previewUrl,r=t.preview,a=t.uploadingList,i=this.props,u=i.value,s=i.field,d=i.urlField,f=void 0===d?"url":d,p=i.onChange,m=_.a.createElement("div",null,_.a.createElement(l["a"],{type:"plus"}),_.a.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20")),h=_.a.createElement(b["a"],{onClose:function(){return e.setState({preview:!1})},url:n,visible:r}),v=a;return Object(g["D"])(s)?(u&&u[f]&&(v=v.concat({id:Object(g["M"])(u,s.ref),url:u[f],thumbUrl:this.getThumb(u[f]),uid:u[f]})),_.a.createElement("div",null,_.a.createElement(o["a"],Object(c["a"])({listType:"picture-card",action:this.props.uploader.uploadHost,data:this.props.uploader.formData,fileList:v,onChange:this.handleUpload,onRemove:function(){return p(null)},onPreview:function(t){return e.setState({previewUrl:t.url,preview:!0})},beforeUpload:this.props.uploader.init,accept:"image/*",multiple:!0},this.widgetProps),v.length?null:m),h)):"mref"===s.type||"array"===s.type?(u&&u.length&&(v=v.concat(u.map((function(t){return{id:Object(g["M"])(t,s.ref),url:t[f],thumbUrl:e.getThumb(t[f]),uid:t[f]}})))),_.a.createElement("div",null,_.a.createElement(o["a"],Object(c["a"])({listType:"picture-card",action:this.props.uploader.uploadHost,data:this.props.uploader.formData,fileList:v,onChange:this.handleUpload,beforeUpload:this.props.uploader.init,onPreview:function(t){return e.setState({previewUrl:t.url,preview:!0})},accept:"image/*",multiple:!0},this.widgetProps),m),h)):null}}]),n}(v["a"]))||i)||i);t["a"]=O},FTpL:function(e,t,n){e.exports={standardTable:"standardTable___22bpW",tableAlert:"tableAlert___3nGm4"}},G3ML:function(e,t,n){"use strict";(function(e){n("4csm");var r=n("2Fwu"),a=(n("eE3J"),n("GSZB")),i=(n("9kbU"),n("vbHR")),o=(n("QjdF"),n("U4Vl")),c=(n("eNCU"),n("pjJH")),l=n("0Owb"),u=n("PpiC"),s=n("tJVT"),d=(n("uPNz"),n("Oedt")),f=(n("52nx"),n("7bDm")),p=n("9og8"),m=n("fWQN"),_=n("mtLc"),h=n("yKVA"),b=n("879j"),v=n("WmNS"),g=n.n(v),O=n("q1tI"),y=n.n(O),j=n("EBSl"),w=n("rQ+i"),E=n("Utjr"),k=n("gMH0"),C=n.n(k),x="link",M="button",P=function(t){Object(h["a"])(v,t);var n=Object(b["a"])(v);function v(e){var t;Object(m["a"])(this,v),t=n.call(this,e),t.onClick=function(){var e=Object(p["a"])(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(j["l"])(t,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var r=t.props,a=r.items,i=r.model,o=r.record;return t.props.items=Object(w["d"])(a,i,o),t}return Object(_["a"])(v,[{key:"items",get:function(){var t=this.props,n=t.maxItem,r=t.items,a=t.model,i=t.record,o=t.modalForm,c=t.modalDetail,l=r.map((function(t){return e.isFunction(t)?t(i):t})).map((function(e){return Object(j["o"])(j["c"],{config:e,record:i,model:a,modalForm:o,modalDetail:c})})),u=l,s=[];return!1!==n&&l.length>n&&(u=l.slice(0,n-1),s=l.slice(n-1)),{flatenItems:u,foldItems:s}}},{key:"handleMenuClick",value:function(e){var t=this.items.foldItems,n=t[e],r=this.handleItemClick.bind(this,n);if(n.confirm){var a="string"===typeof n.confirm?n.confirm:"\u786e\u5b9a".concat(n.title,"\uff1f");f["a"].confirm({title:a,onOk:r,maskClosable:!0})}else r()}},{key:"handleItemClick",value:function(e){var t=this.props,n=t.onClick,r=t.record,a=t.model;n(e,{record:r,model:a},this.onClick)}},{key:"renderItem",value:function(e,t,n){var r=this,a=this.props.popPlacement,i=function(){return r.handleItemClick(e)},o=function(r){var a=r.onClick,i=r.danger,o=void 0!==i&&i;return y.a.createElement(n,{danger:o,onClick:a,key:t},e.title)};if(e.confirm){var c="string"===typeof e.confirm?e.confirm:"\u786e\u5b9a".concat(e.title,"\uff1f");return y.a.createElement(d["a"],{key:"pop_".concat(t),title:c,onConfirm:i,placement:a,arrowPointAtCenter:!0},y.a.createElement(o,{danger:!0,key:t}))}return y.a.createElement(o,{onClick:i,key:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,d=void 0===n?x:n,f=t.children,p=void 0===f?null:f,m=this.items,_=m.foldItems,h=m.flatenItems;if(!h.length)return p;var b,v=d===M?[function(e){var t=e.danger,n=Object(u["a"])(e,["danger"]);return y.a.createElement(c["a"],Object(l["a"])({className:t&&C.a["action-danger-btn"]},n))},c["a"].Group]:[function(e){var t=e.children,n=e.onClick,r=e.danger;return y.a.createElement("a",{className:r&&C.a["action-danger"],onClick:n},t)},O["Fragment"]],g=Object(s["a"])(v,2),j=g[0],w=g[1],E=[],k=0;return h.forEach((function(t,n){E.push(e.renderItem(t,n,j)),k+=1,d===x&&(k<h.length||_.length)&&E.push(y.a.createElement(o["a"],{type:"vertical",key:"div".concat(k)}))})),_.length>0&&(b=y.a.createElement(r["a"],{overlay:y.a.createElement(i["a"],{onClick:function(t){var n=t.key;return e.handleMenuClick(n)}},_.map((function(e,t){return y.a.createElement(i["a"].Item,{className:e.confirm&&C.a["action-danger"],key:t},e.title)})))},j({children:["\u66f4\u591a ",y.a.createElement(a["a"],{type:"down"})]}))),y.a.createElement("div",{style:{whiteSpace:"nowrap"}},y.a.createElement(w,null,E,b))}}]),v}(E["b"]);P.defaultProps={items:[],maxItem:3,modalForm:!1,model:void 0},t["a"]=P.component}).call(this,n("LvDl"))},G9e4:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return v}));var r=n("PpiC"),a=n("k1fw"),i=n("fWQN"),o=n("mtLc"),c=n("w4Tj"),l=n("oZsa"),u=n("yKVA"),s=n("879j"),d=n("q1tI"),f=n.n(d),p=n("oV5b"),m=n.n(p),_=n("xJcd"),h=n("Utzx"),b=f.a.createContext(),v=f.a.createContext(),g=function(t){Object(u["a"])(d,t);var n=Object(s["a"])(d);function d(){var e;Object(i["a"])(this,d);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),e.formItemLayout={},e}return Object(o["a"])(d,[{key:"accessibleFields",value:function(){var e=adminConfig[model]||{},t=e.inlineFormFields,n=void 0===t?[]:t;return Object(c["a"])(Object(l["a"])(d.prototype),"accessibleFields",this).call(this,n)}},{key:"onFieldChange",value:function(e,t,n){var r=this;Object(c["a"])(Object(l["a"])(d.prototype),"onFieldChange",this).call(this,e,t,n);var a=this.inlineData.hasError,i=this.props,o=i.form,u=i.onChange,s=o.getFieldsValue();s[e]=t;var f=this.schema.fields.filter((function(e){return-1!==Object.keys(s).indexOf(e.name)&&"bref"!==e.type})),p={};f.forEach((function(e){var t=Object(h["a"])(e),n=e.name;p[n]=t}));var _=new m.a(p);_.validate(s,(function(e){var t=null!==e;r.inlineData.hasError=t,a===t&&t||u&&u(s)}))}},{key:"fieldProps",value:function(e,t){var n=Object(c["a"])(Object(l["a"])(d.prototype),"fieldProps",this).call(this,e,t);return Object(a["a"])(Object(a["a"])({},n),{},{itemProps:Object(a["a"])(Object(a["a"])({},n.itemProps),{},{label:void 0})})}},{key:"componentDidMount",value:function(){var e=this,t=this.state.contentObject,n=this.props.form;-1===Object.keys(t).indexOf("is__new")&&n.validateFields((function(t){e.inlineData.hasError=null!==t}))}},{key:"getWidget",value:function(t,n){var r=this.props.extraOptions,a=void 0===r?{}:r,i=Object(c["a"])(Object(l["a"])(d.prototype),"getWidget",this).call(this,t,n),o=i.Widget,u=i.options;return{Widget:o,options:e.merge(u,a)}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.form,t.dispatch,Object(r["a"])(t,["form","dispatch"])),a=this.props["data-row-key"];return f.a.createElement(b.Provider,{value:this.renderField.bind(this)},f.a.createElement(v.Consumer,null,(function(t){var r=t;return r[a]||(r[a]=e),f.a.createElement("tr",n)})))}}]),d}(_["b"])}).call(this,n("LvDl"))},GPui:function(e,t,n){"use strict";n("nTdE");var r,a,i=n("IZHl"),o=n("0Owb"),c=(n("eE3J"),n("GSZB")),l=n("fWQN"),u=n("mtLc"),s=n("yKVA"),d=n("879j"),f=n("q1tI"),p=n.n(f),m=n("OFLC"),_=n("AAgL"),h=n("jfUH"),b=(r=Object(h["d"])((function(){return{uploader:Object(h["Bb"])()}})),r(a=function(e){Object(s["a"])(n,e);var t=Object(d["a"])(n);function n(){var e;Object(l["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={preview:!1,uploadingList:[]},e.handleChange=function(t){var n=t.file,r=t.fileList,a=e.props.onChange;if(e.setState({uploadingList:r.filter((function(e){return"uploading"===e.status}))}),"done"===n.status){var i=e.props.uploader.getUrl(n);a(i)}},e}return Object(u["a"])(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.preview,r=t.uploadingList,a=this.props,l=a.value,u=a.uploadProvider,s=a.onChange,d=p.a.createElement("div",null,p.a.createElement(c["a"],{type:"plus"}),p.a.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20")),f=r;return l&&(f=f.concat({url:l,thumbUrl:Object(h["v"])(l,{uploadProvider:u}),uid:l})),p.a.createElement("div",null,p.a.createElement(i["a"],Object(o["a"])({listType:"picture-card",action:this.props.uploader.uploadHost,data:this.props.uploader.formData,fileList:f,onChange:this.handleChange,onRemove:function(){return s("")},onPreview:function(){return e.setState({preview:!0})},accept:"image/*",beforeUpload:this.props.uploader.init},this.widgetProps),f.length?null:d),p.a.createElement(m["a"],{onClose:function(){return e.setState({preview:!1})},url:l,visible:n}))}}]),n}(_["a"]))||a);t["a"]=b},GfHQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("oBTY"),a=n("mtLc"),i=n("yKVA"),o=n("879j"),c=n("fWQN"),l=function e(){Object(c["a"])(this,e),this.params={},this.showIf=[],this.icon=null},u=function(e){Object(i["a"])(n,e);var t=Object(o["a"])(n);function n(e,a){var i;Object(c["a"])(this,n),i=t.call(this),i.submenus=[];var o,l=a?"type":"action";("add"===e?(i[l]="add",i.title="\u65b0\u5efa",i.icon="plus"):(i[l]=e.action||e.type,e.params&&(Object.assign(i.params,e.params),a||"add"!==e.params.action||(i[l]="add")),i.title=e.title,i.icon=e.icon,i.showIf=e.showIf,i.confirm=e.confirm),e.submenus)&&(o=i.submenus).push.apply(o,Object(r["a"])(e.submenus.map((function(e){return new n(e)}))));return i._action=i[l],i}return Object(a["a"])(n,[{key:"setModalForm",value:function(e,t,n){if(!n){var r=n?"type":"action";"add"===this[r]&&(!1===e?(this[r]="link",this.params.link="/content/".concat(t,"/add")):this.params.modalForm=e),this.submenus.forEach((function(n){return n.setModalForm(e,t)}))}}}]),n}(l)},HrPU:function(e,t,n){"use strict";n("6UJt");var r=n("DFOY"),a=n("oBTY"),i=n("tJVT"),o=(n("eE3J"),n("GSZB")),c=n("q1tI"),l=n.n(c),u=n("jfUH"),s=(n("Xazh"),o["a"].createFromIconfontCN()),d={string:"icon-string",text:"icon-text",richtext:"icon-richtext",integer:"icon-integer",float:"icon-decimal",decimal:"icon-decimal",bool:"icon-bool",ref:"icon-object",mref:"icon-m2m",bref:"icon-array",time:"icon-time",datetime:"icon-date",date:"icon-date",image:"icon-image",file:"icon-file",video:"icon-video",gallery:"icon-gallery",transfer:"icon-transfer",treeselect:"icon-tree",password:"icon-password",checkbox:"icon-bool",cascader:"icon-cascader",radio:"icon-radio",object:"icon-object",array:"icon-array"},f=function(e){var t=e.model,n=e.value,o=e.onChange,f=e.style,p=e.fieldFilter,m=e.fieldDisable,_=e.placeholder,h=e.allowClear,b=e.refType,v=void 0===b?u["P"]:b,g=e.disabled,O=void 0!==g&&g,y=e.layer,j=e.children,w=Object(u["wb"])(),E=function(e,t){return e?w[e].fields.filter((function(e){return!p||p(e)})).map((function(e){return{name:e.name,displayName:l.a.createElement("span",null,l.a.createElement(s,{type:d[e.type],style:{padding:3}}),e.displayName),label:e.displayName,disabled:m&&m(e),isLeaf:!(v.includes(e.type)&&(!y||t<y))||!w[e.ref]||0===w[e.ref].fields.filter((function(e){return!p||p(e)})).length,layer:t}})):[]},k=E(t,1);n&&function(){for(var e=n.split("."),r=k,a=function(n){var a=e.slice(0,n+1).join("."),i=Object(u["j"])(t,a,w);if(!i||!v.includes(i.type))return"break";var o=E(i.ref,n+2);r.find((function(t){return t.name===e[n]})).children=o,r=o},i=0;i<e.length;i+=1){var o=a(i);if("break"===o)break}}();var C=Object(c["useState"])(k),x=Object(i["a"])(C,2),M=x[0],P=x[1];Object(c["useEffect"])((function(){P(k)}),[t]);var S=function(e){var n=Object(u["j"])(t,e.map((function(e){return e.name})).join("."),w);e[e.length-1].children=E(n.ref,e[e.length-1].layer+1),P(Object(a["a"])(M))};return l.a.createElement(r["a"],{style:f,value:n&&n.split("."),onChange:function(e,t){var n=t[t.length-1];(!n||n.isLeaf||n.children)&&o(e.join("."),t)},expandTrigger:"hover",changeOnSelect:!0,displayRender:function(e,t){return t.map((function(e){return e.label})).join(".")},options:M,loadData:S,fieldNames:{label:"displayName",value:"name"},placeholder:_,allowClear:h,disabled:O,showSearch:{filter:function(e,t){return t.some((function(t){return t.label.toLowerCase().includes(e.toLowerCase())}))},sort:function(e,t,n){var r=function(e){return e.findIndex((function(e){return e.label.includes(n)}))};return r(e)-r(t)},render:function(e,t){return t.map((function(t,n){var r=Object(u["y"])(t.label,e);return 0===n?r:[" > ",r]}))},matchInputWidth:!1}},j&&l.a.createElement("div",null,j))};t["a"]=f},JN3n:function(e,t,n){"use strict";var r,a,i=n("jrin"),o=n("k1fw"),c=n("PpiC"),l=n("oBTY"),u=n("fWQN"),s=n("mtLc"),d=n("yKVA"),f=n("879j"),p=n("q1tI"),m=n.n(p),_=n("/MKj"),h=n("mmaM"),b=n("NnbD"),v=n("sMR+"),g=n("jfUH"),O=(r=Object(_["c"])((function(e){var t=e.content,n=t.schemas,r=t.adminConfig,a=e.user.currentUser;return{schemas:n,adminConfig:r,currentUser:a}})),r(a=function(e){Object(d["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={data:null,page:1,size:30,filters:[],orderBy:void 0,expandFields:[]},e.availableActions=function(){var t=e.props.tableConf.inlineActions;return t.filter((function(t){return!(t in b["a"])||e.permissions.includes(b["a"][t])}))},e}return Object(s["a"])(n,[{key:"componentDidUpdate",value:function(e){var t=e.refValue,n=e.refModel,r=e.refField,a=this.props,i=a.refValue,o=a.refModel,c=a.refField;t===i&&n===o&&r===c||this.setState({page:1,size:30,data:null},this.fetchData)}},{key:"permissions",get:function(){var e=this.props,t=e.currentUser.permissions,n=e.refModel;return t?t.filter((function(e){return e.endsWith(n)})).map((function(e){return e.split("_")[0]})):[]}},{key:"fetchData",value:function(){var e=this,t=this.props,n=t.refModel,r=t.refField,a=t.refValue,i=this.state,o=i.page,c=i.size,u=i.filters,s=i.orderBy,d=i.expandFields;Object(h["queryContent"])({model:n,page:o,size:c,orderBy:s,expandFields:d,filters:[{field:r,operator:"=",value:a}].concat(Object(l["a"])(u))}).then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.refModel,r=t.refField,a=t.refValue,u=t.refObject,s=t.tableConf,d=void 0===s?{}:s,f=d.display,p=d.exportable,_=d.filter,b=d.tableActions,O=d.modalDetail,y=d.maxInlineActions,j=d.actions,w=this.state.data,E=Object(v["a"])(n);return m.a.createElement(E,{fetchOnMounted:!0,showFilter:!0,actions:j,filter:_,display:f,exportable:p,data:w||[],model:n,tableActions:b.filter((function(t){var n=t.type;return"add"!==n||e.permissions.includes("add")})),showStat:!1,fetch:function(t){var r=t.page,a=t.size,i=t.filters,o=t.orderBy,c=t.expandFields,l=void 0===c?[]:c,u=Object(h["getExpandFields"])(n,"display",d);e.setState({page:r,size:a,filters:i,orderBy:o,expandFields:l.concat(u)},e.fetchData)},onExport:function(e){var t=e.filters,i=Object(c["a"])(e,["filters"]);return Object(h["downloadContent"])(Object(o["a"])({model:n,detailId:a,detailModel:Object(g["t"])(n,r).ref,filters:[].concat(Object(l["a"])(t),[{field:r,operator:"=",value:a}])},i))},modalForm:!0,modalDetail:O,inlineActions:this.availableActions(),maxInlineActions:y,loading:!w,formProps:{hiddenFields:Object(i["a"])({},r,a),hiddenvalues:Object(i["a"])({},r,a)},linkContext:{pId:a},superior:{id:a,field:r,value:u,model:Object(g["t"])(n,r).ref}})}}]),n}(p["Component"]))||a);t["a"]=O},"K/pY":function(e,t,n){"use strict";(function(e){n("lNFX");var r=n("VE2L"),a=n("tJVT"),i=n("q1tI"),o=n.n(i),c=n("/MKj"),l=n("Wwog"),u=Object(l["a"])((function(e,t,n){var r=[];return Object.keys(e).forEach((function(i){var o=i.split("__"),c=Object(a["a"])(o,2),l=c[0],u=c[1];if((void 0===t||t.includes(l))&&(void 0===n||n(i))){var s=r.find((function(e){return e.value===l}));s?s.children.push({value:u,label:"".concat(u,"(").concat(e[i].displayName,")")}):r.push({value:l,label:l,children:[{value:u,label:"".concat(u,"(").concat(e[i].displayName,")")}]})}})),r}));function s(t){var n=Object(i["useState"])([]),c=Object(a["a"])(n,2),l=c[0],s=c[1],d=t.schemas,f=t.models,p=t.filter,m=t.onChange,_=t.value,h=void 0===_?"":_,b=function(){if(!e.isEmpty(d)){var t=u(d,f,p);s(t)}};return Object(i["useEffect"])((function(){b()}),[d,f]),o.a.createElement(r["a"],{options:l,placeholder:"\u8bf7\u9009\u62e9",displayRender:function(e){return e.join(".")},onChange:function(e){return m(e.join("__"))},value:h?h.split("__"):[],allowClear:!0})}t["a"]=Object(c["c"])((function(e){var t=e.content.schemas;return{schemas:t}}))(s)}).call(this,n("LvDl"))},L5Lq:function(e,t,n){e.exports=n.p+"static/logo-enterprise.44e6a2eb.png"},LVWL:function(e,t,n){"use strict";var r=n("Utjr");t["a"]=Object(r["d"])((function(){return Promise.all([n.e(40),n.e(41)]).then(n.bind(null,"7IKC"))}))},LyJH:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));n("c94q");var r=n("Y/eX"),a=n("q1tI"),i=n.n(a),o=n("xJcd"),c=n("VW+w"),l=n("jfUH"),u=function(e){var t=e.field.ref,n=Object(l["U"])(t),r=n.formFields,a=void 0===r?[]:r,i=Object(l["tb"])(t),o=i.fields,u=e.fields,s=void 0===u?a:u;return Object(c["formFieldsPreprocess"])(s,o)};t["a"]=function(e){var t=e.field,n=e.value,a=e.onChange,c=u(e),l={};return c.forEach((function(e){l[e.name]=null===n||void 0===n?void 0:n[e.name]})),i.a.createElement(r["a"],{defaultActiveKey:n?[t.name]:[],key:n?0:1},i.a.createElement(r["a"].Panel,{key:t.name,header:t.displayName||t.name},i.a.createElement(o["a"],{model:t.ref,object:l,onChange:a,fields:c})))}},NnbD:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return G}));n("+BJd");var r=n("mr32"),a=(n("e+1C"),n("Nd5c")),i=(n("ER8q"),n("Ai5L")),o=(n("yavW"),n("WuMn")),c=n("0Owb"),l=(n("GPKB"),n("mFAc")),u=(n("52nx"),n("7bDm")),s=n("k1fw"),d=n("oBTY"),f=(n("Dvpn"),n("myml")),p=n("9og8"),m=n("fWQN"),_=n("mtLc"),h=n("tS8v"),b=n("yKVA"),v=n("879j"),g=n("PpiC"),O=(n("eNCU"),n("pjJH")),y=n("jrin"),j=(n("eE3J"),n("GSZB")),w=n("tJVT"),E=n("WmNS"),k=n.n(E),C=n("q1tI"),x=n.n(C),M=n("BAaj"),P=n("OFLC"),S=n("9Ndd"),A=n("dTNC"),D=n("jfUH"),F=n("VW+w"),T=n("mmaM"),L=n("vbsh"),I=n("rQ+i"),U=n("y/44"),R=n("EBSl"),V=n("flKx"),W=n("BE/h"),B=n("3i6F"),q=n("G3ML"),N=n("CzB9"),K=n("rAFZ"),H=n("91mv"),z=n("EnK/"),J=n.n(z),Y=n("mJsi"),G={edit:"change",delete:"delete",detail:"view"},Q=function(e){var t=e.Widgets,n=e.renderField,r=e.instances,a=e.realField,i=e.model,o=e.dispatch,c=e.schema,l=e.displayField,u=Object(C["useState"])(!1),s=Object(w["a"])(u,2),d=s[0],f=s[1],p=Object(C["useState"])(""),m=Object(w["a"])(p,2),_=m[0],h=m[1];return l&&l.inplaceEdit&&!0===l.inplaceEdit?x.a.createElement("span",{className:J.a.renderField},d?x.a.createElement(t,{field:a,instance:r,value:_,onChange:function(e){h(e)}}):n(),x.a.createElement("span",{className:J.a.renderIcon},d?null:x.a.createElement(j["a"],{type:"edit",onClick:function(){f(!d),h(r[a.name])}}),d?x.a.createElement("div",{style:{display:"flex"}},x.a.createElement(O["a"],{size:"small",type:"primary",onClick:function(){var e=Object(y["a"])({},a.name,_),t=c[i],n=Object(D["M"])(r,i);o({type:"content/patch",payload:{model:i,id:n,newValues:e,schema:t}}).then((function(){f(!d)}))}},"\u4fee\u6539"),x.a.createElement(O["a"],{size:"small",type:"default",style:{marginLeft:10},onClick:function(){f(!d)}},"\u53d6\u6d88")):null)):n()},Z=function(e){var t=e.children;return x.a.createElement("td",{style:{paddingTop:0,paddingBottom:0,overflow:"hidden"}},t)},X=Object(C["createContext"])(null),$=function(e){var t=e.children,n=Object(g["a"])(e,["children"]),r=Object(C["useContext"])(X);return x.a.createElement("tbody",n,r,t)},ee=function(t){Object(b["a"])(r,t);var n=Object(v["a"])(r);function r(){var e;Object(m["a"])(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),e.state={selectedRows:[],showModal:!1,showDrawer:!1,currentObject:{},currentActionObject:{},selectedAction:void 0,currentActionParams:{},previewImageUrl:void 0,previewImageVisible:!1,plainFormVisible:!1,plainFormFields:[],plainFormSubmit:void 0,plainFormCancel:void 0},e.setPreviewImageVisible=function(t){e.setState({previewImageVisible:t})},e.fetch=function(){var t=e.props.refresh;t()},e.handleStandardTableChange=function(t,n,r){var a=t.current,i=t.pageSize,o=e.getOrderBy(r),c=e.props,l=c.onPaginationChange,u=c.onOrderChange;l(a,i),u(o)},e.getOrderBy=function(e){var t=e.order,n=e.field;switch(t){case"ascend":return[n];case"descend":return["-".concat(n)];default:return[]}},e.handleSelectRows=function(t){e.setState({selectedRows:t})},e.handleOk=function(){e.setState({showModal:!1})},e.hideModal=function(){e.setState({showModal:!1})},e.hideDrawer=function(){e.setState({showDrawer:!1})},e.changePreviewImageUrl=function(t){e.setState({previewImageUrl:t})},e.moveRow=function(t,n){var r=e.props.model;Object(T["sortUpdate"])(r,t[e.pk],n[e.pk]).then((function(){Object(L["d"])(r,L["b"].afterUpdate),e.fetch()}))},e.inplaceEdit=function(e,t,n,r,a,i,o){var c=S["b"][S["e"][n.type]]||S["b"][S["e"][n.widget]];return x.a.createElement(Q,{Widgets:c,renderField:t,instances:e,realField:n,model:r,dispatch:a,schema:i,displayField:o})},e.checkFieldPermission=function(t){var n=e.props.model,r=Object(D["p"])(n);return t.filter((function(e){var t,n;return null===(t=null===(n=r[e.name||e])||void 0===n?void 0:n.read)||void 0===t||t}))},e.handleInlineAction=function(){var t=Object(p["a"])(k.a.mark((function t(n,r,a){var i;return k.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a(n,r,{refresh:function(){return e.fetch()},showModal:e.showModal.bind(Object(h["a"])(e)),showDrawer:e.showDrawer.bind(Object(h["a"])(e)),link:e.link.bind(Object(h["a"])(e)),collectInputs:e.collectInputs.bind(Object(h["a"])(e)),hideCollectInput:e.hideCollectInput.bind(Object(h["a"])(e))});case 2:return i=t.sent,"delete"!==n.type&&"delete"!==n.action||e.fetch(),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e}return Object(_["a"])(r,[{key:"componentDidMount",value:function(){var e=this.props.onDidMount;e&&e(this)}},{key:"getExpandRender",value:function(e,t,n){var r=this,a=Object(D["j"])(t,e.name,n),i=a.ref;return function(t){var a=t[e.name],o=r.buildColumns(i,e.display,n,!1,{getDisplayWidgetName:function(e){return Object(B["g"])(n)(e,i)}});return x.a.createElement(f["a"],{columns:o,dataSource:a,pagination:!1,bordered:!1,rowKey:Object(D["N"])(i),scroll:{x:"max-content"}})}}},{key:"isDisplayInTree",get:function(){var e=this.props.displayInTree;return!0===e}},{key:"displayInSort",get:function(){var e=this.props.displayInSort;return!0===e}},{key:"pk",get:function(){var e=this.props.model;return Object(D["N"])(e)}},{key:"permissions",get:function(){var e=this.props,t=e.currentUser.permissions,n=void 0===t?[]:t,r=e.model;return n.filter((function(e){return e.endsWith(r)})).map((function(e){return e.split("_")[0]}))}},{key:"getInlineActions",value:function(){var e=this.props.validInlineActions;return e}},{key:"getActions",value:function(){var e=this,t=this.props,n=t.model,r=t.actions,a=t.currentUser,i=r.filter((function(t){var n=t.action;return"delete"!==n||e.permissions.includes("delete")})),o={actions:i,currentUser:a,model:n};return Object(I["a"])(o)}},{key:"getTableActions",value:function(){var t=this,n=this.props,r=n.tableActions,a=n.superior;a=void 0===a?{}:a;var i=a.value,o=a.model,c=n.content.schemas;return r.filter((function(e){var n=e.action,r=e._action;return!["add","excelImport"].includes(n)&&!["add","excelImport"].includes(r)||t.permissions.includes("add")})).filter((function(t){if(e.isEmpty(t.showIf)||e.isEmpty(i))return!0;var n=Object(D["H"])(t.showIf,i,c,o);return n}))}},{key:"link",value:function(e,t,n){var r=this.props.linkContext;return Object(D["Q"])(n.link,(function(t){var n;return null!==(n=r[t])&&void 0!==n?n:null===e||void 0===e?void 0:e[t]}))}},{key:"showModal",value:function(e,t,n){this.setState({currentObject:e,currentActionObject:t,currentActionParams:n,showModal:!0})}},{key:"collectInputs",value:function(e,t,n){this.setState({plainFormVisible:!0,plainFormFields:e,plainFormSubmit:t,plainFormCancel:n})}},{key:"hideCollectInput",value:function(){this.setState({plainFormVisible:!1,plainFormFields:[],plainFormSubmit:void 0,plainFormCancel:void 0})}},{key:"showDrawer",value:function(e,t,n){this.setState({currentObject:e,currentActionObject:t,currentActionParams:n,showDrawer:!0})}},{key:"buildRowColumns",value:function(t,n,r,a,i,o,c,l){var u=this,f=r.groupField,p=r.groupTitle,m=r.field,_=r.title,h=r.value,b=r.columns,v=p;if(!b||"onDeman"===b){if(l&&l.length>0){var g,O=l.map((function(e){return e[t].map((function(e){var t=Object(D["x"])(m,e),n=Object(D["x"])(_,e),r=Object(D["x"])(h,e),a=v;return!v&&f&&(a=Object(D["x"])(f,e)),{group:a,field:t,title:n,value:r}}))})),j={};O=O.reduce((function(e,t){return j[t.name]||(j[t.name]=!0,e.push(t)),e}),[]);var w={};O[0].forEach((function(e){w[e.group]||(w[e.group]=[]),w[e.group]=w[e.group].concat(e)}));var E=a[n],k="".concat(n,"__asColumn"),C=[].concat(Object(d["a"])(E.fields),[{name:"".concat(t,"__asColumn"),type:"ref",ref:k}]),x=Object(s["a"])(Object(s["a"])({},E),{},{fields:C}),M=Object(s["a"])(Object(s["a"])({},a),{},(g={},Object(y["a"])(g,n,x),Object(y["a"])(g,k,{name:k,fields:O[0].map((function(e){return{name:e.field,type:"string"}}))}),g)),P=Object(B["g"])(M);return e.keys(w).flatMap((function(e){var r=w[e];return void 0!==e&&"undefined"!==e?[{title:e,children:r.flatMap((function(e){return u.buildSingleColumn({dataIndex:"".concat(t,"__asColumn.").concat(e.field),alias:e.title,name:"".concat(t,"__asColumn.").concat(e.field)},n,M,i,P,c,l)}))}]:r.flatMap((function(e){return u.buildSingleColumn({dataIndex:"".concat(t,"__asColumn.").concat(e.field),alias:e.title,name:"".concat(t,"__asColumn.").concat(e.field)},n,M,i,P,c,l)}))}))}return[]}return[]}},{key:"buildSingleColumn",value:function(e,t,n,r,a,i,o){var c=e.widget,l=e.fields,u=e.alias,d=e.fixed,f=e.width,p=e.name,m=void 0===p?null===l||void 0===l?void 0:l.value:p,_=e.params,h=void 0===_?{}:_,b=e.dataIndex,v=e.type,g=m?Object(D["j"])(t,m,n):null,O=c;if("asColumn"===v)return this.buildRowColumns(m,t,h,n,r,a,i,o);var y={fixed:d,width:f,dataIndex:b||m,sortDirections:["descend","ascend"],title:x.a.createElement("div",{style:{whiteSpace:"nowrap"}},u||(null===g||void 0===g?void 0:g.displayName)),sorter:r.includes(m)};!O&&g&&(O=a(e,t));var j=Object(s["a"])(Object(s["a"])({},h),{},{displayField:e,field:g,model:null!==m&&void 0!==m&&m.includes(".")?Object(D["j"])(t,m.split(".").slice(0,-1).join("."),n).ref:t,Schemas:n,changePreviewImageUrl:this.changePreviewImageUrl,setPreviewImageVisible:this.setPreviewImageVisible,component:this});return y.render=function(r,a,o){var c={fields:l||{value:m},model:t,widgetName:O,record:a,widgetProps:j,providedSchemas:n};return i(c,e,o)},[y]}},{key:"buildColumns",value:function(e,t,n,r,a,i){var o=this,c=a.sortable,l=a.getDisplayWidgetName,u=this.props.renderColumn,s=void 0===u?function(e){return x.a.createElement(B["a"],e)}:u,d=[];this.checkFieldPermission(Object(F["displayPreprocess"])(t,e,n)).forEach((function(t){d=d.concat(o.buildSingleColumn(t,e,n,c,l,s,i))}));var f=this.getInlineActions();if(f&&f.length>0){var p=this.props,m=p.modalForm,_=p.modalDetail,h=p.maxInlineActions;d.push({title:x.a.createElement("div",{style:{whiteSpace:"nowrap"}},"\u64cd\u4f5c"),fixed:"right",width:1,render:function(t,n){return x.a.createElement(q["a"],{record:n,modalForm:m,modalDetail:_,maxItem:h,model:e,onClick:o.handleInlineAction,items:f},"\u6682\u65e0")}})}return d}},{key:"batchAction",value:function(){var e=this,t=this.props.model,n=this.state,r=n.selectedRows,a=n.selectedAction;Object(R["l"])(a,{record:r,model:t},{refresh:function(){e.setState({selectedRows:[]}),e.fetch()},showModal:this.showModal.bind(this),collectInputs:this.collectInputs.bind(this),hideCollectInput:this.hideCollectInput.bind(this)})}},{key:"renderContent",value:function(){var t=this,n=this.props,r=n.data,a=void 0===r?{list:[]}:r,i=n.loading,o=n.listStyle,d=n.model,f=n.dispatch,p=n.editable,m=n.sortable,_=n.display,h=n.showStat,b=n.content,v=b.schemas,g=b.stat,O=b.adminConfig,j=n.sortKey,w=n.tableProps,E=n.shouldSelect,k=n.currentUser,P=n.getDisplayWidgetName,S=n.onPaginationChange;if(!Object.keys(v).length)return x.a.createElement(C["Fragment"],null);var A=this.state.selectedRows,F=v[d]?v[d]:{},T=F.titleField,L=this.getActions(),U={fields:_,currentUser:k,model:d},V=Object(I["b"])(U);switch(o){case"gallery":return x.a.createElement(H["a"],{loading:i,data:a,field:{id:Object(D["N"])(d),title:T,url:"url"},onImageClick:function(e){return t.setState({previewImageUrl:e.url,previewImageVisible:!0})},onPaginationChange:S,actions:[{label:"\u7f16\u8f91",icon:"edit",name:"edit",onClick:function(e){return t.showModal(e,Object(R["m"])(R["c"],"edit"))}},{label:"\u5220\u9664",icon:"delete",name:"delete",onClick:function(e){u["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\uff1f",onOk:function(){var t=this;f({type:"content/delete",payload:{id:Object(D["M"])(e,d),model:d}}).then((function(){t.fetch(),l["a"].success("\u5220\u9664\u6210\u529f")}))}})}}]});default:var W={},B=V.find((function(t){return e.isObject(t)&&"embed"===t.type})),q=V.find((function(t){return e.isObject(t)&&"asColumn"===t.type}));B&&(W={expandedRowKeys:a.list.map((function(e){return Object(D["M"])(e,d)})),expandedRowRender:this.getExpandRender(B,d,v),expandIconAsCell:!1,expandIconColumnIndex:-1});var N=this.buildColumns(d,V,v,p,{sortable:m,getDisplayWidgetName:P},null===a||void 0===a?void 0:a.list);if(this.isDisplayInTree){var K=e.keyBy(a.list,Object(D["N"])(d)),z=e.sortBy(e.values(K),[j,Object(D["N"])(d)]);z.forEach((function(e){if(e.parent){var t=K[e.parent];t.children||(t.children=[]),t.children.push(e)}})),a.list=z.filter((function(e){return!e.parent}))}if(q){var J=q.name,G=q.params,Q=G.field,ee=G.value;a.list=a.list.map((function(e){var t={};return e[J].forEach((function(e){t[Object(D["x"])(Q,e)]=Object(D["x"])(ee,e)})),Object(s["a"])(Object(s["a"])({},e),{},Object(y["a"])({},"".concat(J,"__asColumn"),t))}))}var te=function(n){var r=L.length>0||E;return x.a.createElement(X.Provider,{value:x.a.createElement("tr",null,r&&x.a.createElement(Z,null),N.map((function(e){return x.a.createElement(Z,null,x.a.createElement("div",{style:{height:0}},e.title))})))},x.a.createElement(M["a"],Object(c["a"])({sticky:!0,tableLayout:"auto",selectedRows:A,loading:i,data:a,columns:N,onSelectRow:t.handleSelectRows,onChange:t.handleStandardTableChange,rowKey:Object(D["N"])(d),shouldSelect:r,expandOptions:Object(s["a"])(Object(s["a"])({},W),{},{scroll:{x:"max-content"},footer:h?g[d]&&function(){return e.map(O[d].statistics,(function(e,t){var n=e.verbose_name;return"".concat(n,"\uff1a").concat(g[d][t])})).join("\uff0c ")}:e.noop})},n,{components:e.merge(null===n||void 0===n?void 0:n.components,{body:{wrapper:$}})},w)))};return this.displayInSort?x.a.createElement(Y["a"],{table:te,onRow:function(e){return{moveRow:t.moveRow,sortKey:j,data:a,item:Object(s["a"])({},e)}}}):te()}}},{key:"render",value:function(){var t=this,n=this.state,r=n.selectedRows,c=n.showModal,l=n.selectedAction,s=this.state,d=s.currentActionObject,f=s.currentActionParams,p=s.currentObject,m=s.showDrawer,_=this.state,h=_.previewImageUrl,b=_.previewImageVisible,v=this.state,g=v.plainFormVisible,y=v.plainFormFields,j=v.plainFormCancel,w=v.plainFormSubmit,E=this.props,k=E.model,M=E.formProps,S=E.superior,D=this.getTableActions(),F=o["a"].Option,T=x.a.createElement(A["a"],{model:k,tableActions:D,context:{showModal:this.showModal.bind(this),showDrawer:this.showDrawer.bind(this),collectInputs:this.collectInputs.bind(this),hideCollectInput:this.hideCollectInput.bind(this),refresh:function(){t.fetch()},link:this.link.bind(this),exportData:this.props.onExport,superior:S,formProps:"function"===typeof M?M(this):M}}),L=this.getActions(),I=L.length>0?x.a.createElement(C["Fragment"],null,x.a.createElement(o["a"],{placeholder:"\u8bf7\u9009\u62e9\u6279\u91cf\u64cd\u4f5c",style:{width:200},onChange:function(e){t.setState({selectedAction:e&&Object(R["o"])(R["b"],{config:L.find((function(t){return t.action===e}))})})},allowClear:!0},L.map((function(t,n){return e.isArray(t)?x.a.createElement(F,{key:t[0],value:t[0]},t[1]):x.a.createElement(F,{key:"".concat(t.action+n),value:t.action},t.name)}))),x.a.createElement(O["a"],{style:{marginLeft:10},type:"primary",disabled:void 0===l||0===r.length,onClick:function(){return t.batchAction()}},"\u6279\u91cf\u6267\u884c")):"";return[((null===D||void 0===D?void 0:D.length)||L.length)&&x.a.createElement(a["a"],{style:{marginBottom:10,marginTop:10}},x.a.createElement(i["a"],{span:24},T,I))||null,this.renderContent(),x.a.createElement(W["a"],{visible:c,handleOk:this.hideModal,handleCancel:this.hideModal,currentActionObject:d,currentObject:p,currentActionParams:f,model:k,context:{refresh:function(){t.fetch(),t.hideModal()},hideModal:this.hideModal,close:this.hideModal,formProps:"function"===typeof M?M(this):M,superior:S}}),x.a.createElement(P["a"],{url:h,visible:b,onClose:function(){return t.setState({previewImageVisible:!1})}}),x.a.createElement(V["a"],{currentActionObject:d,currentObject:p,currentActionParams:f,visible:m,model:k,context:{hideDrawer:this.hideDrawer,refresh:function(){t.fetch(),t.hideDrawer()},close:this.hideDrawer,formProps:"function"===typeof M?M(this):M}}),x.a.createElement(u["a"],{title:"\u8bf7\u8f93\u5165\u53c2\u6570",width:"60%",footer:null,visible:g,onCancel:function(){return t.setState({plainFormVisible:!1})}},x.a.createElement(U["a"],{fields:y,onSubmit:w,onCancel:j}))]}}]),r}(x.a.PureComponent);ee.defaultProps={display:[],inlineActions:[],loading:!1,actions:[],showFilter:!0,sortable:[],showStat:!0,showDrawer:!1,handleStandardTableChange:null,onCreate:function(){},onUpdate:function(){},formProps:{},tableActions:[],linkContext:{}},t["b"]=function(e){var t,n=e.model,a=e.display,i=e.filter,o=e.showFilter,l=void 0===o||o,u=e.exportable,d=e.fetch,f=void 0===d?function(){}:d,p=e.onExport,m=e.fetchOnMounted,_=void 0!==m&&m,h=e.searchFields,b=void 0===h?[]:h,v=e.renderSearchBar,O=void 0===v?function(e){return e}:v,y=e.renderTable,j=void 0===y?function(e){return e}:y,E=e.tableProps,k=void 0===E?{}:E,M=Object(g["a"])(e,["model","display","filter","showFilter","exportable","fetch","onExport","fetchOnMounted","searchFields","renderSearchBar","renderTable","tableProps"]),P=Object(C["useState"])(!1),S=Object(w["a"])(P,2),A=S[0],F=S[1],L=Object(C["useState"])([]),I=Object(w["a"])(L,2),U=I[0],R=I[1],V=Object(C["useState"])(1),W=Object(w["a"])(V,2),B=W[0],q=W[1],H=Object(C["useState"])(50),z=Object(w["a"])(H,2),J=z[0],Y=z[1],G=Object(C["useState"])([]),Q=Object(w["a"])(G,2),Z=Q[0],X=Q[1],$=Object(C["useState"])(),te=Object(w["a"])($,2),ne=te[0],re=te[1],ae=M.content.adminConfig,ie=M.filterLayout,oe=Object(C["useCallback"])((function(){var e,t={model:n,filters:U,page:B,size:J,orderBy:Z};ne&&(t.filters=t.filters.concat({operator:"or",children:b.map((function(e){return{field:e,operator:"icontains",value:ne}}))})),null!==(e=ae[n])&&void 0!==e&&e._enableDisplayOnTableList&&(t.displayFields=Object(T["getDisplayFields"])(n,a)),f(t)}),[B,U,Z,ne]);Object(C["useEffect"])((function(){(A||_)&&oe()}),[oe]),Object(C["useEffect"])((function(){F(!0)}),[]);var ce=Object(C["useRef"])(null);Object(C["useEffect"])((function(){if(A&&ce.current){var e=ce.current.parentElement||ce.current;e.scrollIntoView()}}),[B]);var le=Object(D["mb"])();return x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{ref:ce}),!!b.length&&O(x.a.createElement(N["a"],{model:n,searchFields:b,onSearch:function(e){re(e),q(1)}})),ne&&x.a.createElement(r["a"],{style:{marginTop:16},closable:!0,onClose:function(){return re(void 0)}},"\u201c",ne,"\u201d\u7684\u641c\u7d22\u7ed3\u679c"),x.a.createElement("div",{style:{height:24}}),l&&x.a.createElement(K["b"],{model:n,layout:ie||(null===(t=ae[n])||void 0===t?void 0:t.filterLayout),onSubmit:function(e){R(e),q(1)},filter:i,exportable:u,onExport:function(e,t){R(e),p({filters:U,exportKey:t})}}),j(x.a.createElement(ee,Object(c["a"])({model:n,display:a,onPaginationChange:function(e,t){q(e),Y(t)},onOrderChange:X,refresh:oe,onExport:function(e){var t=e.exportKey;return p({exportKey:t,filters:U})},tableProps:Object(s["a"])({size:le&&"middle"},k)},M))))}}).call(this,n("LvDl"))},OFLC:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("52nx");var r=n("7bDm"),a=n("q1tI"),i=n.n(a),o=n("nKGo");function c(e){var t=e.url,n=e.onClose,a=e.visible;return i.a.createElement(r["a"],{width:"fit-content",footer:null,visible:a,onCancel:n},i.a.createElement("img",{className:o["gmImg"],onClick:n,alt:t,key:t,style:{maxWidth:"100%",cursor:"zoom-out"},src:t}))}},RLxJ:function(e,t,n){"use strict";var r=n("9kvl");n.d(t,"a",(function(){return r["b"]}))},Rzkh:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("UvA9");var r=n("u4G2"),a=n("0Owb"),i=n("fWQN"),o=n("mtLc"),c=n("yKVA"),l=n("879j"),u=n("q1tI"),s=n.n(u),d=n("AAgL"),f=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange;return s.a.createElement(r["a"],Object(a["a"])({checked:t,onChange:n},this.widgetProps))}}]),n}(d["a"])},UCuA:function(e,t,n){"use strict";n("A1Tt");var r,a,i=n("QYOG"),o=n("0Owb"),c=n("tJVT"),l=n("fWQN"),u=n("mtLc"),s=n("yKVA"),d=n("879j"),f=n("q1tI"),p=n.n(f),m=n("/MKj"),_=n("AAgL"),h=n("jfUH"),b=(r=Object(m["c"])((function(e){var t=e.content;return{schemas:t.schemas}})),r(a=function(e){Object(s["a"])(n,e);var t=Object(d["a"])(n);function n(){var e;Object(l["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={remoteChoices:[]},e.myProps=["titlefield"],e.doSearch=function(){var t=e.props.dispatch,n=e.refSchema;t({type:"content/choices",payload:{model:n.name,titleField:e.titleField}}).then((function(t){e.setState({remoteChoices:t})}))},e}return Object(u["a"])(n,[{key:"componentDidMount",value:function(){this.doSearch()}},{key:"titleField",get:function(){return this.props.titlefield||this.refSchema.titleField}},{key:"refSchema",get:function(){var e=this.props.schemas;return e[this.refModel]}},{key:"refModel",get:function(){var e=this.props.field;return e.ref}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,a=this.state.remoteChoices;return p.a.createElement(i["a"],Object(o["a"])({dataSource:a.map((function(t){var n=Object(c["a"])(t,2),r=n[0],a=n[1];return{key:r,title:a[e.titleField]}})),showSearch:!0,render:function(e){return e.title},targetKeys:n&&n.map((function(t){return Object(h["M"])(t,e.refModel)})),titles:["\u672a\u542f\u7528","\u5df2\u542f\u7528"],onChange:function(e){return r(e.map((function(e){return a.find((function(t){return t[0]===e}))[1]})))}},this.widgetProps))}}]),n}(_["a"]))||a);t["a"]=b},Utjr:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return y}));var r=n("k1fw"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=(n("EQ8j"),n("1JPr")),u=n("tJVT"),s=n("q1tI"),d=n.n(s),f=n("506c"),p=n("95SA"),m=[[404,"\u54ce\u5440\uff0c\u7cdf\u7cd5\uff0c\u600e\u4e48\u4f1a\u8fd9\u6837\uff1f\ud83d\ude30"],[500,"\u5929\u5450\uff0c\u6211\u5230\u5e95\u505a\u9519\u4e86\u4e9b\u4ec0\u4e48\uff1f"]],_=function(t){var n=t.title,r=void 0===n?"\u51fa\u9519\u5566\uff01":n,a=t.subTitle,i=Object(s["useState"])(e.sample(m)),o=Object(u["a"])(i,1),c=Object(u["a"])(o[0],2),f=c[0],p=c[1];return d.a.createElement(l["a"],{status:f,subTitle:a||p,title:r})},h=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;Object(a["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),e.state={hasError:!1},e}return Object(i["a"])(n,[{key:"render",value:function(){var e=this.state.hasError,t=this.props,n=t.children,r=t.fallback;return e?r:n}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(d.a.Component),b=function(t){var n=t.keyMaps,r=void 0===n?{}:n,a=t.children,i=d.a.useRef(null);return e.forEach(r,(function(e,t){Object(f["a"])(i,t.split("+"),e)})),d.a.createElement("div",{ref:i},a)},v=d.a.createElement(l["a"],{status:"warning",title:"\u7f51\u7edc\u52a0\u8f7d\u5931\u8d25"}),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.loading,r=t.fallback,a=void 0===r?v:r,i=d.a.lazy(e);return function(e){var t=d.a.createElement(i,e);return d.a.createElement(h,{fallback:a},d.a.createElement(s["Suspense"],{fallback:d.a.createElement(p["a"],{tip:n})},d.a.createElement(h,{fallback:d.a.createElement(_,null)},t)))}},O=function(){function t(n){Object(a["a"])(this,t),this.props=void 0,this.props=Object(r["a"])(Object(r["a"])({},this.constructor.defaultProps),e.omitBy(n,(function(e){return void 0===e})))}return Object(i["a"])(t,null,[{key:"component",get:function(){var e=this;return function(t){return new e(t).render()}}}]),t}(),y=d.a.createContext({})}).call(this,n("LvDl"))},Utzx:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return U}));var r=n("k1fw"),a=n("rAM+"),i=n("oBTY"),o=n("eWa3"),c=n.n(o),l=n("hHZz"),u=n.n(l),s=n("bZbt"),d=n.n(s),f=n("DO/+"),p=n.n(f),m=n("bM/q"),_=n.n(m),h={email:function(e){return e&&c()(e)},ip:function(e){return e&&u()(e)},mobile:function(e){return e&&d()(e,"zh-CN")},regex:function(e,t){var n=t.regex;return e&&p()(e,new RegExp(n.replace("\\Z","$")))},slug:function(e){return e&&p()(e,new RegExp("^[-a-zA-Z0-9_]+$"))},unicode_slug:function(e){return e&&p()(e,new RegExp("^[-\\w]+$"))},url:function(e){return e&&_()(e)},max_value:function(e,t){var n=t.value;return e&&e<=n},min_value:function(e,t){var n=t.value;return e&&e>=n}},b={email:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f",ip:"\u8bf7\u586b\u5199\u6b63\u786e\u7684IP\u5730\u5740\u683c\u5f0f",mobile:"\u8bf7\u586b\u5199\u6b63\u586b\u7684\u624b\u673a\u53f7\u7801\u683c\u5f0f",regex:function(e){var t=e.regex;return"\u4e0d\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f".concat(t)},slug:"\u5185\u5bb9\u53ea\u5141\u8bb8\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u8fde\u63a5\u7ebf\u53ca\u4e0b\u5212\u7ebf",unicode_slug:"\u5185\u5bb9\u53ea\u5141\u8bb8Unicode\u5b57\u7b26\u3001\u6570\u5b57\u3001\u8fde\u63a5\u7ebf\u53ca\u4e0b\u5212\u7ebf",url:"\u8bf7\u586b\u5199\u6b63\u786e\u7684URL\u5730\u5740\u683c\u5f0f",max_value:function(e){var t=e.value;return"\u4e0d\u80fd\u5927\u4e8e".concat(t)},min_value:function(e){var t=e.value;return"\u4e0d\u80fd\u5c0f\u4e8e".concat(t)}};function v(e){var t=[];return"maxLength"in e&&null!==e.maxLength&&t.push({max:e.maxLength,message:"\u6700\u5927\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 ".concat(e.maxLength)}),"minLength"in e&&null!==e.minLength&&t.push({min:e.minLength,message:"\u6700\u5c0f\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e ".concat(e.maxLength)}),t}function g(e){return[]}function O(e){var t=[];return t.push({type:"integer",message:"\u6570\u5b57"}),t}function y(e){var t=[];return t.push({type:"number",message:"\u6d6e\u70b9\u578b\u6570\u5b57"}),t}function j(e){var t=[];return t.push({type:"boolean",message:"\u65e0\u9009\u62e9\u503c"}),t}function w(e){return[]}function E(e){return[]}function k(e,t){return[{validator:function(e,n,r){var a=t.instance;if(a&&a.validate){var i=a.validate();i?r(i):r()}else r()},message:"\u8bf7\u4fee\u6b63".concat(e.displayName,"\u4e2d\u7684\u9519\u8bef")}]}function C(e){return[]}function x(e){return[]}function M(e){var t=[];return t.push({type:"date",message:"\u5408\u6cd5\u7684\u65e5\u671f"}),[]}function P(e){return[]}function S(e){return[]}var A={string:v,text:g,integer:O,float:y,bool:j,ref:w,mref:E,bref:k,time:C,datetime:x,date:M,image:P,file:S};function D(t,n,o,c){var l,u=[];if((t.required||null!==n&&void 0!==n&&null!==(l=n.params)&&void 0!==l&&l.required)&&u.push({required:!0,message:"\u8bf7\u8f93\u5165".concat(t.displayName)}),t.type in A){var s=A[t.type](t,o);s&&u.push.apply(u,Object(i["a"])(s))}var d=t.validators;if(d){var f,p=Object(a["a"])(d);try{var m=function(){var t=f.value,n=t;e.isObject(t)&&e.isString(e.get(t,"type",void 0))&&(n=t.type);var a=b[n]||"\u8f93\u5165\u6709\u8bef";e.isFunction(a)&&e.isObject(t)&&(a=a(Object(r["a"])({},t)));var i={};e.isObject(t)&&(i=t),u.push({validator:function(e,t,a){n in h&&t&&!h[n](t,Object(r["a"])({},i))?a(!1):a()},message:a})};for(p.s();!(f=p.n()).done;)m()}catch(_){p.e(_)}finally{p.f()}}return c&&e.isArray(c)&&!e.isEmpty(c)?u.concat(c):u}var F={"=":function(e,t){return e===t},"==":function(e,t){return e===t},"===":function(e,t){return e===t},"!=":function(e,t){return e!==t},"!==":function(e,t){return e!==t},">":function(e,t){return e>t},"<":function(e,t){return e<t},in:function(t,n){return e.isArray(n)&&-1!==n.indexOf(t)},include:function(t,n){return e.isArray(t)&&-1!==t.indexOf(n)}};function T(e,t,n){var r=n.condition_field,a=n.operator,i=n.value;if(r&&a&&void 0!==i&&r&&void 0!==e[r]){var o=e[r],c=F[a];if(c&&c(o,i))return{required:!0,message:"\u672c\u5b57\u6bb5\u662f\u5fc5\u586b\u7684"}}}function L(e){function t(t,n,r){var a=r.condition_field,i=t[a];if(i)return"lt"===e?{validator:function(e,t,n){h.max_value(t,{value:i})?n():n(!1)},message:b.max_value({value:i})}:"gt"===e?{validator:function(e,t,n){h.min_value(t,{value:i})?n():n(!1)},message:b.min_value({value:i})}:void 0}return t}var I={condition_required:T,condition_less:L("lt"),condition_great:L("gt")};function U(t,n,r){var a=[];return e.isEmpty(r)||r.forEach((function(r){if(e.isArray(r.field)&&-1!==r.field.indexOf(n.name)||e.isString(r.field)&&r.field===n.name){var i=I[r.type];if(i){var o=i(t,n,r);o&&a.push(o)}}})),a}t["a"]=D}).call(this,n("LvDl"))},"VW+w":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getAutoInlineActions",(function(){return d})),n.d(t,"formFieldsPreprocess",(function(){return p})),n.d(t,"displayPreprocess",(function(){return m})),n.d(t,"inlineActionsPreprocess",(function(){return _})),n.d(t,"configPreprocess",(function(){return g}));var r=n("tJVT"),a=n("k1fw"),i=n("556t"),o=n("9Ndd"),c=n("jfUH"),l=n("GfHQ"),u=n("uCub"),s=n("EBSl");function d(e){return Object(s["n"])(s["c"],e).map((function(e){return{type:e.rspType,action:e.action,title:e.title,permission:e.permission,show:e.show}}))}function p(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.noDefault,l=void 0!==i&&i,u=[];if(!t)return u;var s=t;return"all"===s?s=n.map((function(e){return e.name})):"required"===s&&(s=n.filter((function(e){return e.required})).map((function(e){return e.name}))),s.forEach((function(t){var r=t;e.isString(r)&&(r={name:r}),r.params||(r.params={}),e.isObject(r.widget)&&(r.params=Object(a["a"])(Object(a["a"])({},r.params),r.widget.attrs),r.widget=r.widget.type);var i=n.find((function(e){return e.name===r.name}));i?(l||r.widget||(i.choices?r.widget="Select":r.widget=o["e"][i.type]),Object(c["D"])(i)?("boolean"===typeof r.nestedForm&&(r.nestedForm?r.nestedForm=["add","edit"]:r.nestedForm=[]),void 0===r.nestedForm&&(r.nestedForm=["add","edit"])):void 0!==r.nestedForm&&delete r.nestedForm,u.push(r)):console.error("formFields\u4e2d\u627e\u4e0d\u5230".concat(r.name))})),u}function m(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=a.noDefault,o=void 0!==i&&i,l=[],u=t;return u?"all"===u?u=r[n].fields.map((function(e){return e.name})):"required"===u?u=r[n].fields.filter((function(e){return e.required})).map(f=f.name):u.length||(u=[Object(c["N"])(n,{content:{schemas:r}})]):u=[Object(c["N"])(n,{content:{schemas:r}})],u.forEach((function(t){var a=t;if(e.isString(a))a={name:a};else if(e.isObject(t)&&t.widget&&t.fields)return void l.push(t);try{var i=Object(c["l"])(r,a.name,n);o||a.alias||(a.alias=i.map((function(e){return e.displayName})).join(""))}catch(u){return void console.error(u)}l.push(a)})),l}function _(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.noDefault,a=[];return t?(t.forEach((function(t){var n=t;e.isString(n)&&(n={action:n}),n.action||(n.action=n.type),r||n.title||(n.title=i["a"][n.action]||n.action),n.params||(n.params={}),i["b"].includes(n.action)&&n.field&&(n.params.field=n.field),n.userField&&(n.params.userField=n.userField),a.push(n)})),a):a}function h(e,t,n,r){var a=r.noDefault,i=[];return(e||["add"]).forEach((function(e){var r=new l["a"](e,a);r.setModalForm(t,n,a),r.groups=e.groups,r.id=e.id,i.push(r)})),i}function b(e){var t,n=e;return e||(n=[]),[n.filter((function(e){return"tab"!==e.widget})),null===(t=n.find((function(e){return"tab"===e.widget})))||void 0===t?void 0:t.name]}function v(e,t,n){var r=[],a=e;return a||(a=[]),a.forEach((function(e){var a=e;a.name||(a={name:a}),Object(c["t"])(n,a.name,t)&&r.push(a)})),r}function g(t,n,i){e.forEach(n,(function(t){t.fieldMap=e.keyBy(t.fields,"name"),e.forEach(t.fieldMap,(function(e){e.ref&&e.ref in n&&(e.refLink=n[e.ref])}))}));var o=Object(a["a"])({noDefault:!1},i);Object.keys(n).forEach((function(e){n[e].fields=n[e].fields.filter((function(e){return!e.ref||e.ref in n})),t[e]||(t[e]={});var a=t[e];a.formFields=p(a.formFields,n[e].fields,o),a.display=m(a.display,e,n,o);var i=b(a.filter,n[e]),c=Object(r["a"])(i,2);a.filter=c[0],a.tabField=c[1],a.filter=v(a.filter,n,e),void 0===a.modalForm&&(a.modalForm=!0);var l=d(e);a.inlineActions=_((a.inlineActions||[]).concat(l),o),a.tableActions=h(a.tableActions,a.modalForm,e,o),a.details=Object(u["a"])(t,n,e)}))}}.call(this,n("LvDl"))},Vtfu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("fWQN"),a=n("yKVA"),i=n("879j"),o=n("lt+M"),c=function(e){Object(a["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(r["a"])(this,n),t.apply(this,arguments)}return n}(o["a"])},WRAw:function(e,t,n){"use strict";n("nTdE");var r,a,i=n("IZHl"),o=n("0Owb"),c=(n("eNCU"),n("pjJH")),l=(n("eE3J"),n("GSZB")),u=n("fWQN"),s=n("mtLc"),d=n("yKVA"),f=n("879j"),p=n("q1tI"),m=n.n(p),_=n("AAgL"),h=n("jfUH"),b=(r=Object(h["d"])((function(){return{uploader:Object(h["Bb"])()}})),r(a=function(e){Object(d["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={preview:!1,uploadingList:[]},e.handleChange=function(t){var n=t.file,r=t.fileList,a=e.props.onChange;if(e.setState({uploadingList:r.filter((function(e){return"uploading"===e.status}))}),"done"===n.status){var i=e.props.uploader.getUrl(n);a(i)}},e}return Object(s["a"])(n,[{key:"render",value:function(){var e=this.state.uploadingList,t=this.props,n=t.onChange,r=t.value,a=m.a.createElement(c["a"],null,m.a.createElement(l["a"],{type:"upload"})," \u70b9\u6b64\u4e0a\u4f20"),u=e;return r&&(u=u.concat({url:r,name:r,uid:r})),m.a.createElement("div",null,m.a.createElement(i["a"],Object(o["a"])({action:this.props.uploader.uploadHost,data:this.props.uploader.formData,onChange:this.handleChange,beforeUpload:this.props.uploader.init,onRemove:function(){return n()},fileList:u,accept:"video/*,audio/*,.mp4,.Ogg,.WebM"},this.widgetProps),u.length?null:a))}}]),n}(_["a"]))||a);t["a"]=b},WTkp:function(e,t,n){"use strict";var r=n("k1fw"),a=(n("0yxu"),n("/r5h")),i=n("ZqBY"),o=n("Iab2"),c=n("hS4W"),l=n.n(c),u=n("lPiR"),s=n.n(u),d={200:"\u670d\u52a1\u5668\u6210\u529f\u8fd4\u56de\u8bf7\u6c42\u7684\u6570\u636e\u3002",201:"\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u6210\u529f\u3002",202:"\u4e00\u4e2a\u8bf7\u6c42\u5df2\u7ecf\u8fdb\u5165\u540e\u53f0\u6392\u961f\uff08\u5f02\u6b65\u4efb\u52a1\uff09\u3002",204:"\u5220\u9664\u6570\u636e\u6210\u529f\u3002",400:"\u53d1\u51fa\u7684\u8bf7\u6c42\u6709\u9519\u8bef\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u7684\u64cd\u4f5c\u3002",401:"\u7528\u6237\u6ca1\u6709\u6743\u9650\uff08\u4ee4\u724c\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u9519\u8bef\uff09\u3002",403:"\u7528\u6237\u5f97\u5230\u6388\u6743\uff0c\u4f46\u662f\u8bbf\u95ee\u662f\u88ab\u7981\u6b62\u7684\u3002",404:"\u53d1\u51fa\u7684\u8bf7\u6c42\u9488\u5bf9\u7684\u662f\u4e0d\u5b58\u5728\u7684\u8bb0\u5f55\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u64cd\u4f5c\u3002",406:"\u8bf7\u6c42\u7684\u683c\u5f0f\u4e0d\u53ef\u5f97\u3002",410:"\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u6c38\u4e45\u5220\u9664\uff0c\u4e14\u4e0d\u4f1a\u518d\u5f97\u5230\u7684\u3002",422:"\u5f53\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53d1\u751f\u4e00\u4e2a\u9a8c\u8bc1\u9519\u8bef\u3002",500:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u3002",502:"\u7f51\u5173\u9519\u8bef\u3002",503:"\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u670d\u52a1\u5668\u6682\u65f6\u8fc7\u8f7d\u6216\u7ef4\u62a4\u3002",504:"\u7f51\u5173\u8d85\u65f6\u3002"},f=function(e){var t=e.response,n=void 0===t?{}:t,r=d[n.status]||n.statusText,i=n.status,o=n.url;if(401===i)return a["a"].error({message:"\u672a\u767b\u5f55\u6216\u767b\u5f55\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u3002"}),void window.g_app._store.dispatch({type:"content/logout"});throw a["a"].error({message:"\u8bf7\u6c42\u9519\u8bef ".concat(i,": ").concat(o),description:r}),d[i]},p=Object(i["a"])({errorHandler:f,credentials:"include"});p.interceptors.request.use((function(e,t){var n=Object(r["a"])(Object(r["a"])({},t.headers),{},{"X-CSRFToken":l.a.get("csrftoken")});if(t.data){var a=s()(JSON.stringify(t.data)).toString();n["X-SIGNATURE"]=a}return{url:e,options:Object(r["a"])(Object(r["a"])({},t),{},{headers:n})}})),p.interceptors.response.use((function(e){if(e.headers.get("content-disposition")){var t=e.headers.get("content-disposition"),n='"'===t.substr(t.length-1)?'filename="':"filename=";t=t.substr(t.indexOf(n)+n.length);var r=decodeURI('"'===t.substr(t.length-1)?t.substr(0,t.length-1):t);e.clone().blob().then((function(e){return Object(o["saveAs"])(e,r)}))}return e})),t["a"]=p},Xazh:function(e,t){!function(e){var t,n,r,a,i,o,c='<svg><symbol id="icon-integer" viewBox="0 0 1024 1024"><path d="M170.666667 725.333333V384H85.333333V298.666667h170.666667v426.666666H170.666667m768-85.333333a85.333333 85.333333 0 0 1-85.333334 85.333333h-170.666666v-85.333333h170.666666v-85.333333h-85.333333v-85.333334h85.333333V384h-170.666666V298.666667h170.666666a85.333333 85.333333 0 0 1 85.333334 85.333333v64a64 64 0 0 1-64 64 64 64 0 0 1 64 64V640m-341.333334 0v85.333333H341.333333v-170.666666a85.333333 85.333333 0 0 1 85.333334-85.333334h85.333333V384H341.333333V298.666667h170.666667a85.333333 85.333333 0 0 1 85.333333 85.333333v85.333333a85.333333 85.333333 0 0 1-85.333333 85.333334h-85.333333v85.333333h170.666666z" fill="" ></path></symbol><symbol id="icon-bool" viewBox="0 0 1024 1024"><path d="M896 0H128C57.6 0 0 57.6 0 128v768c0 70.4 57.6 128 128 128h768c70.4 0 128-57.6 128-128V128c0-70.4-57.6-128-128-128zM448 794.496L210.752 557.248l90.496-90.496L448 613.504l306.752-306.752 90.496 90.496L448 794.496z" fill="" ></path></symbol><symbol id="icon-decimal" viewBox="0 0 1024 1024"><path d="M352 928h-256A32 32 0 0 1 64 896V128a32 32 0 0 1 32-32h256A32 32 0 0 1 384 128v768a32 32 0 0 1-32 32z m-224-64h192v-704H128zM928 928h-256a32 32 0 0 1 0-64H896v-320h-224A32 32 0 0 1 640 512V128a32 32 0 0 1 32-32h256a32 32 0 0 1 0 64H704v320h224a32 32 0 0 1 32 32v384a32 32 0 0 1-32 32z" fill="#4D4D4D" ></path><path d="M512 896m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#4D4D4D" ></path></symbol><symbol id="icon-tree" viewBox="0 0 1025 1024"><path d="M1013.860543 719.452148a39.969564 39.969564 0 0 1 10.392086 27.978695V983.251269a39.969564 39.969564 0 0 1-10.392086 28.778086c-6.39513 7.194521-15.188434 10.392087-24.78113 10.392087H782.836464a31.975651 31.975651 0 0 1-23.981738-10.392087 39.969564 39.969564 0 0 1-10.392087-28.778086V747.430843c0-7.993913 1.598783-13.589652 4.796348-19.984782 3.197565-6.39513 7.993913-11.191478 12.79026-14.389043a30.376868 30.376868 0 0 1 16.787217-5.595739h77.540954V551.57998a30.376868 30.376868 0 0 0-3.197566-14.389043 28.778086 28.778086 0 0 0-8.793304-10.392086 21.583564 21.583564 0 0 0-12.79026-3.996956H543.818472v184.659384h78.340345c8.793304 0 16.787217 3.996956 23.981739 11.990869a39.969564 39.969564 0 0 1 9.592695 27.978695V983.251269c0 7.194521-0.799391 13.589652-3.996956 19.984782s-7.993913 11.191478-12.790261 14.389043a30.376868 30.376868 0 0 1-16.787217 4.796348H415.915868a30.376868 30.376868 0 0 1-16.787217-4.796348 39.969564 39.969564 0 0 1-13.589651-14.389043 39.969564 39.969564 0 0 1-4.796348-19.984782V747.430843a39.969564 39.969564 0 0 1 10.392087-27.978695 31.975651 31.975651 0 0 1 24.781129-11.990869h76.741563V522.801895H189.688137a23.981738 23.981738 0 0 0-19.185391 7.993912c-4.796348 6.39513-7.194521 12.79026-7.194521 20.784173v155.881299H240.849179c10.392087 0 18.385999 3.996956 24.781129 11.990869 6.39513 7.993913 9.592695 17.586608 9.592696 27.978695V983.251269c0 11.191478-3.197565 20.784173-9.592696 28.778086-6.39513 7.194521-14.389043 10.392087-23.981738 10.392087H34.606229c-3.996956 0-7.993913 0-11.191477-1.598783a32.775042 32.775042 0 0 1-8.793304-5.595738 37.57139 37.57139 0 0 1-7.993913-7.993913 41.568346 41.568346 0 0 1-4.796348-11.191478A44.765911 44.765911 0 0 1 1.031796 983.251269V747.430843l0.799391-10.392087A31.975651 31.975651 0 0 1 5.828144 727.446061 51.161042 51.161042 0 0 1 17.019621 713.057018a23.981738 23.981738 0 0 1 7.993913-3.996956l9.592695-1.598783H112.946575V492.425026c0-7.993913 2.398174-14.389043 7.993912-19.984782 4.796348-5.595739 10.392087-7.993913 17.586608-7.993913h354.130336V315.759554h-76.741563a31.975651 31.975651 0 0 1-24.781129-11.990869 39.969564 39.969564 0 0 1-10.392087-27.179304V39.969564c0-11.191478 3.197565-20.784173 10.392087-28.778086A31.975651 31.975651 0 0 1 415.915868 0.799391h206.242949c5.595739 0 11.191478 1.598783 16.787217 5.595739a41.568346 41.568346 0 0 1 12.790261 15.188434c3.197565 5.595739 3.996956 12.79026 3.996956 19.185391v236.619818a39.969564 39.969564 0 0 1-9.592695 27.179303c-7.194521 7.993913-15.188434 11.990869-23.981739 11.990869h-78.340345V463.64694h342.139466c7.993913 0 13.589652 3.197565 19.185391 7.993913 4.796348 6.39513 7.194521 12.79026 7.194522 20.784173v215.835645h76.741562a31.975651 31.975651 0 0 1 24.78113 11.191477z"  ></path></symbol><symbol id="icon-radio" viewBox="0 0 1024 1024"><path d="M512 85.290667C747.648 85.290667 938.666667 276.352 938.666667 512.042667c0 235.648-191.061333 426.709333-426.709334 426.709333-235.690667 0-426.752-191.061333-426.752-426.709333C85.248 276.352 276.309333 85.248 512 85.248z m0 64a362.752 362.752 0 1 0 0 725.461333A362.752 362.752 0 0 0 512 149.333333z m-0.170667 106.666666a255.914667 255.914667 0 1 1 0 511.829334 255.914667 255.914667 0 0 1 0-511.829334z"  ></path></symbol><symbol id="icon-m2m" viewBox="0 0 1024 1024"><path d="M307.2 768a51.2 51.2 0 0 0-51.2-51.2H153.6a51.2 51.2 0 0 0-51.2 51.2v102.4a51.2 51.2 0 0 0 51.2 51.2h102.4a51.2 51.2 0 0 0 51.2-51.2v-102.4z m102.4-51.2v204.8a102.4 102.4 0 0 1-102.4 102.4H102.4a102.4 102.4 0 0 1-102.4-102.4v-204.8a102.4 102.4 0 0 1 102.4-102.4h204.8a102.4 102.4 0 0 1 102.4 102.4zM921.6 153.6a51.2 51.2 0 0 0-51.2-51.2h-102.4a51.2 51.2 0 0 0-51.2 51.2v102.4a51.2 51.2 0 0 0 51.2 51.2h102.4a51.2 51.2 0 0 0 51.2-51.2V153.6z m102.4-51.2v204.8a102.4 102.4 0 0 1-102.4 102.4h-204.8a102.4 102.4 0 0 1-102.4-102.4V102.4a102.4 102.4 0 0 1 102.4-102.4h204.8a102.4 102.4 0 0 1 102.4 102.4z m-153.6 409.6h-102.4a50.9952 50.9952 0 1 0 0 101.888v102.4c0 28.3136-22.9376 51.712-51.2 51.712h-102.4c0-51.2-22.9376-51.456-51.2-51.456s-51.2 22.6816-51.2 50.944v102.4c0 28.3136 22.9376 51.456 51.2 51.456S614.4 921.6 614.4 870.4h153.6c56.576 0 102.4-46.336 102.4-102.912v-153.6A50.9952 50.9952 0 1 0 870.4 512z m-358.4-256a51.2 51.2 0 0 1-102.4 0H307.2a51.2 51.2 0 0 0-51.2 51.2v102.4a51.2 51.2 0 0 1 0 102.4H153.6a51.2 51.2 0 0 1 0-102.4V256a102.4 102.4 0 0 1 102.4-102.4h153.6a51.2 51.2 0 0 1 102.4 0v102.4z"  ></path></symbol><symbol id="icon-string" viewBox="0 0 1024 1024"><path d="M85.333333 742.4v-81.066667c29.866667 12.8 85.333333 21.333333 136.533334 21.333334 64 0 93.866667-17.066667 93.866666-64 0-42.666667-17.066667-55.466667-93.866666-76.8-102.4-21.333333-132.266667-51.2-132.266667-136.533334 0-98.133333 59.733333-136.533333 170.666667-136.533333 51.2 0 98.133333 8.533333 123.733333 17.066667v76.8C354.133333 349.866667 302.933333 341.333333 260.266667 341.333333c-59.733333 0-85.333333 12.8-85.333334 59.733334 0 38.4 12.8 46.933333 85.333334 64 110.933333 25.6 140.8 59.733333 140.8 149.333333 0 93.866667-55.466667 140.8-179.2 140.8-51.2 4.266667-110.933333-4.266667-136.533334-12.8zM584.533333 448v179.2c0 46.933333 8.533333 59.733333 46.933334 59.733333 12.8 0 21.333333 0 34.133333-4.266666v68.266666c-12.8 0-29.866667 4.266667-46.933333 4.266667-89.6 0-119.466667-21.333333-119.466667-119.466667v-187.733333h-51.2V379.733333h51.2V290.133333h85.333333v89.6h81.066667v68.266667h-81.066667zM938.666667 371.2l-4.266667 76.8h-8.533333c-46.933333 0-93.866667 17.066667-106.666667 81.066667v221.866666h-85.333333V379.733333h85.333333v68.266667c21.333333-59.733333 68.266667-72.533333 110.933333-72.533333h8.533334z"  ></path></symbol><symbol id="icon-object" viewBox="0 0 1024 1024"><path d="M106.057143 830.171429v-193.828572c0-43.885714-36.571429-80.457143-80.457143-80.457143H0v-84.114285h25.6c43.885714 0 80.457143-36.571429 80.457143-80.457143V193.828571c0-87.771429 73.142857-157.257143 160.914286-157.257142h54.857142v106.057142H266.971429c-29.257143 0-54.857143 21.942857-54.857143 51.2v215.771429c0 43.885714-29.257143 87.771429-73.142857 98.742857 43.885714 14.628571 73.142857 54.857143 73.142857 98.742857v215.771429c0 29.257143 25.6 51.2 54.857143 51.2h54.857142V987.428571H266.971429c-87.771429 0-160.914286-69.485714-160.914286-157.257142z m811.885714-197.485715v193.828572c0 87.771429-73.142857 157.257143-160.914286 157.257143h-54.857142V877.714286h54.857142c29.257143 0 54.857143-21.942857 54.857143-51.2v-215.771429c0-43.885714 29.257143-87.771429 73.142857-98.742857-43.885714-14.628571-73.142857-54.857143-73.142857-98.742857v-219.428572c0-29.257143-25.6-51.2-54.857143-51.2h-54.857142V36.571429h54.857142c87.771429 0 160.914286 69.485714 160.914286 157.257142v193.828572c0 43.885714 36.571429 80.457143 80.457143 80.457143h25.6v84.114285h-25.6c-43.885714 3.657143-80.457143 36.571429-80.457143 80.457143z"  ></path></symbol><symbol id="icon-array" viewBox="0 0 1024 1024"><path d="M352 64H128A64 64 0 0 0 64 128v768a64 64 0 0 0 64 64h224a32 32 0 0 0 32-32v-64a32 32 0 0 0-32-32H192V192h160a32 32 0 0 0 32-32V96a32 32 0 0 0-32-32z m544 0H672a32 32 0 0 0-32 32v64a32 32 0 0 0 32 32h160v640h-160a32 32 0 0 0-32 32v64a32 32 0 0 0 32 32h224a64 64 0 0 0 64-64V128a64 64 0 0 0-64-64z"  ></path></symbol><symbol id="icon-time" viewBox="0 0 1024 1024"><path d="M812.36544 493.26838c0 22.533202-18.260899 40.782845-40.782845 40.782845l-234.203066-0.348947c-3.663436 1.075495-7.467065 1.841951-11.489682 1.841951-17.524119 0-32.340569-11.120268-38.116109-26.643823-2.090615-4.920056-3.264347-10.314926-3.264347-16.000416 0-2.101871 0.319272-4.121877 0.618077-6.134721l0.35918-238.295268c0-22.521946 18.261922-40.783869 40.782845-40.783869 22.522969 0 40.782845 18.261922 40.782845 40.783869l-0.298805 203.706495 204.831109 0.319272C794.104541 452.495768 812.36544 470.746434 812.36544 493.26838zM525.828448 941.493891c-95.78453 0-184.14088-30.547737-256.965489-81.735559-17.244756-4.758374-29.990035-20.392446-29.990035-39.149649l-0.35918-3.784186c0-22.521946 18.241456-40.782845 40.763402-40.782845 11.830443 0 22.404266 5.108345 29.850865 13.142322 60.695361 44.268226 135.213541 70.75446 216.102826 70.75446 203.079208 0 367.703593-164.627455 367.703593-367.703593 0-203.080232-164.624385-367.70564-367.703593-367.70564S157.527245 289.154609 157.527245 492.233817c0 56.095599 12.922311 109.046578 35.385928 156.609851l-6.610558 6.612605c14.914688 6.073322 25.449625 20.658506 25.449625 37.745672l0.35918 3.783163c0 22.522969-18.260899 40.782845-40.782845 40.782845-18.600637 0-34.133402-12.546757-39.032992-29.582759C97.22995 644.243907 77.156776 570.912761 77.156776 492.831428c0-247.786433 200.88831-448.663486 448.673719-448.663486 247.785409 0 448.670649 200.8791 448.670649 448.663486C974.501144 740.626048 773.614881 941.493891 525.828448 941.493891z"  ></path></symbol><symbol id="icon-password" viewBox="0 0 1024 1024"><path d="M851.450696 21.647662l-399.545757 399.609756c-117.438165-55.551132-262.011906-35.007453-359.162388 62.143029-123.646068 123.646068-123.646068 324.218934 0 447.865002s324.218934 123.646068 447.865002 0c97.150482-97.150482 117.630162-241.660224 62.143029-359.226387l151.741629-151.741629 96.382494 96.382494c28.79955 28.79955 75.51882 28.863549 104.382369 0l43.51932-43.51932c28.79955-28.79955 28.863549-75.51882 0-104.382369l-54.463149-54.463149 0.063999-0.063999-41.983344-41.791347 99.966438-99.966438c28.79955-28.79955 28.863549-75.51882 0-104.382369l-46.463274-46.463274c-28.863549-28.863549-75.582819-28.863549-104.446368 0zM392.065874 782.787769c-41.663349 41.663349-109.182294 41.59935-150.781644-0.063999-41.663349-41.663349-41.663349-109.182294 0-150.845643s109.182294-41.59935 150.781644 0.063999 41.727348 109.118295 0 150.845643z"  ></path></symbol><symbol id="icon-date" viewBox="0 0 1024 1024"><path d="M883.278513 148.539035l-43.016723 0 0-12.780071c0-38.310537-31.199583-69.632917-69.323878-69.632917l-1.02433 0c-38.129412 0-69.323878 31.321356-69.323878 69.632917l0 12.780071L317.20292 148.539035l0-12.780071c0-38.310537-31.195489-69.632917-69.323878-69.632917l-1.055029 0c-38.127366 0-69.322855 31.321356-69.322855 69.632917l0 12.780071-42.924625 0c-38.127366 0-69.323878 31.351032-69.323878 69.609381l0 665.701614c0 38.309514 31.195489 69.632917 69.323878 69.632917l748.70198 0c38.127366 0 69.322855-31.323403 69.322855-69.632917l0-665.701614C952.601368 179.890067 921.405879 148.539035 883.278513 148.539035L883.278513 148.539035zM728.318232 135.758963c0-23.024389 18.632359-41.777499 41.594327-41.777499l1.02433 0c22.931269 0 41.593304 18.753109 41.593304 41.777499L812.530193 259.615852c0 23.024389-18.662035 41.778522-41.593304 41.778522l-1.02433 0c-22.961968 0-41.594327-18.754133-41.594327-41.778522L728.318232 135.758963 728.318232 135.758963zM205.23071 135.758963c0-23.024389 18.632359-41.777499 41.599444-41.777499l1.048889 0c22.903639 0 41.594327 18.753109 41.594327 41.777499L289.473369 259.615852c0 23.024389-18.691711 41.778522-41.594327 41.778522l-1.048889 0c-22.967084 0-41.599444-18.754133-41.599444-41.778522L205.23071 135.758963 205.23071 135.758963zM883.278513 897.807926l-748.70198 0c-7.519254 0-13.864776-6.468318-13.864776-13.957897L120.711757 394.394489l776.433578 0 0 489.455541C897.144312 891.338584 890.797767 897.807926 883.278513 897.807926L883.278513 897.807926zM222.614635 494.083955l127.918391 0 0 62.950727L222.614635 557.034682 222.614635 494.083955 222.614635 494.083955zM445.963493 494.083955l126.906342 0 0 62.950727L445.963493 557.034682 445.963493 494.083955 445.963493 494.083955zM668.299277 494.083955l124.873032 0 0 62.950727L668.299277 557.034682 668.299277 494.083955 668.299277 494.083955zM222.614635 622.00951l127.918391 0 0 61.927421L222.614635 683.936931 222.614635 622.00951 222.614635 622.00951zM445.963493 622.00951l126.906342 0 0 61.927421L445.963493 683.936931 445.963493 622.00951 445.963493 622.00951zM668.299277 622.00951l124.873032 0 0 61.927421L668.299277 683.936931 668.299277 622.00951 668.299277 622.00951zM222.614635 746.884588l127.918391 0 0 64.97278L222.614635 811.857369 222.614635 746.884588 222.614635 746.884588zM445.963493 746.884588l126.906342 0 0 64.97278L445.963493 811.857369 445.963493 746.884588 445.963493 746.884588zM668.299277 746.884588l124.873032 0 0 64.97278L668.299277 811.857369 668.299277 746.884588 668.299277 746.884588zM668.299277 746.884588"  ></path></symbol><symbol id="icon-transfer" viewBox="0 0 1024 1024"><path d="M783.272333 949.20655c-1.848091 0-3.607154-0.293689-5.249561-0.820692-6.451946-2.287089-10.763135-8.388041-10.763135-15.192004L767.259638 789.016151 422.917102 789.016151c-30.912034 0-56.075133-25.104771-56.075133-56.016805 0-30.912034 25.163099-56.016805 56.075133-56.016805L767.258615 676.982542 767.258615 532.805862c0-6.803963 4.281513-12.845563 10.67513-15.074324 1.612731-0.176009 3.108804-0.234337 4.457522-0.234337 7.214309 0 10.851139 2.052752 13.403265 5.279237L955.956278 723.028251c4.721535 5.865591 4.721535 14.077623 0.029676 19.943215L795.794531 943.223279C792.745079 947.036118 788.198529 949.20655 783.272333 949.20655z"  ></path><path d="M240.727667 72.29556c1.848091 0 3.607154 0.293689 5.249561 0.820692 6.451946 2.287089 10.763135 8.388041 10.763135 15.192004l0 144.17668 344.341512 0c30.912034 0 56.075133 25.104771 56.075133 56.016805s-25.163099 56.016805-56.075133 56.016805L256.741385 344.518544l0 144.17668c0 6.803963-4.281513 12.845563-10.67513 15.074324-1.612731 0.176009-3.108804 0.234337-4.457522 0.234337-7.214309 0-10.851139-2.052752-13.403265-5.279237L68.043722 298.473859c-4.721535-5.865591-4.721535-14.077623-0.029676-19.943215L228.204445 78.278831C231.254921 74.465992 235.800447 72.29556 240.727667 72.29556z"  ></path></symbol><symbol id="icon-image" viewBox="0 0 1024 1024"><path d="M736 448c53 0 96-43 96-96 0-53-43-96-96-96-53 0-96 43-96 96C640 405 683 448 736 448z"  ></path><path d="M904 128 120 128c-31.2 0-56 25.4-56 56.6l0 654.8c0 31.2 24.8 56.6 56 56.6l784 0c31.2 0 56-25.4 56-56.6L960 184.6C960 153.4 935.2 128 904 128zM697.8 523.4c-6-7-15.2-12.4-25.6-12.4-10.2 0-17.4 4.8-25.6 11.4l-37.4 31.6c-7.8 5.6-14 9.4-23 9.4-8.6 0-16.4-3.2-22-8.2-2-1.8-5.6-5.2-8.6-8.2L448 430.6c-8-9.2-20-15-33.4-15-13.4 0-25.8 6.6-33.6 15.6L128 736.4 128 215.4c2-13.6 12.6-23.4 26.2-23.4l715.4 0c13.8 0 25 10.2 25.8 24l0.6 520.8L697.8 523.4z"  ></path></symbol><symbol id="icon-file" viewBox="0 0 1024 1024"><path d="M672 480 352 480c-19.2 0-32 12.8-32 32s12.8 32 32 32l320 0c19.2 0 32-12.8 32-32S691.2 480 672 480z"  ></path><path d="M672 672 352 672c-19.2 0-32 12.8-32 32s12.8 32 32 32l320 0c19.2 0 32-12.8 32-32S691.2 672 672 672z"  ></path><path d="M352 352l96 0c19.2 0 32-12.8 32-32s-12.8-32-32-32l-96 0c-19.2 0-32 12.8-32 32S332.8 352 352 352z"  ></path><path d="M608 64 256 64C220.8 64 192 92.8 192 128l0 768c0 35.2 28.8 64 64 64l64 0 384 0 64 0c35.2 0 64-28.8 64-64L832 288 608 64zM742.4 288 608 288 608 153.6 742.4 288zM704 896 320 896 256 896 256 128l288 0 0 192c0 19.2 12.8 32 32 32l192 0 0 544L704 896z"  ></path></symbol><symbol id="icon-text" viewBox="0 0 1024 1024"><path d="M799.999887 289.356358H224.000113a31.970084 31.970084 0 0 0 0 63.940169h575.999774a31.970084 31.970084 0 0 0 0-63.940169zM799.999887 480.093133H224.000113a31.970084 31.970084 0 1 0 0 63.940169h575.999774a31.970084 31.970084 0 1 0 0-63.940169zM799.999887 670.829908H224.000113a31.970084 31.970084 0 0 0 0 63.940169h575.999774a31.970084 31.970084 0 0 0 0-63.940169z" fill="" ></path><path d="M948.041247 156.14406A150.750689 150.750689 0 0 0 809.164645 63.940169h-0.278158l-73.444496 1.325765a31.988147 31.988147 0 0 0 1.112631 63.965456l72.866506-1.260741a86.124156 86.124156 0 0 1 61.100792 25.449632c16.41131 16.41131 25.366546 38.234054 25.366546 61.440361v594.278716c0 23.206308-8.955236 44.956802-25.366546 61.368112a86.059133 86.059133 0 0 1-61.357275 25.377384H214.835355c-23.206308 0-45.061563-8.969686-61.472873-25.377384A86.18918 86.18918 0 0 1 127.880338 809.139358V214.860642a86.94418 86.94418 0 0 1 86.940568-86.882768h73.173562a31.970084 31.970084 0 1 0 0-63.940169H214.835355A150.82655 150.82655 0 0 0 63.940169 214.860642v594.278716A150.598966 150.598966 0 0 0 214.835355 959.825022h594.32929A150.328033 150.328033 0 0 0 959.825022 809.139358V214.860642a149.836742 149.836742 0 0 0-11.783775-58.716582z" fill="" ></path><path d="M415.997629 127.880338h192.001129a31.970084 31.970084 0 0 0 0-63.940169h-192.001129a31.970084 31.970084 0 0 0 0 63.940169z" fill="" ></path></symbol><symbol id="icon-gallery" viewBox="0 0 1024 1024"><path d="M896 1024H128a128 128 0 0 1-128-128V128a128 128 0 0 1 128-128h768a128 128 0 0 1 128 128v768a128 128 0 0 1-128 128z m64-896a64 64 0 0 0-64-64H128a64 64 0 0 0-64 64v768a64 64 0 0 0 64 64h768a64 64 0 0 0 64-64V128z m-69.632 722.112a32 32 0 0 1-44.512 8.256L351.712 518.656l-173.952 115.968a32 32 0 1 1-35.488-53.248l192-128h0.32a30.56 30.56 0 0 1 7.552-3.2 29.28 29.28 0 0 1 4.064-1.6 31.424 31.424 0 0 1 3.84 0 32 32 0 0 1 8.32 0 26.592 26.592 0 0 1 2.944 1.184 32.64 32.64 0 0 1 8.608 3.648h0.256l225.664 155.168 152.224-121.792 0.288 0.352a31.584 31.584 0 0 1 37.472-1.984l96 64a32 32 0 1 1-35.488 53.248l-76.544-51.008-118.816 95.04 231.232 158.976a32 32 0 0 1 8.16 44.704zM592 416A144 144 0 1 1 736 272a144 144 0 0 1-144 144z m0-224A80 80 0 1 0 672 272 80 80 0 0 0 592 192z"  ></path></symbol><symbol id="icon-video" viewBox="0 0 1024 1024"><path d="M910.222336 284.444672H113.77664V170.667008c0-31.419392 25.469952-56.889344 56.889344-56.889344h682.665984c31.419392 0 56.889344 25.469952 56.889344 56.889344v113.77664z m0 56.88832v512c0 31.419392-25.469952 56.889344-56.889344 56.889344H170.667008c-31.419392 0-56.889344-25.469952-56.889344-56.889344v-512H910.22336zM284.444672 170.667008l57.2416 113.77664h56.88832l-57.2416-113.77664h-56.88832z m170.665984 0l57.2416 113.77664H569.2416L512 170.668032h-56.889344z m170.667008 0l57.2416 113.77664h56.88832l-57.2416-113.77664h-56.88832z m6.00576 452.108288a28.444672 28.444672 0 0 0 12.721152-12.721152c7.02464-14.051328 1.330176-31.136768-12.721152-38.162432L439.38816 475.69408a28.444672 28.444672 0 0 0-12.720128-3.003392c-15.710208 0-28.444672 12.735488-28.444672 28.444672v192.396288c0 4.415488 1.028096 8.77056 3.002368 12.720128 7.025664 14.051328 24.112128 19.746816 38.162432 12.721152l192.396288-96.197632z" fill="#323233" ></path></symbol><symbol id="icon-richtext" viewBox="0 0 1024 1024"><path d="M192 560h640v32H192v-32z m448-288h192v32h-192v-32z m0 96h192v32h-192v-32z m0 96h192v32h-192v-32z m-448 192h640v32H192v-32z m0 96h640v32H192v-32z m672-736H160a96 96 0 0 0-96 96v768a96 96 0 0 0 96 96h704a96 96 0 0 0 96-96v-768a96 96 0 0 0-96-96z m64 864a64 64 0 0 1-64 64H160a64 64 0 0 1-64-64v-768a64 64 0 0 1 64-64h704a64 64 0 0 1 64 64v768z m-352-672H192v288h384v-288z m-32 256H224v-224h320v224z"  ></path></symbol><symbol id="icon-cascader" viewBox="0 0 1024 1024"><path d="M772.87 734.061c-43.34 0-80.008 27.933-93.768 66.577H475.91c-56.607 0-102.667-46.06-102.667-102.667v-97.147h305.86c13.76 38.645 50.426 66.578 93.767 66.578 55.124 0 99.948-44.825 99.948-99.949s-44.824-99.948-99.948-99.948c-43.34 0-80.008 27.933-93.768 66.578h-305.86V401.01H695.17c55.123 0 99.948-44.825 99.948-99.949V190.073c0-55.124-44.825-99.948-99.948-99.948H251.13c-55.124 0-99.948 44.824-99.948 99.948v110.99c0 55.123 44.824 99.948 99.948 99.948h55.536v296.96c0 93.356 75.97 169.327 169.326 169.327h203.192c13.76 38.644 50.428 66.577 93.769 66.577 55.124 0 99.948-44.824 99.948-99.948s-44.907-99.866-100.03-99.866z m0-199.896c18.375 0 33.289 14.914 33.289 33.288s-14.914 33.29-33.289 33.29-33.288-14.915-33.288-33.29 14.914-33.288 33.288-33.288zM217.76 301.063v-110.99c0-18.375 14.914-33.288 33.288-33.288h444.04c18.375 0 33.289 14.913 33.289 33.288v110.99c0 18.374-14.914 33.288-33.289 33.288H251.13c-18.375 0-33.371-14.914-33.371-33.289zM772.87 867.298c-18.374 0-33.288-14.914-33.288-33.289 0-18.374 14.914-33.288 33.288-33.288s33.289 14.914 33.289 33.288c0.082 18.293-14.914 33.289-33.289 33.289z"  ></path></symbol></svg>',l=(l=document.getElementsByTagName("script"))[l.length-1].getAttribute("data-injectcss");if(l&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function u(){i||(i=!0,r())}t=function(){var e,t,n,r;(r=document.createElement("div")).innerHTML=c,c=null,(n=r.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",e=n,(t=document.body).firstChild?(r=e,(n=t.firstChild).parentNode.insertBefore(r,n)):t.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(r=t,a=e.document,i=!1,(o=function(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(o,50)}u()})(),a.onreadystatechange=function(){"complete"==a.readyState&&(a.onreadystatechange=null,u())})}(window)},Z3Gc:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return p}));var r=n("gyLe"),a=n.n(r),i=(n("L5Lq"),function(e){return decodeURIComponent(window.atob(e))}),o=a.a,c=i("JUU5JTk3JUFBJUU3JTk0JUI1JUU2JTk1JUIwJUU2JThEJUFFJUU3JUFFJUExJUU3JTkwJTg2"),l="".concat(c,"\u7cfb\u7edf"),u=i("MjAxOCUyMCVFNSVCOSVCRiVFNCVCOCU5QyVFNiU5RCVCMCVFNiU5OCU4RSVFNyVBNyU5MSVFNiU4QSU4MCVFNSU4NyVCQSVFNSU5MyU4MQ=="),s=i("aHR0cCUzQSUyRiUyRnd3dy5naXRtZW4uY29t"),d=i("R2l0bWVuLkx0ZA=="),f=i("aHR0cCUzQSUyRiUyRnd3dy5naXRtZW4uY29t"),p=465033416},bDUM:function(e,t,n){"use strict";n("Mwp2");var r=n("VXEj"),a=n("tJVT"),i=n("q1tI"),o=n.n(i),c=n("9jjd"),l=n("jfUH");t["a"]=function(e){var t=e.value,n=e.field.ref,i=e.urlField,u=void 0===i?"url":i,s=Object(l["zb"])(n);return o.a.createElement(r["b"],{dataSource:t,renderItem:function(e){var t=s(e),n=e[u]||void 0,i=n?n.split("#"):[n],l=Object(a["a"])(i,1),d=l[0];return o.a.createElement(r["b"].Item,{actions:[o.a.createElement("a",{href:d},"\u94fe\u63a5")]},o.a.createElement(r["b"].Item.Meta,{avatar:o.a.createElement(c["a"],null),title:t}))}})}},buKw:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("iQDF");var r=n("+eQT"),a=n("0Owb"),i=n("fWQN"),o=n("mtLc"),c=n("yKVA"),l=n("879j"),u=n("q1tI"),s=n.n(u),d=n("wd/R"),f=n.n(d),p=n("AAgL"),m=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,i=e.field.type,o={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ssZ"}[i],c={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss"}[i];return s.a.createElement(r["a"],Object(a["a"])({value:t?f()(t):null,onChange:function(e){n("date"===i?e&&e.format(o):e)},format:c},this.widgetProps,{showTime:"datetime"===i}))}}]),n}(p["a"])},chM4:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n("gmZI");var r=n("hdkw"),a=n("0Owb"),i=n("fWQN"),o=n("mtLc"),c=n("yKVA"),l=n("879j"),u=n("q1tI"),s=n.n(u),d=n("wd/R"),f=n.n(d),p=n("AAgL"),m="HH:mm:ss",_=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange;return s.a.createElement(r["a"],Object(a["a"])({value:t?f()(t,m):null,onChange:function(e){return n(e&&e.format(m))},format:m},this.widgetProps))}}]),n}(p["a"])},ctVj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("tJVT"),a=n("q1tI");function i(){var e=Object(a["useState"])("ready"),t=Object(r["a"])(e,2),n=t[0],i=t[1],o=function(e){return function(){"ready"===n&&(e.apply(void 0,arguments),i("submitting"))}},c=function(){return i("submitted")},l=function(){return i("ready")};return{loading:"submitting"===n,finish:c,retry:l,dispatch:o,dispatchPromise:function(e){return o((function(){return e.apply(void 0,arguments).finally(l)}))}}}},d76M:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r={},a="fieldHandler";function i(e,t){r[e]=t}function o(e,t,n,a){if(t in r){var i=r[t][e],o=i[n];o&&o(a)}}function c(e,t,n){o(a,e,t,n)}},dTNC:function(e,t,n){"use strict";(function(e){var r=n("9og8"),a=(n("4csm"),n("2Fwu")),i=(n("9kbU"),n("vbHR")),o=n("0Owb"),c=n("PpiC"),l=(n("eNCU"),n("pjJH")),u=n("tJVT"),s=(n("eE3J"),n("GSZB")),d=n("WmNS"),f=n.n(d),p=n("q1tI"),m=n.n(p),_=n("EBSl"),h=n("jfUH");function b(t){for(var n=t,r=["outlined","filled","twoTone"],a=0;a<r.length;a+=1){var i="__".concat(r[a]);if(n&&n.endsWith(i)){n=m.a.createElement(s["a"],{type:n.slice(0,-i.length),theme:"outlined"});break}}return e.isString(n)&&(n=m.a.createElement(s["a"],{type:n})),n}var v=function(e){var t=e.children;return t(Object(p["useState"])(!1))};t["a"]=function(t){var n=t.tableActions,d=t.context,p=t.model,g=Object(h["qb"])();return n.filter((function(t){if(e.isEmpty(t.groups))return!0;var n=p.split("__"),r=Object(u["a"])(n,2),a=r[0],i=r[1],o="".concat(t.action,"_").concat(i,"_").concat(t.id,"__").concat(a);return g.includes(o)})).map((function(e){return Object(_["o"])(_["d"],{config:e})})).map((function(e,t){var n=e.icon,h=e.submenus,g=l["a"];if(h&&h.length){var O=function e(t){var n=t.action,r=Object(c["a"])(t,["action"]);return m.a.createElement(_["k"],{action:item,model:p,handler:d},(function(t,a){var c=Object(_["o"])(_["d"],{config:n});return c.submenus&&c.submenus.length?m.a.createElement(i["a"].SubMenu,Object(o["a"])({},r,{title:[c.icon&&b(c.icon),a],onTitleClick:function(){return t()}}),c.submenus.map((function(t){return m.a.createElement(e,{action:t})}))):m.a.createElement(i["a"].Item,Object(o["a"])({},r,{onClick:function(){return t()}}),c.icon&&b(c.icon),a)}))},y=m.a.createElement(i["a"],null,h.map((function(e){return m.a.createElement(O,{action:e})})));g=e.action?function(e){return m.a.createElement(a["a"].Button,Object(o["a"])({},e,{overlay:y}))}:function(e){e.onClick;var t=Object(c["a"])(e,["onClick"]);return m.a.createElement(a["a"],{overlay:y},m.a.createElement(l["a"],t,t.children,m.a.createElement(s["a"],{type:"down"})))}}return m.a.createElement(v,null,(function(a){var i=Object(u["a"])(a,2),c=i[0],l=i[1];return m.a.createElement(_["k"],{action:e,model:p,handler:d},(function(e,a){return m.a.createElement(g,Object(o["a"])({type:0===t&&"primary",style:{marginRight:8}},n?{key:c}:{},{onClick:Object(r["a"])(f.a.mark((function t(){var n,r,a;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e(),!n||!n.then){t.next=7;break}return r={},t.next=5,Promise.race([n,r]);case 5:a=t.sent,a===r&&(l(!0),n.finally((function(){return l(!1)})));case 7:case"end":return t.stop()}}),t)}))),loading:c}),n&&!c&&b(n),a)}))}))}))}}).call(this,n("LvDl"))},dUs0:function(e,t,n){"use strict";(function(e){n("eNCU");var r,a,i,o,c=n("pjJH"),l=(n("Dvpn"),n("myml")),u=n("jrin"),s=(n("uPNz"),n("Oedt")),d=n("oBTY"),f=n("k1fw"),p=n("fWQN"),m=n("mtLc"),_=n("tS8v"),h=n("yKVA"),b=n("879j"),v=n("q1tI"),g=n.n(v),O=n("/MKj"),y=n("G9e4"),j=n("0TMk"),w=n("jVA4"),E=n("9Ndd"),k=n("AAgL"),C=n("jfUH"),x=n("Utjr"),M=(r=Object(O["c"])((function(e){var t=e.content,n=t.schemas,r=t.adminConfig;return{schemas:n,adminConfig:r}})),a=Reflect.metadata("design:type",Function),i=Reflect.metadata("design:paramtypes",[void 0]),r(o=a(o=i(o=function(t){Object(h["a"])(r,t);var n=Object(b["a"])(r);function r(e){var t;Object(p["a"])(this,r),t=n.call(this,e),t.myProps=["canAdd","fields"],t.tmpRowIndex=0,t.formSet={},t.lastChangeField=[];var a=t.props,i=a.validateparams,o=a.extra,c=a.field,l=a.schemas,u=a.adminConfig,s=a.value;return t.model=c.ref,t.schema=l[t.model],t.admin=u[t.model],i.instance=Object(_["a"])(t),o.brefFields[c.name]=Object(_["a"])(t),t.formValidated=!1,t.state={data:s||[]},t}return Object(m["a"])(r,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.validateparams,r=this.props.validateparams;n.instance=r.instance;var a=this.props.value,i=e.value;if(i&&i!==a){this.tmpRowIndex=0;var o=i.map((function(e){var n=Object(f["a"])({},e);return n.row__key=Object(C["M"])(e,t.model),Object(C["M"])(e,t.model)||(n.row__key="temp_id_".concat(t.tmpRowIndex),t.tmpRowIndex+=1),n}));this.setState({data:o})}}},{key:"onRowChange",value:function(e,t){if(t&&t.target)t.stopPropagation();else{var n=this.state.data,r=Object(d["a"])(n),a=r.find((function(t){return t.row__key===e}));Object.keys(t).forEach((function(n){e&&(a[n]=t[n])})),this.setState({data:r}),this.notifyFormChange(r,!0)}}},{key:"validate",value:function(){var t=[],n=!1;return e.values(this.formSet).forEach((function(e){e.inlineData.hasError&&(n=!0)})),n&&t.push({message:"\u6709\u9519\u8bef\u4e86"}),t}},{key:"notifyFormChange",value:function(e,t){if(this.formValidated||t){this.formValidated=!0;var n=this.props.onChange,r=e.map((function(e){var t={};return Object.keys(e).forEach((function(n){"row__key"!==n&&"is__new"!==n&&(t[n]=e[n])})),t}));n(r)}}},{key:"delete",value:function(e){var t=this.state.data,n=t.filter((function(t){return t.row__key!==e}));this.setState({data:n}),delete this.formSet[e],this.notifyFormChange(n,!0)}},{key:"newRecord",value:function(){var e=this.state.data,t=this.props.fields,n=t||this.admin.inlineFormFields,r=Object(d["a"])(e),a=Object(E["c"])(this.schema,n);a.row__key="temp_id_".concat(this.tmpRowIndex),a.is__new=!0,this.tmpRowIndex+=1,r.push(a),this.setState({data:r})}},{key:"buildColumns",value:function(){var e=this,t=this.props,n=t.fields,r=t.field,a=t.disabled,i=n||this.admin.inlineFormFields||this.admin.formFields.filter((function(e){return(e.name||e)!==r.refField})),o={};this.schema.fields.forEach((function(e){o[e.name]=e}));var c=[];return i.forEach((function(e){var t="string"===typeof e?e:e.name,n=o[t],r={title:e.alias||n.displayName,dataIndex:n.name,sortOrder:!1,onCell:function(){return{field:n,formField:e,editing:!0}}};e.width&&(r.width=e.width),c.push(r)})),a||c.push({title:"\u64cd\u4f5c",render:function(t,n){return e.renderOperationColumn(t,n)}}),c}},{key:"renderOperationColumn",value:function(e,t){var n=this;return g.a.createElement("div",null,g.a.createElement(v["Fragment"],null,g.a.createElement(s["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",onConfirm:function(){return n.delete(t.row__key)}},g.a.createElement("a",null,"\u5220\u9664"))))}},{key:"render",value:function(){var e=this,t=this.props.disabled,n={body:{row:j["c"],cell:w["a"]}},r=this.props,a=r.canAdd,i=r.form,o=r.field.refField,s=this.state.data;return g.a.createElement(y["c"].Provider,{value:this.formSet},g.a.createElement(v["Fragment"],null,s&&s.length||!a?g.a.createElement(x["c"].Provider,{value:Object(u["a"])({},o,i.getFieldsValue())},g.a.createElement(l["a"],{components:n,bordered:!1,dataSource:s,columns:this.buildColumns(),rowClassName:"editable-row",pagination:!1,rowKey:function(e){return e.row__key},onRow:function(n){return{object:n,objectid:Object(C["M"])(n,e.model),model:e.model,parentform:i,onChange:function(t){return e.onRowChange(n.row__key,t)},extraOptions:{disabled:t}}},scroll:{x:"max-content"}})):g.a.createElement(v["Fragment"],null),a&&!t&&g.a.createElement(c["a"],{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:function(){return e.newRecord()},icon:"plus"},"\u65b0\u589e")))}}]),r}(k["a"]))||o)||o)||o);t["a"]=M}).call(this,n("LvDl"))},eljF:function(e,t,n){"use strict";(function(e){var r=n("0Owb"),a=(n("g9YV"),n("wCAj")),i=n("k1fw"),o=n("oBTY"),c=n("q1tI"),l=n.n(c),u=n("QSgb"),s=n("3i6F"),d=n("VW+w"),f=n("NnbD"),p=n("jfUH"),m={Sum:function(e){return e.filter(Boolean).map(String).map(u["Decimal"]).reduce((function(e,t){return e.plus(t)}),new u["Decimal"](0)).toString()},Avg:function(e){return e.filter(Boolean).map(String).map(u["Decimal"]).reduce((function(e,t){return e.plus(t)}),new u["Decimal"](0)).dividedBy(e.length).toString()},Max:function(e){var t;return 0===e.filter((function(e){return void 0!==e})).length?null:null===(t=e.filter((function(e){return void 0!==e})).map(String).map(u["Decimal"]).reduce((function(e,t){return Math.max(e,t)})))||void 0===t?void 0:t.toString()},Min:function(e){var t;return 0===e.filter((function(e){return void 0!==e})).length?null:null===(t=e.filter((function(e){return void 0!==e})).map(String).map(u["Decimal"]).reduce((function(e,t){return Math.min(e,t)})))||void 0===t?void 0:t.toString()}},_=function(t){var n=t.display,c=t.model,u=t.data,_=Object(p["wb"])(),h=function(e,t){return Object(s["h"])(_,c,e,t)},b=Object(d["displayPreprocess"])(n,c,_).filter((function(e){return e.mergeRow}));return l.a.createElement(f["b"],Object(r["a"])({},t,{fetch:function(n){var r=b.map((function(e){return e.name})).map((function(e){return e.replace(".","__")}));r.push.apply(r,Object(o["a"])(n.orderBy)),t.fetch(Object(i["a"])(Object(i["a"])({},e.omit(n,["page","size"])),{},{orderBy:r}))},renderColumn:function(t,n,r){var a=t.fields,i=t.record,o=(null===u||void 0===u?void 0:u.list)||[],c=e.mapValues(a,(function(e){return h(i,e)})),d=function(t){return!e.some(e.mapValues(a,(function(e){return h(o[t],e)})),(function(e,t){return c[t]!==e}))},f=1;if(n.mergeRow)if(r>0&&d(r-1))f=0;else{f=1;while(o[r+f]&&d(r+f))f+=1}return{props:{rowSpan:f},children:l.a.createElement(s["a"],t)}},tableProps:{summary:function(e){if(!e.length)return null;try{return l.a.createElement(a["a"].Summary.Row,null,n.map((function(t){var n=t.summary;return l.a.createElement(a["a"].Summary.Cell,null,n&&l.a.createElement(l.a.Fragment,null,n.prefix,m[n.method](e.map((function(e){return Object(s["h"])(_,c,e,n.field)}))),n.suffix))})))}catch(t){return console.error(t),null}}}}))};t["a"]=function(e){var t=e.display,n=e.model,r=Object(p["wb"])(),a=Object(d["displayPreprocess"])(t,n,r),i=f["b"];return a.some((function(e){return e.summary||e.mergeRow}))&&(i=_),l.a.createElement(i,e)}}).call(this,n("LvDl"))},fNJA:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f}));var r,a=n("jrin"),i=0,o=1,c=2,l=3,u=[i,o,c,l],s=(r={},Object(a["a"])(r,i,{}),Object(a["a"])(r,o,{}),Object(a["a"])(r,c,{}),Object(a["a"])(r,l,{}),r);function d(e,t,n,r){s[e][t]=[n,r]}function f(t,n,r,a,i,c){if(void 0!==i&&0!==i.length&&-1!==u.indexOf(t)){var l=i;if(!Array.isArray(i)){if(!e.isObject(i))return;l=[i]}l.forEach((function(e){var i=e.type,l=e.action,u=e.watchFields,d=void 0===u?[]:u;if(i===t&&(i!==o||-1!==d.indexOf[n])){var f=s[i];-1!==Object.keys(f).indexOf(l)&&f[l][1](a,n,r,e,c)}}))}}}).call(this,n("LvDl"))},fVK0:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r={CHANGE_ADMIN:"change_bsm_config__admin",CHANGE_SETTING:"change_bsm_config__setting",SETTING_CUSTOM_STAFF:"change_custom_staff__member"},a=!1},fapc:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return D}));var r=n("k1fw"),a=n("yKVA"),i=n("879j"),o=(n("5NDa"),n("5rEg")),c=(n("OaEy"),n("2fM7")),l=n("tJVT"),u=n("fWQN"),s=n("mtLc"),d=(n("iQDF"),n("+eQT")),f=n("q1tI"),p=n.n(f),m=n("wd/R"),_=n.n(m),h=n("3V3B"),b=n("jfUH"),v=n("+9YH"),g=d["a"].RangePicker,O=function(t){var n=t.value,r=t.onChange,a=t.date;return p.a.createElement(g,{ranges:{"\u4eca\u5929":[_()().startOf("day"),_()().endOf("day")],"\u672c\u5468":[_()().startOf("week"),_()().endOf("week")],"\u5f53\u6708":[_()().startOf("month"),_()().endOf("month")],"\u8fd1\u4e09\u4e2a\u6708":[_()().subtract(90,"days"),_()().subtract(1,"days")]},showTime:!a,style:{width:"100%"},value:a?n&&[_()(n[0]),_()(n[1]).subtract(1,"day")]:n,onChange:function(t){var n;e.isEmpty(t)||(n=a?[t[0].format("YYYY-MM-DD"),t[1].add(1,"day").format("YYYY-MM-DD")]:t),r(n)}})},y=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.stateInitialValue,i=r.initValue;Object(u["a"])(this,t),this.field=void 0,this.stateInitialValue=void 0,this.initValue=void 0,this.filterConf=void 0,this.operatorMap={string:"icontains",text:"icontains",mref:"in",datetime:"between",date:"between"},this.filterConf=n,this.field=e,this.stateInitialValue=a,this.initValue=i}return Object(s["a"])(t,[{key:"fieldPath",get:function(){var t=this.filterConf;return e.isObject(t)?t.name:t}},{key:"label",get:function(){var e=this.filterConf,t=this.field;return"string"!==typeof e&&e.displayName?e.displayName:t.displayName}},{key:"initialValue",get:function(){var t=this.field,n=this.filterConf,r=this.stateInitialValue,a=this.initValue;if(!e.isObject(n)||!n.choices)return t.choices?a?"number"===typeof t.choices[0][0]?parseInt(a,10):a:void 0:r||void 0}},{key:"getOperator",value:function(t){var n=this.field,r=this.filterConf;if(e.isObject(r)){if(r.operator)return r.operator;if(r.choices)return"="}return n.choices?"in":this.getFieldOperator(t)}},{key:"getFieldOperator",value:function(e){var t=this.field;return this.operatorMap[t.type]||"="}},{key:"commonComponent",get:function(){var t=this.field,n=this.filterConf;if(e.isObject(n)&&n.choices){var r=n.choices,a=r.model,i=r.key,o=void 0===i?Object(b["N"])(a):i,u=r.allow_null,s=void 0!==u&&u;return p.a.createElement(h["a"],{field:{name:t.name,type:"ref",ref:a},idfield:o,nullOption:s})}return t.choices?p.a.createElement(c["a"],{placeholder:"\u672a\u9009\u62e9",mode:"multiple",allowClear:!0},t.choices.map((function(e){var t=Object(l["a"])(e,2),n=t[0],r=t[1];return p.a.createElement(c["a"].Option,{key:n,value:n},r)}))):null}},{key:"component",get:function(){return p.a.createElement(o["a"],{allowClear:!0})}},{key:"id",get:function(){var e=this.field,t=this.fieldPath;return t||e.name}},{key:"getValue",value:function(e){var t=this.field,n=this.filterConf,r=t.refTo;return"string"!==typeof n&&n.operator&&(r=n.choices&&n.choices.idfield),Array.isArray(e)?e.map((function(e){var t;return null!==(t=e[r])&&void 0!==t?t:e})):e&&e[r]||e}},{key:"render",value:function(){var e=this.component,t=this.commonComponent;return t||e}}]),t}(),j=function(e){Object(a["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"initialValue",get:function(){return parseInt(this.stateInitialValue,10)}},{key:"component",get:function(){return p.a.createElement(c["a"],{placeholder:"\u672a\u9009\u62e9",allowClear:!0},p.a.createElement(c["a"].Option,{value:1},"\u662f"),p.a.createElement(c["a"].Option,{value:0},"\u5426"))}}]),n}(y),w=function(e){Object(a["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"getFieldOperator",value:function(){return"in"}},{key:"component",get:function(){var e=this.field,t=this.label;return p.a.createElement(h["a"],{placeholder:"\u641c\u7d22".concat(t),field:Object(r["a"])(Object(r["a"])({},e),{},{type:"mref"}),allowUndefined:!0})}}]),n}(y),E=function(e){Object(a["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"component",get:function(){var e=this.field,t=this.label;return p.a.createElement(h["a"],{placeholder:"\u641c\u7d22".concat(t),field:e})}}]),n}(y),k=function(e){Object(a["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"component",get:function(){var e=this.field;return p.a.createElement(O,{date:"date"===e.type})}}]),n}(y),C=function(e){Object(a["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"initialValue",get:function(){}},{key:"getFieldOperator",value:function(e){var t=this.field;if(t.primaryKey)return"icontains";if(e){var n=Object(l["a"])(e,2),r=n[0],a=n[1],i=function(e){return""===e||null===e};return i(r)?"<=":i(a)?">=":"between"}return"="}},{key:"getValue",value:function(e){if(e){var t=Object(l["a"])(e,2),n=t[0],r=t[1];if(null===n)return r;if(null===r)return n}return e}},{key:"component",get:function(){var e=this.field;return e.primaryKey?p.a.createElement(o["a"],{allowClear:!0}):p.a.createElement(v["a"],null)}}]),n}(y),x={bool:j,ref:w,oref:w,boref:w,mref:E,datetime:k,date:k,integer:C,decimal:C,float:C};function M(e,t,n){var r=t.split("."),a=e.fields.find((function(e){return e.name===r[0]}));if(!a)throw new Error("filter[ ".concat(t," ]\u914d\u7f6e\u9519\u8bef"));if(1===r.length)return a;if(!a)throw new Error("filter[ ".concat(t," ]\u914d\u7f6e\u9519\u8bef"));if(!a.ref)throw new Error("filter[ ".concat(t," ]\u914d\u7f6e\u9519\u8bef\uff0c\u627e\u4e0d\u5230\u5173\u8054\u5b57\u6bb5"));return M(n[a.ref],r.slice(1).join("."),n)}function P(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=a.initialValues,o=a.query,c=M(t[n],e.isObject(r)?r.name:r,t),l=x[c.type]||y;return new l(c,r,{stateInitialValue:null===i||void 0===i?void 0:i[c.name],initValue:null===o||void 0===o?void 0:o[c.name]})}var S=function(){function e(t){Object(u["a"])(this,e),this.dimension=void 0,this.component=function(e){var t=e.onChange,n=e.value;return p.a.createElement(d["a"].MonthPicker,{style:{width:"100%"},onChange:function(e){return t(e?_.a.utc(e.format("YYYY-MM")):void 0)},value:n&&_.a.utc(n)})},this.dimension=t}return Object(s["a"])(e,[{key:"getOperator",value:function(){return"="}},{key:"id",get:function(){return this.dimension.name}},{key:"label",get:function(){return this.dimension.display_name}},{key:"render",value:function(){var e=this.component;return p.a.createElement(e,null)}}]),e}(),A={TruncMonth:S};function D(e,t,n){if(!n.method){var r=M(e[t],n.field,e),o=x[r.type]||y,c=function(e){Object(a["a"])(r,e);var t=Object(i["a"])(r);function r(){return Object(u["a"])(this,r),t.apply(this,arguments)}return Object(s["a"])(r,[{key:"id",get:function(){return n.field}},{key:"label",get:function(){return n.display_name}}]),r}(o);return new c(r,n.field)}if(n.method in A){var l=A[n.method];return new l(n)}throw new Error("".concat(n.method," \u7c7b\u578b\u627e\u4e0d\u5230\u76f8\u5e94\u7684Filter"))}}).call(this,n("LvDl"))},flKx:function(e,t,n){"use strict";n("QV15");var r=n("DAsn"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=n("q1tI"),u=n.n(l),s=n("jfUH"),d=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"getComponent",value:function(){var e=this.props,t=e.currentActionObject,n=e.currentActionParams,r=void 0===n?{}:n,a=e.currentObject,i=e.model,o=e.context,c=t.component;return c?c({model:i,currentActionObject:t,currentObject:a,currentActionParams:r,context:o}):u.a.createElement(l["Fragment"],null)}},{key:"getWidth",value:function(){var e=this.props.currentActionObject.width,t="50%";return e||t}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.context,a=e.currentObject,i=e.model;return u.a.createElement(r["a"],{width:this.getWidth(),onClose:n.hideDrawer,visible:t,key:a&&Object(s["M"])(a,i)},this.getComponent())}}]),n}(l["PureComponent"]);t["a"]=d},gMH0:function(e,t,n){e.exports={"action-danger-btn":"action-danger-btn___1w2WB","action-danger":"action-danger___7GBMh"}},gyLe:function(e,t,n){e.exports=n.p+"static/logo.3ac90302.png"},hJ9C:function(e,t,n){"use strict";var r=n("Utjr");t["a"]=Object(r["d"])((function(){return Promise.all([n.e(39),n.e(30)]).then(n.bind(null,"NKAz"))}),{loading:"\u52a0\u8f7d\u5bcc\u6587\u672c\u7f16\u8f91\u5668..."})},hNBN:function(e,t,n){"use strict";(function(e){var r=n("tJVT"),a=n("q1tI"),i=n.n(a),o=n("Utjr"),c=Object(o["d"])((function(){return n.e(37).then(n.t.bind(null,"ovOe",7))}),{loading:"\u52a0\u8f7dJSON\u7f16\u8f91\u5668..."});function l(t){var n=Object(a["useState"])("\u60a8\u7684json\u4e0d\u5408\u6cd5"),o=Object(r["a"])(n,2),l=o[0],u=o[1],s=function(e){var n=t.onChange;n(JSON.stringify(e.updated_src))},d=t.value,f=t.isEdit,p=void 0===f||f,m=t.isAdd,_=void 0===m||m,h=t.isDelete,b=void 0===h||h;return Object(a["useEffect"])((function(){if(e.isObject(d))u(d);else try{u(JSON.parse(d))}catch(t){u("\u60a8\u7684json\u4e0d\u5408\u6cd5")}}),[d]),i.a.createElement(c,{src:l,iconStyle:"square",onEdit:!!p&&s,onAdd:!!_&&s,onDelete:!!b&&s,collapsed:1})}t["a"]=l}).call(this,n("LvDl"))},iXby:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n("k1fw"),a=n("q1tI"),i=n.n(a),o=n("jfUH"),c=n("VW+w"),l=n("JN3n");function u(t){var n,a=t.Schemas,u=t.Admins,s=t.model,d=t.field,f=t.value,p=t.instance,m=t.displayField,_=Object(o["mb"])(),h=d.refField,b=d.type,v=d.ref,g=d.refTo;if(!f&&Object(o["C"])(b))return"";if(Object(o["C"])(b)){var O=a[v].titleField;return f[O]}var y=e.isObject(m)?m:{},j=y.listView,w=e.isObject(m)?m:{},E=w.params,k=void 0===E?{}:E;if(null!==(n=k)&&void 0!==n&&n.inherit&&(k=Object(r["a"])(Object(r["a"])({},Object(o["I"])(u,v,"list")),k)),e.isEmpty(k))if(j)k=Object(o["I"])(u,v,"list",j);else{var C=Object(o["I"])(u,s,"detail"),x=C.detail;if(x){var M,P=null===x||void 0===x||null===(M=x.sections)||void 0===M?void 0:M.find((function(e){return e.fields[0]===m}));null!==P&&void 0!==P&&P.display&&(k={display:P.display,inlineFormFields:P.display,inlineActions:Object(c["inlineActionsPreprocess"])(P.inlineActions)})}}return e.isEmpty(k)&&(k=Object(o["I"])(u,v,"list")),k=Object(r["a"])(Object(r["a"])({},o["E"]),k),i.a.createElement("div",{style:_?{marginLeft:-16,marginRight:-16}:{}},i.a.createElement(l["a"],{key:"".concat(v,":").concat(h,":").concat(p[g]),refModel:v,refField:h,refValue:p[g],refObject:p,tableConf:k}))}}).call(this,n("LvDl"))},jVA4:function(e,t,n){"use strict";var r=n("PpiC"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=n("q1tI"),u=n.n(l),s=n("G9e4"),d=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.editing,n=e.field,a=e.formField,i=Object(r["a"])(e,["editing","field","formField"]);return u.a.createElement(s["a"].Consumer,null,(function(e){return u.a.createElement("td",i,t?e(n,a):i.children)}))}}]),n}(l["PureComponent"]);t["a"]=d},jfUH:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"N",(function(){return pkField})),__webpack_require__.d(__webpack_exports__,"M",(function(){return pk})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getFieldsFromSchemaByPath})),__webpack_require__.d(__webpack_exports__,"J",(function(){return parseFieldNames})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return renderTemplate})),__webpack_require__.d(__webpack_exports__,"i",(function(){return evalCondition})),__webpack_require__.d(__webpack_exports__,"s",(function(){return getSchema})),__webpack_require__.d(__webpack_exports__,"t",(function(){return getSchemaField})),__webpack_require__.d(__webpack_exports__,"o",(function(){return getModelDisplayName})),__webpack_require__.d(__webpack_exports__,"w",(function(){return getToField})),__webpack_require__.d(__webpack_exports__,"S",(function(){return toField})),__webpack_require__.d(__webpack_exports__,"c",(function(){return checkParent})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getFieldValue})),__webpack_require__.d(__webpack_exports__,"n",(function(){return getIcon})),__webpack_require__.d(__webpack_exports__,"q",(function(){return getModelPermissions})),__webpack_require__.d(__webpack_exports__,"f",(function(){return copy})),__webpack_require__.d(__webpack_exports__,"H",(function(){return matchAndConditions})),__webpack_require__.d(__webpack_exports__,"R",(function(){return singleRefTypes})),__webpack_require__.d(__webpack_exports__,"C",(function(){return isSingleRef})),__webpack_require__.d(__webpack_exports__,"D",(function(){return isSingleRefField})),__webpack_require__.d(__webpack_exports__,"z",(function(){return isMultiRefField})),__webpack_require__.d(__webpack_exports__,"P",(function(){return refTypes})),__webpack_require__.d(__webpack_exports__,"A",(function(){return isRef})),__webpack_require__.d(__webpack_exports__,"B",(function(){return isRefField})),__webpack_require__.d(__webpack_exports__,"r",(function(){return getRefFieldAndPk})),__webpack_require__.d(__webpack_exports__,"F",(function(){return mapShowIfID})),__webpack_require__.d(__webpack_exports__,"x",(function(){return getValueFromPath})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getFieldDef})),__webpack_require__.d(__webpack_exports__,"m",(function(){return getFieldsObjValue})),__webpack_require__.d(__webpack_exports__,"h",(function(){return ddQRcode})),__webpack_require__.d(__webpack_exports__,"v",(function(){return getThumb})),__webpack_require__.d(__webpack_exports__,"O",(function(){return progressMessage})),__webpack_require__.d(__webpack_exports__,"Cb",(function(){return withRoute})),__webpack_require__.d(__webpack_exports__,"pb",(function(){return useParams})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return useLocation})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DvaContextConnect})),__webpack_require__.d(__webpack_exports__,"db",(function(){return useDispatcher})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return useContentDispatcher})),__webpack_require__.d(__webpack_exports__,"xb",(function(){return useSelector})),__webpack_require__.d(__webpack_exports__,"yb",(function(){return useSettings})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return useBSMSettings})),__webpack_require__.d(__webpack_exports__,"X",(function(){return useBSMSetting})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return useCurrentUser})),__webpack_require__.d(__webpack_exports__,"qb",(function(){return usePermissions})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return useModelPermissions})),__webpack_require__.d(__webpack_exports__,"wb",(function(){return useSchemas})),__webpack_require__.d(__webpack_exports__,"tb",(function(){return useSchema})),__webpack_require__.d(__webpack_exports__,"vb",(function(){return useSchemaFields})),__webpack_require__.d(__webpack_exports__,"V",(function(){return useAdmins})),__webpack_require__.d(__webpack_exports__,"W",(function(){return useAdminsWithoutDefault})),__webpack_require__.d(__webpack_exports__,"U",(function(){return useAdmin})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return useFieldPermissions})),__webpack_require__.d(__webpack_exports__,"sb",(function(){return usePkField})),__webpack_require__.d(__webpack_exports__,"rb",(function(){return usePk})),__webpack_require__.d(__webpack_exports__,"Ab",(function(){return useTitleField})),__webpack_require__.d(__webpack_exports__,"zb",(function(){return useTitle})),__webpack_require__.d(__webpack_exports__,"ub",(function(){return useSchemaField})),__webpack_require__.d(__webpack_exports__,"d",(function(){return connectHook})),__webpack_require__.d(__webpack_exports__,"e",(function(){return connectShouldShow})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return useCheckManaged})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return useModelsData})),__webpack_require__.d(__webpack_exports__,"u",(function(){return getServer})),__webpack_require__.d(__webpack_exports__,"Bb",(function(){return useUpload})),__webpack_require__.d(__webpack_exports__,"p",(function(){return getModelFieldsPermission})),__webpack_require__.d(__webpack_exports__,"L",(function(){return permissionConvert})),__webpack_require__.d(__webpack_exports__,"E",(function(){return listViewAttributes})),__webpack_require__.d(__webpack_exports__,"I",(function(){return modelAdminForView})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return useModelAdminForView})),__webpack_require__.d(__webpack_exports__,"g",(function(){return createLightContext})),__webpack_require__.d(__webpack_exports__,"b",(function(){return LightningContext})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return useLightningConfig})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return useGetFieldDef})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return useDisplayPathGetter})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return useDebounce})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return useOnMobile})),__webpack_require__.d(__webpack_exports__,"ob",(function(){return useOnWideScreen})),__webpack_require__.d(__webpack_exports__,"nb",(function(){return useOnNarrowScreen})),__webpack_require__.d(__webpack_exports__,"T",(function(){return useA2SH})),__webpack_require__.d(__webpack_exports__,"y",(function(){return highlightKeyword})),__webpack_require__.d(__webpack_exports__,"K",(function(){return passwordSha256})),__webpack_require__.d(__webpack_exports__,"G",(function(){return mapToId}));var antd3_es_message_style__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("GPKB"),antd3_es_message__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("mFAc"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("yKVA"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("879j"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("fWQN"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("mtLc"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("0Owb"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("PpiC"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("9og8"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tJVT"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("Pv/L"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("k1fw"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("WmNS"),_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_12__),react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__),dva__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("/MKj"),memoize_one__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("Wwog"),react_router_dom__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("WHYC"),crypto_js_sha256__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("lPiR"),crypto_js_sha256__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(crypto_js_sha256__WEBPACK_IMPORTED_MODULE_17__),js_cookie__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("hS4W"),js_cookie__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_18__),_bsm_service__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("mmaM"),_config__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("fVK0"),lodash__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("LvDl"),lodash__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_21__),DEFAULT_PK="id",pkField=function(e,t){if(e){var n=t||window.g_app._store.getState(),r=n.content.schemas;if(lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isEmpty(r)||lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isEmpty(r[e]))return DEFAULT_PK;var a=r[e].fields.find((function(e){return e.primaryKey}));return a?a.name:DEFAULT_PK}return DEFAULT_PK};function pk(e,t){var n=pkField(t);return n?e[n]:e[DEFAULT_PK]}function getFieldsFromSchemaByPath(e,t,n){var r=n,a=[];return t.split(".").forEach((function(n){if(!n)throw new Error("\u8def\u5f84".concat(t,"\u4e0d\u6b63\u786e"));var i=e[r].fields.find((function(e){return e.name===n}));if(!i)throw new Error("\u8def\u5f84 [".concat(t,"] \u4e0d\u6b63\u786e\uff0cmodel [").concat(r,"] \u4e2d\u627e\u4e0d\u5230 [").concat(n,"]"));a.push(i),r=i.ref})),a}function parseFieldNames(e){var t=/\$\{[^}]+\}/g,n=e.match(t);if(!n)return[];var r=n.map((function(e){return e.replace("${","").replace("}","")}));return r}function renderTemplate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.replace(/\$\{(\w+)\}/g,(function(e,n){var r;return null!==(r=t(n))&&void 0!==r?r:""}))}function evalCondition(statement,resolver){var showExpress=statement.replace(/\$\{([\w\.]+)\}/g,(function(e,t){return JSON.stringify(resolver(t))}));try{return eval("(".concat(showExpress,")"))}catch(_unused){return}}function getSchema(e,t){var n=window.g_app._store.getState(),r=n.content.schemas,a=t||r;if(!(e in a)){var i=new Error("\u627e\u4e0d\u5230\u6a21\u578b\uff1a".concat(e));return console.error(i),null}return a[e]}function getSchemaField(e,t,n){var r=getSchema(e,n);if(r){var a=r.fields.find((function(e){return e.name===t.split(".")[0]}));return a?t.includes(".")&&a.ref?getSchemaField(a.ref,t.split(".").slice(1).join("."),n):a:null}return null}function getModelDisplayName(e,t){var n=getSchema(e,t);return n&&n.displayName}function getAdmin(e){var t=window.g_app._store.getState(),n=t.content.adminConfig;if(!(e in n)){var r=new Error("\u627e\u4e0d\u5230Admin\u914d\u7f6e\uff1a".concat(e));return console.error(r),null}return n[e]}function getUserInfo(){var e=window.g_app._store.getState(),t=e.user.currentUser;return t}var getToField=function(e,t,n){var r=getSchemaField(e,t,n);return r&&r.refTo};function toField(e,t,n,r){return e[getToField(t,n,r)]}var sortList=function(e,t,n,r){var a=e[r],i=t[r],o=a<i||a===i&&e.id<t.id;return n.map((function(n){var a=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])({},n);return n.parent!==t.parent||(n[r]>=i&&n.id!==e.id&&(n[r]===i?n.id>t.id?a[r]+=2:n.id!==t.id||o||(a[r]+=2):a[r]+=2),n.id===e.id&&(a[r]=i+1)),a}))},getAllData=Object(memoize_one__WEBPACK_IMPORTED_MODULE_15__["a"])((function(e){var t=[];function n(e){e.forEach((function(e){t.push(e),lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isEmpty(e.children)||n(e.children)}))}return n(e),t})),checkParent=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.parent,a=getAllData(n),i=lodash__WEBPACK_IMPORTED_MODULE_21___default.a.keyBy(a,"id"),o=0,c=!1;while(r&&o<a.length){if(o+=1,r===e.id)return c=!0,!0;r=i["".concat(r)].parent}return c},getFieldValue=function e(t,n){return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isEmpty(n)?n:t.includes(".")?lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isArray(n)?n.map((function(n){return e(t.split(".").slice(1).join("."),n[t.split(".")[0]])})):e(t.split(".").slice(1).join("."),n[t.split(".")[0]]):lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isArray(n)?n.map((function(e){return e[t]})):n[t]},getIcon=Object(memoize_one__WEBPACK_IMPORTED_MODULE_15__["a"])((function(e){var t=e.split("__"),n=t[0],r=t[1],a=t[2],i={};return n&&(i.type=n),r&&(i.theme=r),"twoTone"===r&&a&&(i.twoToneColor=a),i})),getModelPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.g_app._store.getState().user.currentUser.permissions;return t?t.filter((function(t){return t.endsWith("_".concat(e))})).map((function(e){return e.split("_")[0]})):[]};function getTypeValue(e,t){var n={False:!1,True:!0},r={string:t,bool:t in n&&n[t]},a=e in r?r[e]:t;return a}function copy(e){var t=document.createElement("textarea");t.innerText=e,t.innerHTML=t.innerHTML.replace(/<br>/g,"\n"),document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}function matchCondition(e,t,n,r){var a=e.field,i=e.operator,o=void 0===i?"=":i,c=e.value,l=lodash__WEBPACK_IMPORTED_MODULE_21___default.a.get(t,a);if("isnull"===o)return c?null===l:null!==l;if(lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isObject(l)){var u,s,d=null===(u=n[r])||void 0===u||null===(s=u.fields)||void 0===s?void 0:s.find((function(e){return e.name===a}));return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isArray(l)?(l=l.map((function(e){return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isObject(e)?pk(e,d.ref):e})),l.reduce((function(e,t){return e||c.includes(t)}),!1)):(l=pk(l,d.ref),null===c||void 0===c?void 0:c.includes(l))}return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isArray(c)?c.includes(l):"="===o?l===c:">"===o?l>c:"<"===o?l<c:">="===o?l>=c:"<="===o?l<=c:"!="===o&&l!==c}function matchAndConditions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return e.reduce((function(e,a){return!1!==e&&(e&&matchCondition(a,t,n,r))}),!0)}function getModelsData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=[];return Object.keys(e).forEach((function(r){var a=r.split("__");if(t(r)){var i=n.find((function(e){return e.value===a[0]}));i?i.children.push({value:a[1],label:"".concat(a[1],"(").concat(e[r].displayName,")")}):n.push({value:a[0],label:a[0],children:[{value:a[1],label:"".concat(a[1],"(").concat(e[r].displayName,")")}]})}})),n}var singleRefTypes=["ref","oref","boref"],isSingleRef=function(e){return singleRefTypes.includes(e)},isSingleRefField=function(e){return isSingleRef(e.type)},multiRefTypes=["mref","bref"],isMultiRef=function(e){return multiRefTypes.includes(e)},isMultiRefField=function(e){return isMultiRef(e.type)},refTypes=singleRefTypes.concat(multiRefTypes),isRef=function(e){return refTypes.includes(e)},isRefField=function(e){return isRef(null===e||void 0===e?void 0:e.type)};function getRefFieldAndPk(e,t,n,r){var a=getSchemaField(e,t,r);if(!isSingleRefField(a))return{id:null,value:null,schemaField:a};var i=getFieldValue(t,n)||{},o=i[pkField(a.ref)];return{id:o,value:i,schemaField:a}}function mapShowIfID(e,t,n){return e.map((function(e){var r=e,a=getSchemaField(t,r.field,n);return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isArray(r.value)&&(r.value=r.value.map((function(e){return pk(e,a.ref)}))),r}))}function getValueFromPath(e,t){if(!t)return null;if(!e)return"";var n=e.split("."),r=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_10__["a"])(n),a=r[0],i=r.slice(1),o=t[a];return i.length?getValueFromPath(i.join("."),o):o}function getFieldDef(e,t,n){if(n[e]){var r=n[e].fields.find((function(e){return e.name===t.split(".")[0]}));return t.includes(".")?getFieldDef(r.ref,t.split(".").slice(1).join("."),n):r}}function getFieldsObjValue(e,t){var n=getFieldValue(e,t);return n?n.flat(e.length).filter((function(e){return void 0!==e})):[]}function ddQRcode(){var e=window.g_app._store.getState(),t=e.bsmSetting,n=t.dingding_flexible_login_redirect_uri,r=t.dingding_flexible_login_app_key,a=encodeURIComponent(n),i="https://oapi.dingtalk.com/connect/qrconnect?appid=".concat(r,"&response_type=code&scope=snsapi_login&state=STATE&redirect_uri=").concat(a);window.location.href=i}var thumbHandler=[],registerThumbHandler=function(e){thumbHandler.push(e)},getThumb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,r=void 0===n?"fill":n,a=t.width,i=void 0===a?100:a,o=t.height,c=void 0===o?100:o,l=t.uploadProvider,u=void 0===l?void 0:l;if(null===e||void 0===e)return e;for(var s=lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isString(e)?lodash__WEBPACK_IMPORTED_MODULE_21___default.a.split(e,"#"):[e],d=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_9__["a"])(s,1),f=d[0],p=0;p<thumbHandler.length;p+=1)try{var m=thumbHandler[p](f,{width:i,height:c,uploadProvider:u});if(m)return m}catch(h){console.error(h,"thumbHandler error")}if(!1===u)return f;var _={cos:"".concat(f,"?imageView2/").concat("lfit"===r?2:1,"/w/").concat(i,"/h/").concat(c),oss:"".concat(f,"?x-oss-process=image/resize,m_").concat(r,",h_").concat(c,",w_").concat(i)};return _[u]?_[u]:f.includes(".myqcloud.com")?_.cos:f.includes(".aliyuncs.com")?_.oss:f};function progressMessage(e,t){return _progressMessage.apply(this,arguments)}function _progressMessage(){return _progressMessage=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_8__["a"])(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_12___default.a.mark((function e(t,n){var r,a,i,o,c,l,u;return _ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_12___default.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.title,a=n.key,i=n.success,o=n.error,c=lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isString(r)?r:"",l=antd3_es_message__WEBPACK_IMPORTED_MODULE_1__["a"].loading({content:"".concat(c,"\u6267\u884c\u4e2d"),key:a,duration:0}),e.prev=3,e.next=6,t;case 6:return u=e.sent,i?(l(),i(u)):antd3_es_message__WEBPACK_IMPORTED_MODULE_1__["a"].success({content:lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isString(u)?u:"".concat(c,"\u64cd\u4f5c\u6210\u529f"),key:a}),e.abrupt("return",u);case 11:throw e.prev=11,e.t0=e["catch"](3),console.error(e.t0),o?(l(),o(e.t0)):antd3_es_message__WEBPACK_IMPORTED_MODULE_1__["a"].error({content:lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isString(e.t0)?e.t0:"".concat(c,"\u64cd\u4f5c\u5931\u8d25"),key:a}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,11]])}))),_progressMessage.apply(this,arguments)}var RouteContext=Object(react__WEBPACK_IMPORTED_MODULE_13__["createContext"])({match:{params:{}},location:{query:""}}),RouteProvider=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_16__["k"])((function(e){var t=e.match,n=e.history,r=e.location,a=e.children;return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(RouteContext.Provider,{value:{match:t,history:n,location:r}},a)})),withRoute=function(e){return function(t){return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(RouteProvider,null,react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(e,t))}},useRouteContext=function(){return Object(react__WEBPACK_IMPORTED_MODULE_13__["useContext"])(RouteContext)},useParams=function(){return useRouteContext().match.params},useLocation=function(){return useRouteContext().location},DvaContext=Object(react__WEBPACK_IMPORTED_MODULE_13__["createContext"])({}),DvaContextConnect=function(e){return Object(dva__WEBPACK_IMPORTED_MODULE_14__["c"])((function(e){return{_dvaState:e}}))((function(t){var n=t._dvaState,r=t.dispatch,a=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_7__["a"])(t,["_dvaState","dispatch"]);return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(DvaContext.Provider,{value:Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])(Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])({},n),{},{$$dispatch$$:r})},react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(e,a))}))},useDispatcher=function(){return Object(react__WEBPACK_IMPORTED_MODULE_13__["useContext"])(DvaContext).$$dispatch$$},useContentDispatcher=function(e){var t=useDispatcher();return Object(react__WEBPACK_IMPORTED_MODULE_13__["useCallback"])((function(n){return t({type:"content/".concat(e),payload:n})}),[e,t])},useSelector=function(e){return e(Object(react__WEBPACK_IMPORTED_MODULE_13__["useContext"])(DvaContext))},useSettings=function(e){return useSelector((function(t){var n=t.setting;return null===n||void 0===n?void 0:n[e]}))},useBSMSettings=function(){return useSelector((function(e){var t=e.bsmSetting;return t}))},useBSMSetting=function(e){var t;return null===(t=useBSMSettings())||void 0===t?void 0:t[e]},useCurrentUser=function(){return useSelector((function(e){var t=e.user.currentUser;return t}))},usePermissions=function(){var e;return null===(e=useCurrentUser())||void 0===e?void 0:e.permissions},useModelPermissions=function(e){var t=usePermissions();return t&&getModelPermissions(e,t)},useModelList=function(e){return useSelector((function(t){var n,r=t.content.data;return null===(n=r[e])||void 0===n?void 0:n.list}))},useSchemas=function(){return useSelector((function(e){var t=e.content.schemas;return t}))},useSchema=function(e){return useSchemas()[e]},useSchemaFields=function(e){var t;return null===(t=useSchema(e))||void 0===t?void 0:t.fields},AdminContext=react__WEBPACK_IMPORTED_MODULE_13___default.a.createContext({}),ExtendAdmin=AdminContext.Provider,useAdmins=function(){var e=useSelector((function(e){var t=e.content.adminConfig;return t})),t=Object(react__WEBPACK_IMPORTED_MODULE_13__["useContext"])(AdminContext);return Object(react__WEBPACK_IMPORTED_MODULE_13__["useMemo"])((function(){return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isFunction(t)?t(e):lodash__WEBPACK_IMPORTED_MODULE_21___default.a.merge(e,t)}),[e,t])},useAdminsWithoutDefault=function(){return useSelector((function(e){var t=e.content.adminWithoutDefault;return t}))},useAdmin=function(e){return useAdmins()[e]},useFieldPermissions=function(e){var t;return(null===(t=useAdmin(e))||void 0===t?void 0:t.field_permissions)||[]},usePkField=function(e){return pkField(e,Object(react__WEBPACK_IMPORTED_MODULE_13__["useContext"])(DvaContext))},usePk=function(e){var t=usePkField(e);return function(e){return t?e[t]:e[DEFAULT_PK]}},useTitleField=function(e){var t;return null===(t=useSchema(e))||void 0===t?void 0:t.titleField},useTitle=function(e){var t=useTitleField(e);return function(e){return e[t]}},useFieldsFromSchemaByPath=function(e){var t=useSchemas();return function(n){return getFieldsFromSchemaByPath(t,n,e)}},useSchemaField=function(e){var t=useSchemas();return function(n){return getSchemaField(e,n,t)}},connectHook=function(e){return function(t){return function(n){return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(t,Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__["a"])({},e(n),n))}}},connectShouldShow=function(e){return function(t){return function(n){return n[e]?react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(t,n):null}}},BSM_EXPORT_APPS=["api_db","contenttypes","meta","bsm_config","auth","admin","api_basebone","guardian","trigger_core","db_tool","chart","member","shield"],checkModelManaged=function(e){var t=function(t){return e.startsWith("".concat(t,"__"))};return!BSM_EXPORT_APPS.some(t)},useCheckManaged=function(e){return checkModelManaged(e,useModelList("meta__app"))};function useModelsData(){var e=useSchemas();return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isEmpty(e)?[]:getModelsData(e,useCheckManaged)}function getRanStr(){var e=(+new Date).toString(36)+Math.random().toString(36).slice(2);return e}var fileToName=function(e){return"".concat(e.uid,"/").concat(e.name)},UploadProvider=function(){function e(t){Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__["a"])(this,e),this.token=void 0,this.token=t}return Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__["a"])(e,[{key:"host",get:function(){return this.token.host}},{key:"getUrl",value:function(e){return"".concat(this.token.host,"/").concat(this.token.dir).concat("/"===this.token.dir.substring(this.token.dir.length-1)?"":"/").concat(e)}},{key:"getFormData",value:function(e){var t=this.token.dir,n="".concat(t).concat("/"===t.substring(t.length-1)?"":"/").concat(e);return Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])(Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])({},lodash__WEBPACK_IMPORTED_MODULE_21___default.a.omit(this.token,["host","dir"])),{},{key:n})}}]),e}(),FileStorageProvider=function(e){Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__["a"])(n,e);var t=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__["a"])(n);function n(){return Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__["a"])(this,n),t.apply(this,arguments)}return Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__["a"])(n,[{key:"host",get:function(){return"/basebone/storage/upload "}},{key:"getUrl",value:function(e){return"/basebone/storage/file/".concat(e)}},{key:"getFormData",value:function(e){return{key:e,policy:this.token.policy,csrfmiddlewaretoken:js_cookie__WEBPACK_IMPORTED_MODULE_18___default.a.get("csrftoken")}}}]),n}(UploadProvider),providers={file_storage:FileStorageProvider,oss:UploadProvider,cos:UploadProvider,s3:UploadProvider};function getServer(e,t){var n=providers[e],r=new n(t);return{getUrl:function(t){return"".concat(r.getUrl(fileToName(t)),"#").concat(e)},getFormData:function(e){return r.getFormData(fileToName(e))},host:r.host}}function useUpload(){var e=Object(react__WEBPACK_IMPORTED_MODULE_13__["useState"])({}),t=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_9__["a"])(e,2),n=t[0],r=n.provider,a=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_7__["a"])(n,["provider"]),i=t[1],o=r?getServer(r,a):{host:""},c=o.getUrl,l=o.getFormData,u=o.host;return{init:function(){return Object(_bsm_service__WEBPACK_IMPORTED_MODULE_19__["getUploadToken"])().then(i)},uploadHost:u,formData:l,getUrl:c}}function getModelFieldsPermission(e){var t,n,r=getSchema(e),a=(null===(t=getAdmin(e))||void 0===t?void 0:t.field_permissions)||[],i=getUserInfo(),o={};return null===r||void 0===r||null===(n=r.fields)||void 0===n||n.forEach((function(e){o[e.name]={read:!0,write:!0}})),a.forEach((function(e){i.groups.includes(e.group)&&(o[e.field]=e)})),o}function permissionConvert(e){var t=e.split(".")[1].split("_")[0];return["view","change","add","delete"].includes(t)&&e.split(".")[1].split("_").length>=2?"".concat(t,"_").concat(e.split(".")[0],"__").concat(e.split(".")[1].split("_").slice(1).join("_")):"".concat(e.split(".")[1],"__").concat(e.split(".")[0])}var viewKey={list:"listViews",detail:"detailViews",form:"formViews",export:"exportViews",import:"importViews"},listViewAttributes={display:[],filter:[],modalForm:!0,modalDetail:!1,tableActions:[],actions:[],inlineActions:[],sortable:[],orderBy:[],filterLayout:"default",listStyle:"",defaultFilter:[],listTitle:"",display_in_tree:!1,maxInlineActions:3,tableProps:{}},detailViewAttributes={detailFields:[],details:[],detailTitle:"",detailLayout:""},formViewAttributes={formFields:[],formLayout:"",inline_form_fields:[],formTitle:""},defaultAttributesForView={list:listViewAttributes,form:formViewAttributes,detail:detailViewAttributes};function modelAdminForView(e,t,n,r){var a=e[t]||{};if(!r)return a;var i=viewKey[n];if(a[i]&&a[i][r]){var o=a[i][r]||{};if(!0===o.inherit)return Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])(Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])({},a),o);var c=defaultAttributesForView[n];return Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])(Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])(Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_11__["a"])({},a),c),o)}return a||{}}var useModelAdminForView=function(e,t,n){return modelAdminForView(useAdmins(),e,t,n)},Ctx=function(){function e(){Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__["a"])(this,e),this.displayWidgets={},this.displayWidgetName={},this.displayWidgetMapping=[],this.formWidgets={},this.formWidgetNames={},this.formTypeMapWidget=[],this.inlineActions={},this.tableActions={}}return Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__["a"])(e,[{key:"displayWidget",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,a=n.type;if(!e)throw new Error("\u6ce8\u518c\u663e\u793a\u7ec4\u4ef6name\u662f\u5fc5\u586b\u7684");return function(n){n&&t.addDisplayWidget(e,n,r,a)}}},{key:"formWidget",value:function(e,t){var n=this,r=t.displayName,a=t.type;if(!e)throw new Error("\u6ce8\u518c\u8868\u5355\u7ec4\u4ef6\u7684name\u662f\u5fc5\u586b\u7684");return function(t){t&&n.addFormWidget(e,t,r,a)}}},{key:"inlineAction",value:function(e,t){var n=this;return t&&(this.tableActions[e]=t),function(t){n.inlineActions[e]=t}}},{key:"tableAction",value:function(e,t){var n=this;return t&&(this.tableActions[e]=t),function(t){n.tableActions[e]=t}}},{key:"addDisplayWidget",value:function(e,t,n,r){this.displayWidgets[e]=t,this.displayWidgetName[e]=n||e,r&&this.displayWidgetMapping.push([e,r])}},{key:"addFormWidget",value:function(e,t,n,r){this.formWidgets[e]=t,this.formWidgetNames[e]=n||e,r&&this.formTypeMapWidget.push([e,r])}}]),e}();function createLightContext(){return new Ctx}var LightningContext=Object(react__WEBPACK_IMPORTED_MODULE_13__["createContext"])(createLightContext());function useLightningConfig(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return e(Object(react__WEBPACK_IMPORTED_MODULE_13__["useContext"])(LightningContext))}function useGetFieldDef(e){var t=useSchemas();return Object(react__WEBPACK_IMPORTED_MODULE_13__["useCallback"])((function(n){return getFieldDef(e,n,t)}),[e,t])}function useGetFieldsFromSchemaByPath(e){var t=useSchemas();return function(n){return getFieldsFromSchemaByPath(t,n,e)}}function useDisplayPathGetter(e){var t=useGetFieldsFromSchemaByPath(e);return function(e){return t(e).map((function(e){return e.displayName}))}}var useDebounce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.debounceTimeout,a=void 0===r?500:r,i=react__WEBPACK_IMPORTED_MODULE_13___default.a.useState(!1),o=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_9__["a"])(i,2),c=o[0],l=o[1],u=react__WEBPACK_IMPORTED_MODULE_13___default.a.useRef(0),s=react__WEBPACK_IMPORTED_MODULE_13___default.a.useMemo((function(){var n=function(){var n=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_8__["a"])(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_12___default.a.mark((function n(r){var a,i;return _ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_12___default.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return u.current+=1,a=u.current,t([]),l(!0),n.next=6,e(r);case 6:if(i=n.sent,a===u.current){n.next=9;break}return n.abrupt("return");case 9:t(i,r),l(!1);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.debounce(n,a)}),[e,a]);return[s,c]},useListener=function(e,t,n){Object(react__WEBPACK_IMPORTED_MODULE_13__["useEffect"])((function(){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}}),[])},getWindowWidth=function(){return window.innerWidth},useWindowWidth=function(){var e=Object(react__WEBPACK_IMPORTED_MODULE_13__["useReducer"])(getWindowWidth,getWindowWidth()),t=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_9__["a"])(e,2),n=t[0],r=t[1];return useListener(window,"resize",lodash__WEBPACK_IMPORTED_MODULE_21___default.a.throttle(r,200)),n},useOnMobile=function(){return useWindowWidth()<576},useOnWideScreen=function(){return useWindowWidth()>=992},useOnNarrowScreen=function(){return useWindowWidth()<767},useA2SH=function(){var e=Object(react__WEBPACK_IMPORTED_MODULE_13__["useState"])(),t=Object(_ssd_db_tool_admin_develop_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_9__["a"])(e,2),n=t[0],r=t[1];return useListener(window,"beforeinstallprompt",r),[n,r]};function highlightKeyword(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase());return n<0?e:[e.slice(0,n),react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("span",{style:{color:"red"}},e.slice(n,n+t.length)),e.slice(n+t.length)]}var useDisplayNameOfModel=function(){var e=useSchemas();return function(t){var n;return null===(n=e[t])||void 0===n?void 0:n.displayName}};function passwordSha256(e){return _config__WEBPACK_IMPORTED_MODULE_20__["a"]?crypto_js_sha256__WEBPACK_IMPORTED_MODULE_17___default()(":".concat(e,"@gitmen")).toString():e}var mapToId=function e(t,n){return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.mapValues(t,(function(t,r){var a=n.fields,i=a.find((function(e){return e.name===r}));if(!i)return t;if(["mref","ref","oref"].includes(i.type)){if(Array.isArray(t))return t.map((function(e){var t;return null!==(t=pk(e,i.refTo))&&void 0!==t?t:e}));if(lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isObject(t)){if(i.refTo in t)return t[i.refTo];if(pkField(i.ref)in t)return pk(t,i.ref)}}else{if("bref"===i.type)return null===t||void 0===t?void 0:t.map((function(t){return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isObject(t)?e(t,getSchema(i.ref)):t}));if("boref"===i.type)return lodash__WEBPACK_IMPORTED_MODULE_21___default.a.isObject(t)?e(t,getSchema(i.ref)):t}return t}))}},juLU:function(e,t,n){"use strict";(function(e){n("2qtc");var r=n("kLXV"),a=n("0Owb"),i=(n("eNCU"),n("pjJH")),o=n("tJVT"),c=n("q1tI"),l=n.n(c),u=n("BGR+"),s=n("jfUH"),d=n("0TMk"),f=function(t){var n=Object(c["useState"])(),f=Object(o["a"])(n,2),p=f[0],m=f[1],_=Object(c["useState"])(!1),h=Object(o["a"])(_,2),b=h[0],v=h[1],g=t.Widget,O=t.value,y=t.field,j=t.onChange,w=t.nestedForm,E=void 0===w?[]:w;"boolean"===typeof E&&(E=E?["add","edit"]:[]);var k=y.ref,C=Object(s["s"])(k),x=function(){v(!1)},M=function(){v(!1)},P=function(){if(!e.isEmpty(O)){var t=Object(s["M"])(O,k);m(t),v(!0)}},S=function(){m(p),v(!0),m(void 0)},A=function(){var t,n=O;return t=!e.isEmpty(n)&&p?"".concat(n[C.titleField]?"\u3010".concat(n[C.titleField],"\u3011- "):"","\u7f16\u8f91").concat(C.displayName):"\u65b0\u5efa".concat(C.displayName),t},D=Object(s["q"])(y.ref),F={};O||(F.partialupdate=!0);var T=Object(u["a"])(t,["Widget","nestedForm","parentPk","model"]);return l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{style:{flexGrow:2}},l.a.createElement(g,T)),l.a.createElement("div",{style:{display:"flex"}},E.includes("add")&&D.includes("add")&&l.a.createElement(i["a"],{style:{marginLeft:8},onClick:S,icon:"plus"}),E.includes("edit")&&D.includes("change")&&!e.isEmpty(O)&&l.a.createElement(i["a"],{style:{marginLeft:8},onClick:P,icon:"form"})),l.a.createElement(r["a"],{title:A(),width:"60%",destroyOnClose:!0,visible:b,closable:!0,keyboard:!0,onOk:x,onCancel:M,footer:null},l.a.createElement(d["a"],Object(a["a"])({model:k,objectid:p,onCreate:function(e){j(e),M()},onUpdate:function(e){j(e),M()}},F))))};t["a"]=f}).call(this,n("LvDl"))},jxO0:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n("tJVT"),a=n("oBTY"),i=n("jfUH"),o=function t(n){return e.some(n,(function(n){return n.children?t(n.children):e.isUndefined(n.value)}))},c=function(t,n,c,l,u){var s=function(t){var r=n[t];if(r instanceof Array)return r.map((function(e){return e instanceof Object?Object(i["S"])(e,c,t):e}));if(r instanceof Object)return Object(i["S"])(r,c,t);if(void 0===r){if(t.startsWith("instance."))return l[t.slice("instance.".length)];var a=e.get(n,t);return void 0!==a?a:e.get(u,t)}return r},d=[];if(t)if(Array.isArray(t)){var f=function e(t){var n=t.field,r=t.operator,a=t.value,i=t.variable,o=t.children;return o?{operator:r,children:o.map(e)}:{field:n,operator:r,value:i?s(i):a}};d.push.apply(d,Object(a["a"])(t.map(f)))}else t.split("&").forEach((function(e){var t=e.includes("=")?e.split("="):[e.slice(2,-1),e],n=Object(r["a"])(t,2),a=n[0],i=n[1],o=i.startsWith("$")?s(i.slice(2,-1)):i;d.push({field:a,operator:"=",value:o})}));return t&&o(d)?null:d}}).call(this,n("LvDl"))},k5tp:function(e,t,n){"use strict";(function(e){n("2qtc");var r,a,i,o,c=n("kLXV"),l=n("k1fw"),u=(n("eE3J"),n("GSZB")),s=n("oBTY"),d=n("fWQN"),f=n("mtLc"),p=n("yKVA"),m=n("879j"),_=(n("5Dmo"),n("3S7+")),h=(n("+BJd"),n("mr32")),b=n("PpiC"),v=n("q1tI"),g=n.n(v),O=n("AAgL"),y=n("sMR+"),j=n("jfUH"),w=n("mmaM"),E=n("CsTM"),k=n.n(E),C=n("jxO0"),x=n("Utjr"),M=function(e){var t=e.tag,n=e.model,r=Object(b["a"])(e,["tag","model"]),a=Object(j["zb"])(n),i=a(t).length>20,o=g.a.createElement(h["a"],r,i?"".concat(a(t).slice(0,20),"..."):a(t));return i?g.a.createElement(_["a"],{title:a(t)},o):o},P=(r=Object(j["d"])((function(){return{relativeFormContext:Object(v["useContext"])(x["c"]),schemas:Object(j["wb"])(),adminConfig:Object(j["V"])()}})),a=Reflect.metadata("design:type",Function),i=Reflect.metadata("design:paramtypes",[void 0]),r(o=a(o=i(o=function(t){Object(p["a"])(r,t);var n=Object(m["a"])(r);function r(t){var a;return Object(d["a"])(this,r),a=n.call(this,t),a.getTags=function(t){return e.isArray(t)?t:e.isPlainObject(t)?[t]:[]},a.getInitRow=function(t){return e.isArray(t)?t:e.isPlainObject(t)?[t]:[]},a.getInitKeys=function(t){return e.isArray(t)?t.map((function(e){return Object(j["M"])(e,a.refModel)})):e.isPlainObject(t)?[Object(j["M"])(t,a.refModel)]:[]},a.handleClose=function(e){var t=Object(j["M"])(e,a.refModel),n=a.state.tags.filter((function(e){return Object(j["M"])(e,a.refModel)!==t})),r=[];"checkbox"===a.state.tableType&&(r=a.state.selectedRows.filter((function(e){return Object(j["M"])(e,a.refModel)!==t})));var i=a.getInitKeys(r);a.doChange("radio"===a.state.tableType?null:r),a.setState({tags:n,selectedRows:r,selectedKeys:i})},a.onClickTag=function(){"radio"===a.state.tableType&&a.setState({visible:!0})},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){var e=a.state.selectedRows;a.doChange(e),a.setState({confirmLoading:!0,tags:a.getTags(e)}),setTimeout((function(){a.setState({visible:!1,confirmLoading:!1})}),1e3)},a.handleCancel=function(){var e=a.props.value;a.setState({visible:!1,selectedKeys:a.getInitKeys(e),selectedRows:a.getInitRow(e)})},a.onSelectChange=function(e,t){a.setState({selectedKeys:e,selectedRows:"radio"===a.state.tableType?t[0]:t})},a.onTableRow=function(e){var t=a.state.tableType;return{onClick:function(){var n=Object(j["M"])(e,a.refModel);"radio"===t?a.setState({selectedKeys:[n],selectedRows:e}):"checkbox"===t&&a.setState((function(t){var r=t.selectedKeys,i=t.selectedRows;return r.includes(n)?{selectedKeys:r.filter((function(e){return e!==n})),selectedRows:i.filter((function(e){return Object(j["M"])(e,a.refModel)!==n}))}:{selectedKeys:[].concat(Object(s["a"])(r),[n]),selectedRows:[].concat(Object(s["a"])(i),[e])}}))}}},a.state={tags:a.getTags(t.value)||[],visible:!1,confirmLoading:!1,selectedKeys:a.getInitKeys(t.value),selectedRows:a.getInitRow(t.value),tableType:"",data:{list:[]},fetching:!1},a}return Object(f["a"])(r,[{key:"refModel",get:function(){var t=this.props,n=t.field,r=t.choices;return e.isPlainObject(r)?r.model:n.ref}},{key:"modelAdmin",get:function(){var e=this.props.adminConfig,t=this.refModel;return e[t]||{}}},{key:"isPointer",get:function(){return"radio"===this.state.tableType?k.a.clickable:""}},{key:"doChange",value:function(t){var n=this.props.onChange;n(e.isArray(t)?t.map(this.pickPkAndTitle.bind(this)):this.pickPkAndTitle(t))}},{key:"pickPkAndTitle",value:function(t){var n;if(!t)return null;var r=Object(j["N"])(this.refModel),a=this.props.schemas,i=null===(n=a[this.refModel])||void 0===n?void 0:n.titleField;return e.pick(t,[r,i])}},{key:"render",value:function(){var e=this,t=this.state,n=t.tags,r=t.visible,a=t.confirmLoading,i=t.selectedKeys,o=t.tableType,d=t.data,f=void 0===d?{}:d,p=t.fetching,m=this.props.field,_=this.refModel;f.pagination&&(f.pagination.showTotal=function(e){return"\u5171".concat(e,"\u6761\u6570\u636e")});var b=m.name,v=this.modelAdmin,O=v.display,E=void 0===O?[Object(j["N"])(_)]:O,x=v.sortable,P=Object(y["a"])(_);return"ref"===m.type?this.setState({tableType:"radio"}):"mref"===m.type&&this.setState({tableType:"checkbox"}),g.a.createElement("div",null,n.map((function(t,n){return g.a.createElement(M,{key:Object(j["M"])(t,e.refModel),className:e.isPointer,closable:-1!==n,onClose:function(){return e.handleClose(t)},onClick:e.onClickTag,tag:t,model:e.refModel})})),n.length<1||"radio"!==o?g.a.createElement(h["a"],{onClick:this.showModal,style:{background:"white",cursor:"pointer"}},g.a.createElement(u["a"],{type:"plus"})," \u9009 \u62e9"):null,g.a.createElement(c["a"],{width:"80%",title:b,visible:r,onOk:this.handleOk,confirmLoading:a,onCancel:this.handleCancel,destroyOnClose:!0},g.a.createElement(P,{fetchOnMounted:!0,fetch:function(t){var n=e.props,r=n.monitormodel,a=n.form,i=n.choicesFilter,o=n.instance,c=n.relativeFormContext,u=Object(C["a"])(i,a.getFieldsValue(),r,o,c);return u?(e.setState({fetching:!0}),Object(w["queryContent"])(Object(l["a"])(Object(l["a"])({},t),{},{filters:[].concat(Object(s["a"])(t.filters),Object(s["a"])(u))})).then((function(t){return e.setState({data:t})})).finally((function(){return e.setState({fetching:!1})}))):(e.setState({data:{list:[]}}),Promise.reject())},loading:p,shouldSelect:!0,tableProps:{onRow:this.onTableRow,rowClassName:function(){return k.a.clickable},rowSelection:{onChange:this.onSelectChange,selectedRowKeys:i,type:o}},tableActions:[],data:f,model:_,display:E,inlineActions:[],sortable:x})))}}]),r}(O["a"]))||o)||o)||o);t["a"]=P}).call(this,n("LvDl"))},lO8B:function(e,t,n){"use strict";n("nTdE");var r,a,i=n("IZHl"),o=n("0Owb"),c=n("tJVT"),l=(n("eNCU"),n("pjJH")),u=(n("eE3J"),n("GSZB")),s=n("fWQN"),d=n("mtLc"),f=n("yKVA"),p=n("879j"),m=n("q1tI"),_=n.n(m),h=n("AAgL"),b=n("jfUH"),v=n("CM9M"),g=(r=Object(b["d"])((function(){return{uploader:Object(b["Bb"])()}})),r(a=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){var e;Object(s["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={preview:!1,uploadingList:[]},e.handleChange=function(t){var n=t.file,r=t.fileList,a=e.props.onChange;if(e.setState({uploadingList:r.filter((function(e){return"uploading"===e.status}))}),"done"===n.status){var i=e.props.uploader.getUrl(n);a(i)}},e}return Object(d["a"])(n,[{key:"render",value:function(){var e=this,t=this.state.uploadingList,n=this.props,r=n.onChange,a=n.accept,s=n.value,d=_.a.createElement(l["a"],null,_.a.createElement(u["a"],{type:"upload"})," \u70b9\u6b64\u4e0a\u4f20"),f=t;if(s){var p=s.split("#"),m=Object(c["a"])(p,1),h=m[0],b=h.lastIndexOf("/"),g=null===h||void 0===h?void 0:h.slice(b+1);f=f.concat({url:h,name:g,uid:s})}return _.a.createElement("div",null,_.a.createElement(v["a"],{url:s,onChildrenShow:!!s,showPreview:!1},(function(t){var n=t.onShow;return _.a.createElement(i["a"],Object(o["a"])({action:e.props.uploader.uploadHost,data:e.props.uploader.formData,onChange:e.handleChange,onPreview:n,beforeUpload:e.props.uploader.init,onRemove:function(){return r()},fileList:f,accept:a},e.widgetProps),f.length?null:d)})))}}]),n}(h["a"]))||a);t["a"]=g},"lt+M":function(e,t,n){"use strict";(function(e){var r=n("0Owb"),a=(n("4X2C"),n("xvon")),i=n("fWQN"),o=n("mtLc"),c=n("yKVA"),l=n("879j"),u=n("q1tI"),s=n.n(u),d=n("AAgL"),f=function(t){Object(c["a"])(u,t);var n=Object(l["a"])(u);function u(){var e;Object(i["a"])(this,u);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),e.Component=a["a"],e}return Object(o["a"])(u,[{key:"render",value:function(){var t=this.props,n=t.value,a=t.onChange;return s.a.createElement(this.Component,Object(r["a"])({value:e.isObject(n)?JSON.stringify(n):n,onChange:function(e){var t,n;return a(null!==(t=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:e)}},this.widgetProps))}}]),u}(d["a"]);f.propTypes={},t["a"]=f}).call(this,n("LvDl"))},mJsi:function(e,t,n){"use strict";var r=n("0Owb"),a=n("k1fw"),i=n("PpiC"),o=n("fWQN"),c=n("mtLc"),l=n("yKVA"),u=n("879j"),s=n("q1tI"),d=n.n(s),f=n("jfUH"),p=n("4l6Y"),m=(n("6nhF"),function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.connectDragSource,o=e.connectDropTarget,c=(e.moveRow,e.sortKey),l=e.data,u=e.item,s=e.dragingItems,p=Object(i["a"])(e,["isOver","connectDragSource","connectDropTarget","moveRow","sortKey","data","item","dragingItems"]),m=Object(a["a"])(Object(a["a"])({},p.style),{},{cursor:"move"}),_=p.className;if(t){var h=s.item,b=Object(f["c"])(h,u,l.list);if(!b&&h.id!==u.id){var v=h[c],g=u[c],O=v<g||v===g&&h.id<u.id;u.parent===h.parent?_+=O?" drop-over-downward":" drop-over-upward":_+=O?" drop-over-downward-diff":" drop-over-upward-diff"}}return n(o(d.a.createElement("tr",Object(r["a"])({},p,{className:_,style:m}))))}}]),n}(d.a.Component)),_={beginDrag:function(e){return Object(a["a"])({},e)}},h={drop:function(e,t){var n=t.getItem().item,r=e.item,a=e.data,i=Object(f["c"])(n,r,a.list);n.id===r.id||i||e.moveRow(n,r)}};t["a"]=function(e){var t=e.table,n=e.onRow;return d.a.createElement(p["b"],null,(function(e){var r=e.DropTarget,a=e.DragSource,i=r("row",h,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),dragingItems:t.getItem()}}))(a("row",_,(function(e){return{connectDragSource:e.dragSource()}}))(m));return t({components:{body:{row:i}},onRow:n})}))}},mefr:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("4X2C");var r=n("xvon"),a=n("fWQN"),i=n("yKVA"),o=n("879j"),c=n("lt+M"),l=function(e){Object(i["a"])(n,e);var t=Object(o["a"])(n);function n(){var e;Object(a["a"])(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),e.Component=r["a"].TextArea,e.options={autosize:{minRows:5,maxRows:30},style:{width:"100%"}},e}return n}(c["a"])},mmaM:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"request",(function(){return y})),n.d(t,"getExpandFields",(function(){return E})),n.d(t,"getDisplayFields",(function(){return C})),n.d(t,"queryContent",(function(){return x})),n.d(t,"downloadContent",(function(){return A})),n.d(t,"getFunctions",(function(){return F})),n.d(t,"createContent",(function(){return L})),n.d(t,"updateFullContent",(function(){return I})),n.d(t,"getChoices",(function(){return U})),n.d(t,"expandDetailFields",(function(){return V})),n.d(t,"contentDetail",(function(){return W})),n.d(t,"deleteContent",(function(){return q})),n.d(t,"batchAction",(function(){return N})),n.d(t,"verify",(function(){return H})),n.d(t,"emailVerify",(function(){return J})),n.d(t,"smsLoginSend",(function(){return G})),n.d(t,"smsLogin",(function(){return Z})),n.d(t,"register",(function(){return $})),n.d(t,"cloudFunction",(function(){return te})),n.d(t,"cloudFunc",(function(){return re})),n.d(t,"updateContent",(function(){return ie})),n.d(t,"sortUpdate",(function(){return oe})),n.d(t,"accountLogin",(function(){return ue})),n.d(t,"weChatworkLogin",(function(){return de})),n.d(t,"ddLogin",(function(){return pe})),n.d(t,"accountLogout",(function(){return _e})),n.d(t,"login",(function(){return ve})),n.d(t,"queryCurrent",(function(){return Oe})),n.d(t,"getAdminConfig",(function(){return je})),n.d(t,"getConfig",(function(){return Ee})),n.d(t,"getSettings",(function(){return Ce})),n.d(t,"getSettingConf",(function(){return Me})),n.d(t,"getSchemas",(function(){return Se})),n.d(t,"getUploadToken",(function(){return De})),n.d(t,"uploadServer",(function(){return Te})),n.d(t,"statistics",(function(){return Ie})),n.d(t,"groupStatistics",(function(){return Re})),n.d(t,"getChart",(function(){return We})),n.d(t,"getMenus",(function(){return qe})),n.d(t,"updateAdmin",(function(){return Ke})),n.d(t,"installApp",(function(){return He})),n.d(t,"checkDatabase",(function(){return Je})),n.d(t,"chartShowAdmin",(function(){return Ge})),n.d(t,"checkInstall",(function(){return Ze})),n.d(t,"setIntermediaryTable",(function(){return $e})),n.d(t,"setUserPassword",(function(){return tt})),n.d(t,"setUserGroups",(function(){return rt})),n.d(t,"getUserGroups",(function(){return it})),n.d(t,"upDateActive",(function(){return ct})),n.d(t,"getVersion",(function(){return ut}));var r=n("tJVT"),a=n("PpiC"),i=n("k1fw"),o=n("oBTY"),c=n("9og8"),l=(n("GPKB"),n("mFAc")),u=n("WmNS"),s=n.n(u),d=n("Qyje"),f=n("RLxJ"),p=n("WTkp"),m=n("jfUH"),_=n("VW+w"),h=n("vbsh"),b=n("Z3Gc"),v=!1;function g(t){var n=5381;return e.forEach(t,(function(e){n=(n<<5)+n+e.charCodeAt(0)})),n}var O=function(){var e,t,n,r=document.getElementsByClassName("ant-pro-basicLayout-content ant-pro-basicLayout-has-header")[0],a=(null===r||void 0===r||null===(e=r.parentElement)||void 0===e||null===(t=e.nextElementSibling)||void 0===t||null===(n=t.innerText)||void 0===n?void 0:n.replace(/\s/g,""))||"";return a&&g(a)!==b["h"]?(l["a"].warn({content:decodeURIComponent(window.atob("JUU2JUEzJTgwJUU2JUI1JThCJUU1JTg4JUIwJUU5JTlEJTlFJUU2JUIzJTk1JUU3JUFGJUExJUU2JTk0JUI5JUVGJUJDJTgx")),key:"ILLEGAL_TAMPERING"}),Promise.reject()):p["a"].apply(void 0,arguments)};function y(e,t){return j.apply(this,arguments)}function j(){return j=Object(c["a"])(s.a.mark((function t(n,a){var i,o,u,d,p,m,_=arguments;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=_.length>2&&void 0!==_[2]?_[2]:{},u=o.msgOption,t.next=3,O(n,a);case 3:d=t.sent,(null===(i=d.logs)||void 0===i?void 0:i.length)>0&&d.logs.forEach((function(e){var t=Object(r["a"])(e,2),n=t[0],a=t[1];switch(n){case 10:console.debug(a);break;case 20:console.info(a);break;case 30:console.warn(a);break;case 40:case 50:console.error(a);break;default:console.log(a)}})),p=parseInt(d.error_code,10),m=function(){var t=Object(c["a"])(s.a.mark((function t(n){var r,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==u){t.next=2;break}return t.abrupt("return");case 2:if(e.isPlainObject(u)&&p in u&&m(n,p,u[p]),!e.isFunction(u)){t.next=8;break}return t.next=6,u(n,p,d);case 6:r=t.sent,l["a"].error(r);case 8:e.isString(u)&&l["a"].error(u),void 0===u&&(a={"FOREIGN KEY constraint failed":"\u5916\u952e\u7ea6\u675f\u9519\u8bef"},l["a"].error(a[d.error_data]||n));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.t0=p,t.next=0===t.t0?10:403===t.t0?11:1e4===t.t0?14:21002===t.t0||21003===t.t0||21004===t.t0?15:18;break;case 10:return t.abrupt("return",d.result);case 11:return l["a"].error({content:"\u8eab\u4efd\u8ba4\u8bc1\u5931\u6548",key:"AUTH_INVALID"}),window.g_app._store.dispatch({type:"content/logout"}),t.abrupt("return",Promise.reject(d));case 14:return t.abrupt("break",19);case 15:return m({21002:"License \u65e0\u6548\uff0c\u8bf7\u91cd\u65b0\u586b\u5199\uff01",21003:"License \u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u7533\u8bf7\uff01",21004:"\u8bf7\u586b\u5199 License\uff01"}[p]),f["a"].push("/account/settings"),t.abrupt("return",Promise.reject(d));case 18:return t.abrupt("break",19);case 19:return m("".concat(d.error_message).concat(e.isString(d.error_data)&&!e.isEmpty(d.error_data)?"\uff1a".concat(d.error_data):"")),t.abrupt("return",Promise.reject(d));case 21:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}var w=function(e,t){var n=window.g_app._store.getState(),r=n.content.adminConfig,a=Object(m["I"])(r,e,"list",t);return a&&a.orderBy?"string"===typeof a.orderBy||a.orderBy instanceof String?[a.orderBy]:a.orderBy:["-".concat(Object(m["N"])(e))]},E=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=window.g_app._store.getState(),c=i.content,l=c.adminConfig,u=c.schemas,s=a||l[t]||{};if("detailFields"===r){var d=s.detail;if(!d||!d.fields&&!d.sections)return[];d.fields&&(s.detailFields=d.fields.map((function(e){return e.name||e}))),d.sections&&(s.detailFields=d.sections.reduce((function(e,t){return e.concat(t.fields.map((function(e){return e.name||e})))}),[])),s.detailFields=Object(_["displayPreprocess"])(s.detailFields,t,u)}if("display"===r&&(s.display=Object(_["displayPreprocess"])(s.display,t,u)),!s||!s[r]||!u[t])return[];var f=s[r].filter((function(e){return!e.type&&!e.depand&&!e.widget})).map((function(e){return e.name}));s[r].filter((function(t){return e.isObject(t)&&"combo"===t.type&&t.mapping})).forEach((function(t){f=f.concat(e.values(t.mapping))})),s[r].filter((function(t){return e.isObject(t)&&"asColumn"===t.type&&t.params})).forEach((function(e){var t=e.params,n=t.field,r=t.title,a=t.value,i=t.groupField,o=[n,r,a];i&&o.push(i),f=f.concat(o.map((function(t){return"".concat(e.name,".").concat(t)})))})),s[r].filter((function(t){return e.isObject(t)&&"embed"===t.type&&t[r]})).forEach((function(t){f=f.concat(e.values(t[r]).map((function(e){return"".concat(t.name,".").concat(e)})))})),s[r].filter((function(t){return e.isObject(t)&&t.depand})).forEach((function(e){f.push(e.depand)})),s[r].filter((function(t){return e.isObject(t)&&t.widget&&t.fields})).forEach((function(e){Object.keys(e.fields).forEach((function(t){return f.push(e.fields[t])}))}));var p=s.inlineActions,h=[];(p||[]).forEach((function(t){var n,r,a,i,o;null!==(n=t.params)&&void 0!==n&&n.userField&&h.push(null===(r=t.params)||void 0===r?void 0:r.userField),null!==(a=t.params)&&void 0!==a&&a.field&&e.isString(null===(i=t.params)||void 0===i?void 0:i.field)&&h.push(null===(o=t.params)||void 0===o?void 0:o.field)})),(n=f).push.apply(n,h),f=Object(o["a"])(new Set(f));var b=f.filter((function(e){return e.includes(".")})).map((function(e){return Object(m["B"])(Object(m["j"])(t,e,u))?e:e.split(".").slice(0,-1).join(".")})),v=[];return v=f.filter((function(e){return!e.includes(".")})).filter((function(e){var n=u[t].fields.find((function(t){return t.name===e}));return n&&Object(m["A"])(n.type)})),Object(o["a"])(new Set(b.concat(v)))};function k(e){return e.results||e.list||e}var C=function(t,n){var r;return n&&e.uniq(n.map((function(t){return t.fields?e.values(t.fields):t.name||t})).flat().map((function(e){var n=window.g_app._store.getState(),r=n.content.schemas;if(!r[t])return e;var a=e.split(".");return a.map((function(e,t){return a.slice(0,t+1)})).map((function(e){return e.join(".")})).map((function(e){var n=Object(m["j"])(t,e,r);return n&&Object(m["B"])(n)?["".concat(e,".").concat(r[n.ref].titleField),"".concat(e,".").concat(Object(m["N"])(n.ref))]:e})).flat()})).flat().concat([null===(r=window.g_app._store.getState().content.schemas[t])||void 0===r?void 0:r.titleField,Object(m["N"])(t)]))};function x(e){return M.apply(this,arguments)}function M(){return M=Object(c["a"])(s.a.mark((function e(t){var n,r,a,o,c,l,u,f,p,_,h,b,g,O;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.filters,a=t.page,o=t.size,c=t.orderBy,l=void 0===c?[]:c,u=t.expandFields,f=t.displayFields,p=t.extra,_=void 0!==a&&void 0!==o,h=window.g_app._store.getState(),b=h.content.adminConfig,g=u||E(n,"display",Object(m["I"])(b,n,"list",null===p||void 0===p?void 0:p.view)),e.next=6,y(_?"/basebone/".concat(n,"/list/?").concat(Object(d["stringify"])({page:a,size:o})):"/basebone/".concat(n,"/list/"),{method:"POST",data:Object(i["a"])({filters:r,expand_fields:v?[]:g,order_by:l.concat(w(n,null===p||void 0===p?void 0:p.view)),display_fields:f},p)});case 6:if(O=e.sent,!v){e.next=10;break}return e.next=10,P(n,g,O);case 10:if(!_){e.next=12;break}return e.abrupt("return",{list:O.results,pagination:{total:O.count,current:a,pageSize:o}});case 12:return e.abrupt("return",{list:O,pagination:{total:-1,current:-1,pageSize:-1}});case 13:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function P(e,t,n){return S.apply(this,arguments)}function S(){return S=Object(c["a"])(s.a.mark((function t(n,r,a){var i,o,c,l,u,d,f;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=window.g_app._store.getState(),o=i.content.schemas,c=o[n],l=[],u=e.groupBy(r,(function(e){return e.split(".")[0]})),d=e.groupBy(u,(function(e){return c.fields.find((function(t){return t.name===e[0].split(".")[0]})).ref})),e.forEach(d,(function(t,r){var i=t.flat().map((function(e){return e.split(".")})).filter((function(e){return e.length>1})).map((function(e){return e.slice(1).join(".")})),o=t.map((function(e){return e[0].split(".")[0]})).map((function(e){return c.fields.find((function(t){return t.name===e}))})),u=o.filter(m["D"]).map((function(e){return e.name})),s=e.uniq(k(a).map((function(e){return u.map((function(t){return e[t]})).filter((function(e){return null!==e}))})).flat());s.length&&l.push(x({model:r,expandFields:i,filters:[{field:Object(m["N"])(r),operator:"in",value:s}]}).then((function(e){return{resultList:k(e),type:"ref",fieldNames:u,refModel:r}}))),o.filter((function(e){return"bref"===e.type})).forEach((function(e){var t=k(a).map((function(e){return Object(m["M"])(e,n)}));l.push(x({model:r,expandFields:i,filters:[{field:e.refField,operator:"in",value:t}]}).then((function(t){return{resultList:k(t),type:"bref",fieldName:e.name,refField:e.refField,refModel:r}})))}))})),t.next=8,Promise.all(l);case 8:f=t.sent,f.forEach((function(t){var r=t.resultList,i=t.type,o=t.fieldNames,c=t.fieldName,l=t.refField,u=t.refModel;if("ref"===i){var s=e.keyBy(r,Object(m["N"])(u));k(a).forEach((function(e){o.forEach((function(t){null!==e[t]&&(e[t]=s[e[t]])}))}))}else if("bref"===i){var d=e.groupBy(k(r),l);k(a).forEach((function(e){e[c]=d[Object(m["M"])(e,n)]||[]}))}}));case 10:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function A(e){return D.apply(this,arguments)}function D(){return D=Object(c["a"])(s.a.mark((function t(n){var r,a,o,c,l,u,d,f;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.model,a=n.filters,o=n.exportKey,c=n.detailModel,l=n.detailId,u=o&&!e.isObject(o)?"/basebone/".concat(r,"/export/file/?fileformat=").concat(o):"/basebone/".concat(r,"/export/file/"),d=Object(i["a"])({filters:a},!e.isObject(o)||"v2"!==o.version&&"v3"!==o.version?{}:{basebone_export_config:o}),c&&(d.detail_model=c,d.detail_id=l),t.next=6,O(u,{method:"POST",data:d,getResponse:!0,responseType:"blob"});case 6:return f=t.sent,t.abrupt("return",f);case 8:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function F(e){return T.apply(this,arguments)}function T(){return T=Object(c["a"])(s.a.mark((function e(t){var n,r,a,i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.scene,a="/basebone/".concat(n,"/functions/?scene=").concat(r),e.next=4,O(a,{method:"GET",getResponse:!0});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}var L=h["a"].Create((function(e,t){var n=e.model,r=e.values;return y("/basebone/".concat(n,"/"),{method:"POST",data:r},t)})),I=h["a"].Update((function(e){var t=e.model,n=e.values,r=e.id;return y("/basebone/".concat(t,"/").concat(r,"/"),{method:"PUT",data:n})}));function U(e){return R.apply(this,arguments)}function R(){return R=Object(c["a"])(s.a.mark((function e(t){var n,r,a,c,l,u,f,p,_,h;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.titleField,a=t.q,c=t.query,l=t.condictions,u=t.conditions,f=t.data,u=u||l,p=[],a&&p.push({field:r,value:a,operator:"icontains"}),Array.isArray(u)?p.push.apply(p,Object(o["a"])(u)):u&&Object.keys(u).length&&Object.keys(u).forEach((function(e){p.push({field:e,operator:"=",value:u[e]})})),e.next=7,y("/basebone/".concat(n,"/list/?").concat(Object(d["stringify"])(c)),{method:"POST",data:Object(i["a"])({filters:p},f)});case 7:return _=e.sent,h=c&&Object.keys(c).length?_.results:_,e.abrupt("return",h.map((function(e){return[Object(m["M"])(e,n),e]})));case 10:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function V(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=window.g_app._store.getState(),a=r.content,c=a.schemas,l=a.adminConfig,u=l[e];if(!u)return[];var s=u.formFields,d=u.inlineFormFields,f=t&&(n||d)||s,p=c[e];if(!p||!f)return[];var _=[];return f.forEach((function(e){var t,n="string"===typeof e?{name:e,expand:[]}:Object(i["a"])({expand:[]},e),r=p.fields.find((function(e){return e.name===n.name}));r&&Object(m["B"])(r)&&(_.push(n.name),["bref","boref"].includes(r.type)&&(t=n.expand).push.apply(t,Object(o["a"])(V(r.ref,!0,(e.params||{}).fields))));_.push.apply(_,Object(o["a"])(n.expand.map((function(e){return"".concat(n.name,".").concat(e)}))))})),_}function W(e,t){return B.apply(this,arguments)}function B(){return B=Object(c["a"])(s.a.mark((function e(t,n){var r,a,o,c,l,u,d,f,p;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.model,a=t.id,o=t.expandFields,c=t.fieldsType,l=t.detail,u=window.g_app._store.getState(),d=u.content.adminConfig,f=o||("detailFields"===c?E(r,c,Object(i["a"])(Object(i["a"])({},d[r]),{},{detail:l})):V(r)),e.next=5,y("/basebone/".concat(r,"/").concat(a,"/"),{method:"POST",data:{expand_fields:v?[]:f}},n);case 5:if(p=e.sent,!v){e.next=9;break}return e.next=9,P(r,f,[p]);case 9:return e.abrupt("return",p);case 10:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}var q=h["a"].Delete((function(e){var t=e.model,n=e.id;return y("/basebone/".concat(t,"/").concat(n,"/"),{method:"DELETE"})}));function N(e){return K.apply(this,arguments)}function K(){return K=Object(c["a"])(s.a.mark((function e(t){var n,r,a,i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.ids,a=t.action,i=t.payload,e.abrupt("return",y("/basebone/".concat(n,"/batch/"),{method:"POST",data:{action:a,data:r,payload:i}}));case 2:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function H(e){return z.apply(this,arguments)}function z(){return z=Object(c["a"])(s.a.mark((function e(t){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O("/basebone/member/sms/code",{method:"POST",data:{mobile:t}}));case 1:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function J(e){return Y.apply(this,arguments)}function Y(){return Y=Object(c["a"])(s.a.mark((function e(t){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O("/basebone/member/email/code",{method:"POST",data:{email:t,lang:"zh_CN"}}));case 1:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function G(e){return Q.apply(this,arguments)}function Q(){return Q=Object(c["a"])(s.a.mark((function e(t){var n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("phone",t),e.abrupt("return",y("/basebone/auth/sms/login-send",{method:"POST",data:n}));case 3:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function Z(e){return X.apply(this,arguments)}function X(){return X=Object(c["a"])(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.mobile,r=t.captcha,a=new FormData,a.append("phone",n),a.append("code",r),e.abrupt("return",O("/basebone/auth/sms/login",{method:"POST",data:a}));case 5:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return ee=Object(c["a"])(s.a.mark((function e(t){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O("/basebone/member/register",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(c["a"])(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.functionName,a=t.params,e.abrupt("return",O("/basebone/".concat(n,"/func/"),{method:"POST",data:{func_name:r,params:a}}));case 2:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(e){return ae.apply(this,arguments)}function ae(){return ae=Object(c["a"])(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.functionName,a=t.params,e.abrupt("return",y("/basebone/".concat(n,"/func/"),{method:"POST",data:{func_name:r,params:a}}));case 2:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}var ie=h["a"].Update((function(e){var t=e.model,n=e.id,r=e.newValues,a=e.appendModeFields,i={};Object.keys(r).forEach((function(e){void 0!==r[e]&&(i[e]=r[e])}));var o="/basebone/".concat(t,"/").concat(n,"/");return a&&(o="/basebone/".concat(t,"/").concat(n,"/?rfum_append=").concat(a.join(","))),y(o,{method:"PATCH",data:i})}));function oe(e,t,n){return ce.apply(this,arguments)}function ce(){return ce=Object(c["a"])(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/".concat(t,"/update_sort/"),{method:"POST",data:{dragId:n,hoverId:r}}));case 1:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}var le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"account";switch(parseInt(e.error_code,10)){case 0:return{status:"ok",type:t,currentAuthority:"admin"};default:return{status:"error",type:t,currentAuthority:"guest"}}};function ue(e){return se.apply(this,arguments)}function se(){return se=Object(c["a"])(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.userName,r=t.password,e.abrupt("return",O("/basebone/manage/account/login/",{method:"POST",data:{username:n,password:Object(m["K"])(r)}}));case 2:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return fe=Object(c["a"])(s.a.mark((function e(t){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O("/basebone_wechat_work/login/",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function pe(e){return me.apply(this,arguments)}function me(){return me=Object(c["a"])(s.a.mark((function e(t){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O("/basebone/member/dingding/login/",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}function _e(){return he.apply(this,arguments)}function he(){return he=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O("/basebone/manage/account/logout/",{method:"POST"}));case 1:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}var be={account:ue,weChatWork:de,ddLogin:pe,mobile:Z};function ve(e){return ge.apply(this,arguments)}function ge(){return ge=Object(c["a"])(s.a.mark((function e(t){var n,r,i,o;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.type,r=void 0===n?"account":n,i=Object(a["a"])(t,["type"]),e.next=3,be[r](i);case 3:return o=e.sent,e.abrupt("return",le(o,["account","mobile"].includes(r)?r:"account"));case 5:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}function Oe(){return ye.apply(this,arguments)}function ye(){return ye=Object(c["a"])(s.a.mark((function e(){var t;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,y("/basebone/manage/account/userinfo/");case 4:t=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e["catch"](1),e.abrupt("return",{});case 10:return e.abrupt("return",Object(i["a"])(Object(i["a"])({},t),{},{permissions:t.permissions.map(m["L"])}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),ye.apply(this,arguments)}function je(){return we.apply(this,arguments)}function we(){return we=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/config/admin/"));case 1:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function Ee(){return ke.apply(this,arguments)}function ke(){return ke=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/config/all/"));case 1:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function Ce(){return xe.apply(this,arguments)}function xe(){return xe=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/config/settings/"));case 1:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function Me(){return Pe.apply(this,arguments)}function Pe(){return Pe=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/config/setting_config/"));case 1:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Se(){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/config/schema/"));case 1:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}function De(){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/manage/upload/token/"));case 1:case"end":return e.stop()}}),e)}))),Fe.apply(this,arguments)}function Te(e){return Le.apply(this,arguments)}function Le(){return Le=Object(c["a"])(s.a.mark((function t(n){var r,i,o,c,l,u,d,f,p,_;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,De();case 2:return r=t.sent,i=r.provider,o=Object(a["a"])(r,["provider"]),c=Object(m["u"])(i,o),l=c.getUrl,u=c.getFormData,d=c.host,f=l(n),p=u(n),_=new FormData,e.forEach(p,(function(e,t){_.append(t,e)})),_.append("file",n),t.next=13,O(d,{method:"POST",data:_});case 13:return t.abrupt("return",{url:f});case 14:case"end":return t.stop()}}),t)}))),Le.apply(this,arguments)}function Ie(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(c["a"])(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.filters,e.abrupt("return",y("/basebone/".concat(n,"/statistics/"),{method:"POST",data:{filters:r}}));case 2:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}function Re(e){return Ve.apply(this,arguments)}function Ve(){return Ve=Object(c["a"])(s.a.mark((function e(t){var n,r,a,i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.filters,a=t.group,i=t.fields,e.abrupt("return",y("/basebone/".concat(n,"/group_statistics/"),{method:"POST",data:{filters:r,group:a,fields:i}}));case 2:case"end":return e.stop()}}),e)}))),Ve.apply(this,arguments)}function We(e){return Be.apply(this,arguments)}function Be(){return Be=Object(c["a"])(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.model,r=t.id,e.abrupt("return",y("/basebone/".concat(n,"/get_chart/"),{method:"POST",data:{id:r}}));case 2:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function qe(){return Ne.apply(this,arguments)}function Ne(){return Ne=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/config/manage/menu/"));case 1:case"end":return e.stop()}}),e)}))),Ne.apply(this,arguments)}function Ke(e){var t=e.model,n=e.config;return y("/basebone/config/admin/".concat(t,"/"),{method:"PUT",data:n})}function He(){return ze.apply(this,arguments)}function ze(){return ze=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/meta__app/func/",{method:"POST",data:{func_name:"init_models",params:t}}));case 2:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Je(){return Ye.apply(this,arguments)}function Ye(){return Ye=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/meta__app/func/",{method:"POST",data:{func_name:"check_database",params:t}}));case 2:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Ge(){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/guardian__userobjectpermission/func/",{method:"POST",data:{func_name:"set_user_group_object_permission",params:t}}));case 2:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}function Ze(){return Xe.apply(this,arguments)}function Xe(){return Xe=Object(c["a"])(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re({model:"db_tool__setting",functionName:"check_install"});case 2:return t=e.sent,n=t.installed,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}function $e(){return et.apply(this,arguments)}function et(){return et=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/meta__model/func/",{method:"POST",data:{func_name:"create_many_to_many_filed",params:t}}));case 2:case"end":return e.stop()}}),e)}))),et.apply(this,arguments)}function tt(){return nt.apply(this,arguments)}function nt(){return nt=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/member__user/func/",{method:"POST",data:{func_name:"set_password",params:t}}));case 2:case"end":return e.stop()}}),e)}))),nt.apply(this,arguments)}function rt(){return at.apply(this,arguments)}function at(){return at=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/member__user/func/",{method:"POST",data:{func_name:"set_groups",params:t}}));case 2:case"end":return e.stop()}}),e)}))),at.apply(this,arguments)}function it(){return ot.apply(this,arguments)}function ot(){return ot=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/member__user/func/",{method:"POST",data:{func_name:"get_groups",params:t}}));case 2:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function ct(){return lt.apply(this,arguments)}function lt(){return lt=Object(c["a"])(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",y("/basebone/member__user/func/",{method:"POST",data:{func_name:"set_active",params:t}}));case 2:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function ut(){return st.apply(this,arguments)}function st(){return st=Object(c["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/basebone/version/",{method:"GET"}));case 1:case"end":return e.stop()}}),e)}))),st.apply(this,arguments)}}.call(this,n("LvDl"))},nKGo:function(e,t,n){e.exports={gmImg:"gmImg___24rv6"}},oORW:function(e,t,n){"use strict";n("4X2C");var r=n("xvon"),a=n("0Owb"),i=n("fWQN"),o=n("mtLc"),c=n("yKVA"),l=n("879j"),u=(n("eE3J"),n("GSZB")),s=n("q1tI"),d=n.n(s),f=n("AAgL"),p=u["a"].createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_895448_qna83b20tb.js"}),m=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(i["a"])(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),e.state={raw:!1},e.handleChange=function(t){var n=e.props.onChange;n(t.target.value||void 0)},e.toggleRaw=function(){return e.setState((function(e){var t=e.raw;return{raw:!t}}))},e}return Object(o["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props.onChange;e()}},{key:"render",value:function(){var e=this.props.value,t=this.state.raw;return d.a.createElement(r["a"],Object(a["a"])({type:t?"text":"password",value:e,onChange:this.handleChange,autoComplete:"new-password",addonAfter:d.a.createElement("div",{onClick:this.toggleRaw},t?d.a.createElement(p,{type:"icon-eye-off"}):d.a.createElement(u["a"],{type:"eye"}))},this.widgetProps))}}]),n}(f["a"]);m.propTypes={},t["a"]=m},onda:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),i=n("jfUH"),o=(n("52nx"),n("7bDm")),c=(n("eNCU"),n("pjJH")),l=n("fWQN"),u=n("mtLc"),s=n("tS8v"),d=n("yKVA"),f=n("879j"),p=n("4l6Y"),m=n("AAgL"),_=function(e){Object(d["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(l["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={showModal:!1,tempValue:void 0},e.myProps=[],e.onTempChange=function(t){return e.setState({tempValue:t})},e.handleSelect=function(t){var n=Object(s["a"])(e),r=n.onTempChange,a=t.poi,i=a.district,o=a.address,c=a.name,l=a.location,u=l.lat,d=l.lng,f=a.adcode;r({address:i+o+c,latitude:u,longitude:d,ad_code:f})},e.handleDrag=function(t){var n=e.state.tempValue,r=Object(s["a"])(e),a=r.onTempChange,i=t.address,o=t.position,c=o.lng,l=o.lat,u=t.regeocode.addressComponent.adcode;n&&c===n.longitude&&l===n.latitude||a({address:i,latitude:l,longitude:c,ad_code:u})},e.openModal=function(){var t=e.props.value;e.setState({showModal:!0,tempValue:t})},e}return Object(u["a"])(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.tempValue,r=t.showModal,i=this.props,l=i.value,u=i.amapkey,s=a.a.createElement(p["a"],{useAMapUI:!0,zoom:n&&20,amapkey:u,center:n},(function(t){var n=t.Wrapper,r=t.Autocomplete,i=t.PositionPicker;return a.a.createElement(a.a.Fragment,null,a.a.createElement(n,null,a.a.createElement(i,{instanceName:"PositionPicker",eventSupport:!0,events:{success:e.handleDrag}})),a.a.createElement(r,{options:{},onSelect:e.handleSelect,placeholder:"\u641c\u7d22",style:{transform:"translateY(-200%)",marginLeft:8}}))}));return a.a.createElement("div",null,a.a.createElement(c["a"],{onClick:this.openModal},"\u9009\u62e9\u4f4d\u7f6e"),a.a.createElement(o["a"],{title:n?"\u5f53\u524d\u9009\u4e2d\u4f4d\u7f6e\uff1a\uff08".concat(n.address,"\uff09"):"\u9009\u62e9\u4f4d\u7f6e",width:800,visible:r,onCancel:function(){return e.setState({showModal:!1})},onOk:function(){e.props.onChange(n),e.setState({showModal:!1,tempValue:void 0})}},a.a.createElement("div",{style:{height:600}},s)),l&&a.a.createElement("span",{style:{marginLeft:10}},l.address))}}]),n}(m["a"]);t["a"]=function(){var e=Object(i["X"])("amap_key");return a.a.createElement(_,{amapkey:e})}},psPf:function(e,t,n){"use strict";var r=n("Utjr");t["a"]=Object(r["d"])((function(){return Promise.all([n.e(33),n.e(25)]).then(n.bind(null,"jU8G"))}),{loading:"\u52a0\u8f7d\u4ee3\u7801\u7f16\u8f91\u5668..."})},"qa+J":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n("0Owb"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=n("q1tI"),u=n.n(l),s=n("lt+M"),d=n("dUs0"),f=function(t){Object(o["a"])(l,t);var n=Object(c["a"])(l);function l(){var e;Object(a["a"])(this,l);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),e.isObjectItemType=function(){var t=e.props.field;return"object"===t.item_type},e.handleChange=function(t){var n=e.props.onChange,r=t;e.isObjectItemType()||(r=t.map((function(e){return e.item}))),n(r)},e}return Object(i["a"])(l,[{key:"render",value:function(){var t=this.props.value,n=t;return e.isArray(n)?this.isObjectItemType()||(n=t.map((function(e){return{item:e}}))):n=[],u.a.createElement("div",null,u.a.createElement(d["a"],Object(r["a"])({},this.props,{value:n,onChange:this.handleChange,canAdd:!0})))}}]),l}(s["a"])}).call(this,n("LvDl"))},qoBN:function(e,t,n){"use strict";(function(e){n("Ahcs");var r=n("k0dM"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=n("q1tI"),u=n.n(l),s=function(t){Object(o["a"])(l,t);var n=Object(c["a"])(l);function l(){return Object(a["a"])(this,l),n.apply(this,arguments)}return Object(i["a"])(l,[{key:"render",value:function(){var t=this.props,n=t.choices,a=t.value,i=t.tabs,o=void 0===i?[]:i,c=t.showAll,l=void 0!==c&&c,s=t.allTitle,d=void 0===s?"\u5168\u90e8":s,f=t.onChange,p=n;return o.length&&(p=o.map((function(t){return e.isArray(t)?t:n.find((function(e){return e[0]===t}))}))),u.a.createElement(r["a"],{activeKey:a||l&&"",onChange:function(e){return f(e)},tabPosition:"top",type:"card"},l?u.a.createElement(r["a"].TabPane,{key:"",tab:d}):"",p.map((function(e){return u.a.createElement(r["a"].TabPane,{key:e[0],tab:e[1]})})))}}]),l}(u.a.PureComponent);t["a"]=s}).call(this,n("LvDl"))},rAFZ:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return F}));n("4csm");var r,a,i,o=n("2Fwu"),c=(n("9kbU"),n("vbHR")),l=n("oBTY"),u=n("jrin"),s=n("fWQN"),d=n("mtLc"),f=n("yKVA"),p=n("879j"),m=(n("QV15"),n("DAsn")),_=n("k1fw"),h=(n("e+1C"),n("Nd5c")),b=(n("ER8q"),n("Ai5L")),v=(n("eE3J"),n("GSZB")),g=(n("eNCU"),n("pjJH")),O=n("tJVT"),y=(n("vmZS"),n("NjVP")),j=n("q1tI"),w=n.n(j),E=n("/MKj"),k=n("WHYC"),C=n("jfUH"),x=n("rQ+i"),M=n("2CK3"),P=n.n(M),S=n("qoBN"),A=n("fapc"),D=function(t,n,r){return new Promise((function(a,i){t.validateFields((function(t,o){if(t)return i(t);var c=e.keyBy(n,"id"),l=e(o).pickBy((function(e){return void 0!==e&&""!==e&&!(Array.isArray(e)&&0===e.length)})).mapKeys((function(e,t){return t.replaceAll("__",".")})).map((function(e,t){if(t===r)return{field:t,operator:"=",value:e};var n=c[t];return{field:t,value:n.getValue?n.getValue(e):e,operator:n.getOperator(e)}})).value();return a(l)}))}))},F=y["a"].create()((function(t){var n,r,a=t.onSubmit,i=t.filters,o=t.formInstance,c=t.form,l=t.moreButtons,u=t.layout,s=t.tab,d=t.tabField,f=t.showButtons,p=void 0===f||f,E=o||c,k=Object(j["useState"])(!1),C=Object(O["a"])(k,2),x=C[0],M=C[1],S=Object(j["useState"])(!1),A=Object(O["a"])(S,2),F=A[0],T=A[1],L=function(){return D(E,i,d).then(a).catch(console.error)},I=function(e){e.preventDefault(),L()},U=w.a.createElement(w.a.Fragment,null,w.a.createElement(g["a"],{icon:"search",type:"primary",htmlType:"submit"},"\u67e5\u8be2"),w.a.createElement(g["a"],{onClick:function(){E.resetFields(),L()},style:{marginLeft:8,marginRight:8}},"\u91cd\u7f6e")),R=function(e){var t={},n=e.initialValue;return n&&(t={initialValue:n}),w.a.createElement(y["a"].Item,{label:e.label},E.getFieldDecorator(e.id.replaceAll(".","__"),t)(e.render()))};if("drawer"===u)n=i.map(R),r=w.a.createElement(h["a"],{gutter:{md:8,lg:24,xl:48},type:"flex",justify:"end"},w.a.createElement(b["a"],null,w.a.createElement("span",{className:P.a.submitButtons},w.a.createElement(g["a"],{id:"button",type:"primary",onClick:function(){return M(!0)},style:{marginLeft:8,marginRight:8}},w.a.createElement(v["a"],{type:"search"})," \u7b5b\u9009"))));else{var V=e.chunk(i,3);n=V.map((function(e,t){return w.a.createElement(h["a"],{key:e[0].id,gutter:{md:8,lg:24,xl:48},style:Object(_["a"])({},V.length>3&&!F&&t>1&&{display:"none"})},e.map((function(e){return w.a.createElement(b["a"],{key:e.id,md:8,sm:24},R(e))})))})),r=p&&w.a.createElement(h["a"],{gutter:{md:8,lg:24,xl:48},type:"flex",justify:"end"},w.a.createElement(b["a"],null,w.a.createElement("span",{className:P.a.submitButtons},U,l,V.length>3?w.a.createElement("a",{style:{marginLeft:8},onClick:function(){return T((function(e){return!e}))}},F?"\u6536\u8d77":"\u5c55\u5f00"," ",w.a.createElement(v["a"],{type:F?"up":"down"})):null)))}return"drawer"===u?w.a.createElement(y["a"],{layout:"vertical",onSubmit:I},w.a.createElement(m["a"],{title:"\u7b5b\u9009",width:420,onClose:function(){return M(!1)},visible:x,headerStyle:{width:"100%",zIndex:3,borderbottom:"1px solid #e9e9e9",left:0,top:0,position:"absolute"},bodyStyle:{paddingBottom:80}},w.a.createElement(y["a"],{layout:"vertical"},w.a.createElement("div",{style:{paddingTop:"50px"}},n),w.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},U))),r,s):w.a.createElement("div",{className:P.a.tableListForm},w.a.createElement(y["a"],{layout:"inline",onSubmit:I},n,r,s))})),T=(r=y["a"].create(),a=Object(E["c"])((function(e){var t=e.content,n=e.user.currentUser;return{content:t,currentUser:n}})),r(i=Object(k["k"])(i=a(i=function(t){Object(f["a"])(r,t);var n=Object(p["a"])(r);function r(){var e;Object(s["a"])(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),e.state={initialValues:[]},e}return Object(d["a"])(r,[{key:"componentDidMount",value:function(){}},{key:"onTabSelect",value:function(e,t){var n=this.props,r=n.form,a=n.onSubmit,i=this.fields,o=this.tabField;""===t?r.resetFields([e]):r.setFieldsValue(Object(u["a"])({},e,t)),D(r,i,null===o||void 0===o?void 0:o.name).then(a)}},{key:"filterConf",get:function(){var e=this.props,t=e.model,n=e.content.adminConfig,r=e.schemas,a=e.currentUser,i=this.props,o=i.filter,c=i.tabField;if(!o){var u=n[t]||{},s=u.filter;o=void 0===s?[]:s}if(!c){var d=n[t]||{},f=d.tabField;c=void 0===f?[]:f}var p={fields:c?[].concat(Object(l["a"])(o),[{name:c,widget:"tab",showAll:!0}]):o,currentUser:a,model:t,schemas:r},m=Object(x["b"])(p);return m}},{key:"modelSchema",get:function(){var e=this.props,t=e.model,n=e.content.schemas;return n[t]||{fields:[]}}},{key:"fields",get:function(){var t=this.props,n=t.content.schemas,r=t.model,a=t.location.query,i=this.filterConf,o=i.filter((function(t){return e.isString(t)||e.isString(t.name)})),c=[],l=this.state.initialValues;return o.forEach((function(e){try{var t=Object(A["b"])(n,r,e,{initialValues:l,query:a});c.push(t)}catch(i){console.error("filter\u914d\u7f6e\u9519\u8bef:",e,i)}})),c}},{key:"tabField",get:function(){return this.filterConf.find((function(e){return"tab"===e.widget}))}},{key:"handleExport",value:function(e){var t=this.props,n=t.onExport,r=t.form,a=this.fields,i=this.tabField;D(r,a,null===i||void 0===i?void 0:i.name).then((function(t){n(t,e)}))}},{key:"renderExport",value:function(t){var n=this;if(e.isArray(t)){var r=w.a.createElement(c["a"],{onClick:function(e){var t=e.key;return n.handleExport(t)}},t.map((function(e){return w.a.createElement(c["a"].Item,{key:e.key},e.name)})));return w.a.createElement(o["a"],{overlay:r},w.a.createElement(g["a"],null,"\u5bfc\u51fa\u6570\u636e ",w.a.createElement(v["a"],{type:"down"})))}return e.isBoolean(t)||e.isObject(t)&&!e.isEmpty(t.fields)?w.a.createElement(g["a"],{onClick:function(){return n.handleExport(e.isObject(t)&&t)}},t.name||"\u5bfc\u51fa\u6570\u636e"):""}},{key:"render",value:function(){var e=this,t=this.filterConf;if(!t||!t.length||!this.modelSchema)return null;var n,r=this.fields,a=this.tabField,i=this.props,o=i.form,c=i.exportable,l=i.model,u=i.layout,s=i.onSubmit,d=Object(C["p"])(l),f=r.filter((function(e){return e.fieldPath!==(a&&a.name)})).filter((function(e){var t,n;return null===(t=null===(n=d[e.field.name])||void 0===n?void 0:n.read)||void 0===t||t}));a&&(n=this.modelSchema.fields.find((function(e){return e.name===a.name})));var p=a&&n&&n.choices&&w.a.createElement(h["a"],null,w.a.createElement(b["a"],{span:24},w.a.createElement(y["a"].Item,null,o.getFieldDecorator(a.name)(w.a.createElement(S["a"],{choices:n.choices,tabs:a.tabs||[],showAll:a.showAll,allTitle:a.allTitle||"\u5168\u90e8",onChange:function(t){return e.onTabSelect(a.name,t)}})))));return w.a.createElement(F,{filters:f,onSubmit:s,formInstance:o,layout:u,tab:p,tabField:null===a||void 0===a?void 0:a.name,showButtons:!(a&&1===t.length),moreButtons:c?this.renderExport(c):""})}}]),r}(w.a.Component))||i)||i)||i);t["b"]=T}).call(this,n("LvDl"))},"rQ+i":function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d}));var r=n("k1fw"),a=n("tJVT"),i=n("jfUH"),o=n("NnbD");function c(t,n,r){return t.filter((function(t){var i=!0;if(!e.isEmpty(t.groups)){var o=n.split("__"),c=Object(a["a"])(o,2),l=c[0],u=c[1],s="".concat(t.name,"_").concat(u,"_").concat(t.id,"__").concat(l),d=r.permissions.includes(s);if(!d)return d;i=i&&d}return i}))}function l(t,n,r){var c=Object(i["wb"])(),l=Object(i["X"])("staff_username"),u=Object(i["qb"])(),s=Object(i["bb"])();return t.filter((function(t){var d,f=u.filter((function(e){return e.endsWith(n)})).map((function(e){return e.split("_")[0]}));if(t.action in o["a"]&&!f.includes(o["a"][t.action]))return!1;if(r&&null!==(d=t.params)&&void 0!==d&&d.userField&&l){var p=s.username,m=r[t.params.userField];if(e.isArray(m)){var _=m.map((function(e){return e[l]})).includes(p);if(!_)return _}else{var h=m&&p===m[l];if(!h)return h}}if(!e.isEmpty(t.groups)&&!["edit","delete","detail"].includes(t.action)){var b=n.split("__"),v=Object(a["a"])(b,2),g=v[0],O=v[1],y="".concat(t.action,"_").concat(O,"_").concat(t.id,"__").concat(g),j=u.includes(y);if(!j)return j}if(t.permission){var w=u.includes(t.permission);if(!w)return w}if("boolean"===typeof t.show){var E=t.show;if(!E)return E}if(r&&"string"===typeof t.show){var k=t.show&&Object(i["i"])(t.show,(function(e){return r[e]}));if(!k)return k}if(r&&"function"===typeof t.show)return t.show(r,n);if(r&&!e.isEmpty(t.showIf)){var C=Object(i["H"])(t.showIf,r,c,n);if(!C)return C}return!0}))}function u(e){var t=e.actions,n=void 0===t?[{}]:t,a=e.currentUser,i=e.model,o=[];return n.map((function(e){return o.push(Object(r["a"])({},e))})),c(o,i,a)}function s(e){var t=e.fields,n=void 0===t?[{}]:t,r=e.currentUser,a=e.model;return c(n,a,r)}function d(e){var t=e.fields,n=void 0===t?{}:t,r=e.currentUser,a=e.model,i=[];i.push(n);var o=c(i,a,r);return o[0]}}).call(this,n("LvDl"))},"sMR+":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n("/MKj"),a=n("wiuW"),i=n("3i6F"),o=n("jfUH"),c=n("rQ+i"),l=n("eljF"),u=e.flow(Object(o["d"])((function(e){var t=e.inlineActions,n=e.model;return{validInlineActions:Object(c["d"])(t||[],n)}})),Object(r["c"])((function(e){var t=e.content,n=e.user.currentUser,r=e.bsmSetting;return{content:t,currentUser:n,bsmSetting:r}})),Object(o["d"])((function(e){var t=e.model;return{getDisplayWidgetName:Object(i["l"])(t),getDisplayWidgetNameByModel:Object(i["m"])()}}))),s=e.mapValues(a["c"],u),d=u(l["a"]),f=function(e){return s[e]||d}}).call(this,n("LvDl"))},sw8h:function(e,t,n){"use strict";n("iQDF");var r=n("+eQT"),a=n("q1tI"),i=n.n(a),o=n("wd/R"),c=n.n(o),l="YYYY-MM-DD HH:mm:ss";function u(e){var t=e.value,n=e.onChange;return i.a.createElement(r["a"],{value:t?c()(c()(t,"X").format(l),l):null,onChange:function(e){return e&&n(e.unix())},format:l,showTime:!0})}t["a"]=u},txBY:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O}));var r=n("jrin"),a=(n("GPKB"),n("mFAc")),i=n("k1fw"),o=n("WmNS"),c=n.n(o),l=n("Qyje"),u=n("RLxJ"),s=n("s4NR"),d=n("/MKj"),f=n("mmaM"),p=n("jfUH"),m=n("VW+w"),_=function(){return Object(s["parse"])(window.location.href.split("?")[1])},h=window.$$schemas,b=window.$$admins,v=e.cloneDeep(b);h&&b&&Promise.resolve().then(n.bind(null,"VW+w")).then((function(e){var t=e.configPreprocess;t(b,h),t(v,h,{noDefault:!0})}));var g={namespace:"content",state:{data:{},choices:{},schemas:null!==h&&void 0!==h?h:{},adminConfig:null!==b&&void 0!==b?b:{},adminWithoutDefault:v,stat:{},all:{},login:{}},effects:{fetch:c.a.mark((function e(t,n){var r,a,o,l,u,s,d,p,m;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,o=n.put,l=n.select,u=r.model,s=r.extra,s=void 0===s?{}:s,d=s.view,e.next=7,l((function(e){return e.content.data[u]}));case 7:return p=e.sent,e.prev=8,e.next=11,a(f["queryContent"],Object(i["a"])(Object(i["a"])({},r),{},{page:r.page||p&&p.pagination&&p.pagination.current||1,size:r.size||p&&p.pagination&&p.pagination.pageSize||30}));case 11:m=e.sent,e.next=17;break;case 14:return e.prev=14,e.t0=e["catch"](8),e.abrupt("return",Promise.reject(e.t0));case 17:return e.next=19,o({type:"save",payload:{model:u,view:d,response:m}});case 19:return e.abrupt("return",m);case 20:case"end":return e.stop()}}),e,null,[[8,14]])})),fetchAll:c.a.mark((function e(t,n){var r,a,o,l,u,s,d;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,o=n.put,l=r.model,u=r.extra,u=void 0===u?{}:u,s=u.view,e.prev=5,e.next=8,a(f["queryContent"],Object(i["a"])({},r));case 8:d=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e["catch"](5),e.abrupt("return",Promise.reject(e.t0));case 14:return d=d.list,e.next=17,o({type:"saveAll",payload:{model:l,response:d,view:s}});case 17:return e.abrupt("return",d);case 18:case"end":return e.stop()}}),e,null,[[5,11]])})),download:c.a.mark((function e(t,n){var r,a,o;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,e.prev=2,e.next=5,a(f["downloadContent"],Object(i["a"])({},r));case 5:o=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",Promise.reject(e.t0));case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})),create:c.a.mark((function e(t,n){var r,o,l,u,s,d;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,l=n.put,u=r.values,s=r.schema,e.prev=3,e.next=6,o(f["createContent"],Object(i["a"])(Object(i["a"])({},r),{},{values:Object(p["G"])(u,s)}));case 6:d=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e["catch"](3),e.abrupt("return",Promise.reject(e.t0));case 12:return a["a"].success("\u63d0\u4ea4\u6210\u529f"),e.next=15,l({type:"refreshAllOfModel",payload:{model:r.model}});case 15:return e.abrupt("return",d);case 16:case"end":return e.stop()}}),e,null,[[3,9]])})),createTag:c.a.mark((function e(t,n){var r,a,i,o,l;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,i=n.put,o=r.model,e.prev=3,e.next=6,a(f["createContent"],r);case 6:l=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e["catch"](3),e.abrupt("return",Promise.reject(e.t0));case 12:return e.next=14,i({type:"refreshAllOfModel",payload:{model:r.model}});case 14:return e.next=16,i({type:"saveDetail",payload:{model:o,id:Object(p["M"])(l,o),response:l}});case 16:return e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,null,[[3,9]])})),update:c.a.mark((function e(t,n){var r,o,l,u,s,d;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,l=n.put,u=r.values,s=r.schema,e.prev=3,e.next=6,o(f["updateFullContent"],Object(i["a"])(Object(i["a"])({},r),{},{values:Object(p["G"])(u,s)}));case 6:d=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e["catch"](3),e.abrupt("return",Promise.reject(e.t0));case 12:return a["a"].success("\u5df2\u4fdd\u5b58"),e.next=15,l({type:"refreshAllOfModel",payload:{model:r.model}});case 15:return e.next=17,l({type:"detail",payload:{model:r.model,id:r.id}});case 17:return e.abrupt("return",d);case 18:case"end":return e.stop()}}),e,null,[[3,9]])})),detail:c.a.mark((function(e,t){var n,r,a,o,l,u,s,d;return c.a.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n=e.payload,r=t.call,a=t.put,o=n.model,l=n.id,u=n.wrapOptions,s=n.detail,c.prev=3,c.next=6,r(f["contentDetail"],Object(i["a"])(Object(i["a"])({},n),{},{detail:s}),u);case 6:d=c.sent,c.next=12;break;case 9:return c.prev=9,c.t0=c["catch"](3),c.abrupt("return",Promise.reject(c.t0));case 12:return c.next=14,a({type:"saveDetail",payload:{model:o,id:l,response:d}});case 14:return c.abrupt("return",d);case 15:case"end":return c.stop()}}),s,null,[[3,9]])})),delete:c.a.mark((function e(t,n){var r,a,i,o,l,u;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,i=n.put,o=r.model,l=r.id,e.prev=3,e.next=6,a(f["deleteContent"],{model:o,id:l});case 6:u=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e["catch"](3),e.abrupt("return",Promise.reject(e.t0));case 12:return e.next=14,i({type:"refreshAllOfModel",payload:{model:r.model}});case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})),batchAction:c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,e.prev=2,e.next=5,a(f["batchAction"],r);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})),patch:c.a.mark((function e(t,n){var r,a,i,o,l,u,s,d,m;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,i=n.put,o=r.model,l=r.id,u=r.newValues,s=r.schema,d=r.appendModeFields,e.prev=3,e.next=6,a(f["updateContent"],{model:o,id:l,newValues:Object(p["G"])(u,s),appendModeFields:d});case 6:m=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e["catch"](3),e.abrupt("return",Promise.reject(e.t0));case 12:return e.next=14,i({type:"refreshAllOfModel",payload:{model:r.model}});case 14:return e.abrupt("return",m);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})),choices:c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,e.prev=2,e.next=5,a(f["getChoices"],r);case 5:i=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",Promise.reject(e.t0));case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})),cacheAll:c.a.mark((function e(t,n){var r,a,i,o,l,u,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,i=n.put,o=n.select,e.next=4,o((function(e){return e.content.all[r.model]}));case 4:if(l=e.sent,!l){e.next=7;break}return e.abrupt("return",l);case 7:return e.prev=7,e.next=10,a(f["queryContent"],{model:r.model,expandFields:[]});case 10:s=e.sent,u=s.list,e.next=17;break;case 14:return e.prev=14,e.t0=e["catch"](7),e.abrupt("return",Promise.reject(e.t0));case 17:return e.next=19,i({type:"saveAllOfModel",payload:{model:r.model,response:u}});case 19:return e.next=21,o((function(e){return e.content.all[r.model]}));case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,null,[[7,14]])})),getSchemas:c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.call,a=n.put,e.prev=1,e.next=4,r(f["getSchemas"]);case 4:i=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 10:return e.next=12,a({type:"saveSchema",payload:{schemas:i}});case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})),getAdminConfig:c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.call,a=n.put,e.prev=1,e.next=4,r(f["getAdminConfig"]);case 4:i=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 10:return e.next=12,a({type:"saveAdminConfig",payload:{adminConfig:i}});case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})),getConfig:c.a.mark((function t(n,r){var a,i,o,l;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.call,i=r.put,t.prev=1,t.next=4,a(f["getConfig"]);case 4:o=t.sent,l=e.cloneDeep(o.admins),Object(m["configPreprocess"])(o.admins,o.schemas),Object(m["configPreprocess"])(l,o.schemas,{noDefault:!0}),t.next=13;break;case 10:return t.prev=10,t.t0=t["catch"](1),t.abrupt("return",Promise.reject(t.t0));case 13:return t.next=15,i({type:"saveConfig",payload:{config:o,adminWithoutDefault:l}});case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})),updateAdmin:c.a.mark((function t(n,o){var l,u,s,d,p,_,h,b,v,g,O;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l=n.payload,u=l.model,s=l.config,d=o.call,p=o.put,_=o.select,t.next=4,_((function(e){return e.content.adminConfig}));case 4:return h=t.sent,t.next=7,_((function(e){return e.content.schemas}));case 7:return b=t.sent,v=Object(i["a"])(Object(i["a"])({},h),{},Object(r["a"])({},u,e.cloneDeep(s))),Object(m["configPreprocess"])(v,b),t.next=12,_((function(e){return e.content.adminWithoutDefault}));case 12:return g=t.sent,O=Object(i["a"])(Object(i["a"])({},g),{},Object(r["a"])({},u,e.cloneDeep(s))),t.prev=14,t.next=17,d(f["updateAdmin"],{model:u,config:s});case 17:t.next=22;break;case 19:return t.prev=19,t.t0=t["catch"](14),t.abrupt("return",Promise.reject(t.t0));case 22:return t.next=24,p({type:"saveAdminConfig",payload:{adminConfig:v,adminWithoutDefault:O}});case 24:return a["a"].success("\u66f4\u65b0\u6210\u529f"),t.abrupt("return",!0);case 26:case"end":return t.stop()}}),t,null,[[14,19]])})),cloudFunction:c.a.mark((function e(t,n){var r,a,i,o,l,u;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.call,a=t.payload,i=a.model,o=a.functionName,l=a.params,e.next=4,r(f["cloudFunction"],{model:i,functionName:o,params:l});case 4:if(u=e.sent,!(parseInt(u.error_code,10)>0)){e.next=7;break}return e.abrupt("return",Promise.reject(u.error_message));case 7:return e.abrupt("return",u.message);case 8:case"end":return e.stop()}}),e)})),action:c.a.mark((function e(t,n){var r,a,o,l,u,s,d,p;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.call,a=n.put,o=t.payload,l=o.model,u=o.action,s=o.id,d=o.params,e.next=4,r(f["cloudFunction"],{model:l,functionName:u,params:Object(i["a"])({id:s},d)});case 4:if(p=e.sent,!(parseInt(p.error_code,10)>0)){e.next=7;break}return e.abrupt("return",Promise.reject(p.error_message));case 7:return e.next=9,a({type:"fetch",payload:{model:l}});case 9:return e.abrupt("return",p);case 10:case"end":return e.stop()}}),e)})),statistics:c.a.mark((function e(t,n){var r,a,i,o,l,u,s,d,p;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.call,a=n.put,i=n.select,o=t.payload,l=o.model,u=o.filters,s=void 0===u?[]:u,e.next=4,i((function(e){return e.content.adminConfig[l]}));case 4:if(d=e.sent,d.statistics){e.next=7;break}return e.abrupt("return",null);case 7:return e.prev=7,e.next=10,r(f["statistics"],{model:l,filters:s});case 10:p=e.sent,e.next=16;break;case 13:return e.prev=13,e.t0=e["catch"](7),e.abrupt("return",Promise.reject(e.t0));case 16:return e.next=18,a({type:"saveStat",payload:{model:l,stat:p}});case 18:return e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,null,[[7,13]])})),login:c.a.mark((function e(t,n){var r,a,i,o,l,s,d,p,m;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,i=n.put,e.next=4,a(f["login"],r);case 4:return o=e.sent,e.next=7,i({type:"changeLoginStatus",payload:o});case 7:"ok"===o.status&&(l=new URL(window.location.href),s=_(),d=s,p=d.redirect,p&&p.startsWith("http")&&(m=new URL(p),m.origin===l.origin?(p=p.substr(l.origin.length),p.match(/^\/.*#/)&&(p=p.substr(p.indexOf("#")+1))):p="/"),u["a"].replace(p||"/"));case 8:case"end":return e.stop()}}),e)})),getVersions:c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.call,a=n.put,e.next=3,r(f["getVersion"]);case 3:return i=e.sent,e.next=6,a({type:"saveVersions",payload:i});case 6:case"end":return e.stop()}}),e)})),logout:c.a.mark((function e(t,n){var r,a,i,o,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.call,a=n.select,e.next=3,r(f["accountLogout"]);case 3:return i=_(),o=i.redirect,e.next=6,a((function(e){return e.router.location.pathname}));case 6:s=e.sent,"/user/login"===s||o||u["a"].replace({pathname:"/user/login",search:Object(l["stringify"])({redirect:window.location.origin+s})});case 8:case"end":return e.stop()}}),e)})),refreshAllOfModel:c.a.mark((function e(t,n){var r,a,i,o,l;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload.model,a=n.select,i=n.put,e.next=4,a((function(e){return e.content.all[r]}));case 4:return o=e.sent,e.next=7,i({type:"clearAllOfModel",payload:{model:r}});case 7:if(!o){e.next=13;break}return e.next=10,a((function(e){return e.content.schemas[r].titleField}));case 10:return l=e.sent,e.next=13,i({type:"cacheAll",payload:{model:r,titleField:l}});case 13:case"end":return e.stop()}}),e)}))},reducers:{save:function(e,t){var n=t.payload,r=n.model,a=n.view,o=n.response,c=e.data,l=a?"".concat(r,"#").concat(a):r;return c[l]?(c[l]=Object(i["a"])(Object(i["a"])({},c[l]),{},{list:o.list}),c[l]=Object(i["a"])(Object(i["a"])({},c[l]),{},{pagination:o.pagination})):c[l]=o,Object(i["a"])(Object(i["a"])({},e),{},{data:c})},saveAll:function(e,t){var n=t.payload,r=n.model,a=n.view,o=n.response,c=e.data,l=a?"".concat(r,"#").concat(a):r;return c[l]?(c[l].list=o,delete c[l].pagination):c[l]={list:o},Object(i["a"])(Object(i["a"])({},e),{},{data:c})},saveChoices:function(e,t){var n=t.payload,r=n.model,a=n.response,o=e.choices;return o[r]=a,Object(i["a"])(Object(i["a"])({},e),{},{choices:o})},saveAllOfModel:function(e,t){var n=t.payload,a=n.model,o=n.response;return Object(i["a"])(Object(i["a"])({},e),{},{all:Object(i["a"])(Object(i["a"])({},e.all),{},Object(r["a"])({},a,o))})},clearAllOfModel:function(e,t){var n=t.payload.model,r=e.all;return delete r[n],Object(i["a"])(Object(i["a"])({},e),{},{all:Object(i["a"])({},r)})},saveDetail:function(e,t){var n,a=t.payload,o=a.model,c=a.id,l=a.response;return Object(i["a"])(Object(i["a"])({},e),{},{data:Object(i["a"])(Object(i["a"])({},e.data),{},Object(r["a"])({},o,Object(i["a"])(Object(i["a"])({},e.data[o]),{},{detail:Object(i["a"])(Object(i["a"])({},null===(n=e.data[o])||void 0===n?void 0:n.detail),{},Object(r["a"])({},c,l))})))})},saveSchema:function(e,t){var n=t.payload.schemas;return Object(i["a"])(Object(i["a"])({},e),{},{schemas:n})},saveAdminConfig:function(e,t){var n=t.payload,r=n.adminConfig,a=n.adminWithoutDefault;return Object(i["a"])(Object(i["a"])({},e),{},{adminConfig:r,adminWithoutDefault:a})},saveConfig:function(e,t){var n=t.payload,r=n.config,a=r.schemas,o=r.admins,c=n.adminWithoutDefault;return Object(i["a"])(Object(i["a"])({},e),{},{schemas:a,adminConfig:o,adminWithoutDefault:c})},saveStat:function(e,t){var n=t.payload,a=n.model,o=n.stat;return Object(i["a"])(Object(i["a"])({},e),{},{stat:Object(i["a"])(Object(i["a"])({},e.stat),{},Object(r["a"])({},a,o))})},saveVersions:function(e,t){var n=t.payload;return Object(i["a"])(Object(i["a"])({},e),n)},changeLoginStatus:function(e,t){var n=t.payload;return Object(i["a"])(Object(i["a"])({},e),{},{login:n})}}};t["b"]=g;var O=Object(d["c"])((function(e){var t=e.content;return Object(i["a"])({},t)}),(function(t){return e.mapValues(g.effects,(function(e,n){return function(e){return t({type:"content/".concat(n),payload:e})}}))}))}).call(this,n("LvDl"))},uCub:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("oBTY"),a=n("k1fw"),i=n("4b23"),o=n.n(i),c=n("BGR+"),l=function(e,t,n){var i,l,u,s=null===(i=e[n])||void 0===i?void 0:i.details,d=null===(l=e[n])||void 0===l?void 0:l.detail,f=t[n],p=[];d&&(d.sections&&"tab"===d.style?d.sections.forEach((function(e){p.push(Object(a["a"])(Object(a["a"])({},d),{},{key:o()(6),title:e.title,sections:[Object(c["a"])(e,"title")],style:"group"}))})):p.push(Object(a["a"])(Object(a["a"])({key:o()(6)},d),{},{style:"group"})),null===(u=e[n])||void 0===u||delete u.detail);if(s){var m=function(e){return e.key?Object(a["a"])({},e):Object(a["a"])(Object(a["a"])({},e),{},{key:o()(6)})};p=[].concat(Object(r["a"])(p),Object(r["a"])(s.map(m)))}return p.forEach((function(e){var t;null===e||void 0===e||null===(t=e.sections)||void 0===t||t.forEach((function(e){e.fields=e.fields.filter((function(e){return f.fields.find((function(t){return t.name===((null===e||void 0===e?void 0:e.name)||e)}))}))}))})),p}},uRgk:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n("52nx");var r=n("7bDm"),a=(n("6dnR"),n("CQJL")),i=(n("eE3J"),n("GSZB")),o=n("fWQN"),c=n("mtLc"),l=n("yKVA"),u=n("879j"),s=n("q1tI"),d=n.n(s),f=n("AAgL"),p=n("3i6F"),m={filled:["account-book","alert","alipay-circle","alipay-square","aliwangwang","amazon-circle","android","amazon-square","api","appstore","audio","apple","backward","bank","behance-circle","bell","behance-square","book","box-plot","bug","bulb","calculator","build","calendar","camera","car","caret-down","caret-left","caret-right","carry-out","caret-up","check-circle","check-square","chrome","ci-circle","clock-circle","close-circle","cloud","close-square","code-sandbox-square","code-sandbox-circle","code","codepen-circle","compass","codepen-square","contacts","container","control","copy","copyright-circle","credit-card","crown","customer-service","dashboard","delete","diff","dingtalk-circle","database","dingtalk-square","dislike","dollar-circle","down-circle","down-square","dribbble-circle","dribbble-square","dropbox-circle","dropbox-square","environment","edit","exclamation-circle","euro-circle","experiment","eye-invisible","eye","facebook","fast-backward","fast-forward","file-add","file-excel","file-exclamation","file-image","file-markdown","file-pdf","file-ppt","file-text","file-unknown","file-word","file-zip","file","filter","fire","flag","folder-add","folder","folder-open","forward","frown","fund","funnel-plot","gift","github","gitlab","golden","google-circle","google-plus-circle","google-plus-square","google-square","hdd","heart","highlight","home","hourglass","html5","idcard","ie-circle","ie-square","info-circle","instagram","insurance","interaction","interation","layout","left-circle","left-square","like","linkedin","lock","mail","medicine-box","medium-circle","medium-square","meh","message","minus-circle","minus-square","mobile","money-collect","pause-circle","pay-circle","notification","phone","picture","pie-chart","play-circle","play-square","plus-circle","plus-square","pound-circle","printer","profile","project","pushpin","property-safety","qq-circle","qq-square","question-circle","read","reconciliation","red-envelope","reddit-circle","reddit-square","rest","right-circle","rocket","right-square","safety-certificate","save","schedule","security-scan","setting","shop","shopping","sketch-circle","sketch-square","skin","slack-circle","skype","slack-square","sliders","smile","snippets","sound","star","step-backward","step-forward","stop","switcher","tablet","tag","tags","taobao-circle","taobao-square","tool","thunderbolt","trademark-circle","twitter-circle","trophy","twitter-square","unlock","up-circle","up-square","usb","video-camera","wallet","warning","wechat","weibo-circle","windows","yahoo","weibo-square","yuque","youtube","zhihu-circle","zhihu-square"],outlined:["account-book","alert","alipay-circle","aliwangwang","android","api","appstore","audio","apple","backward","bank","bell","behance-square","book","box-plot","bug","bulb","calculator","build","calendar","camera","car","caret-down","caret-left","caret-right","carry-out","caret-up","check-circle","check-square","chrome","clock-circle","close-circle","cloud","close-square","code","codepen-circle","compass","contacts","container","control","copy","credit-card","crown","customer-service","dashboard","delete","diff","database","dislike","down-circle","down-square","dribbble-square","environment","edit","exclamation-circle","experiment","eye-invisible","eye","facebook","fast-backward","fast-forward","file-add","file-excel","file-exclamation","file-image","file-markdown","file-pdf","file-ppt","file-text","file-unknown","file-word","file-zip","file","filter","fire","flag","folder-add","folder","folder-open","forward","frown","fund","funnel-plot","gift","github","gitlab","hdd","heart","highlight","home","hourglass","html5","idcard","info-circle","instagram","insurance","interaction","interation","layout","left-circle","left-square","like","linkedin","lock","mail","medicine-box","meh","message","minus-circle","minus-square","mobile","money-collect","pause-circle","pay-circle","notification","phone","picture","pie-chart","play-circle","play-square","plus-circle","plus-square","printer","profile","project","pushpin","property-safety","question-circle","read","reconciliation","red-envelope","rest","right-circle","rocket","right-square","safety-certificate","save","schedule","security-scan","setting","shop","shopping","skin","skype","slack-square","sliders","smile","snippets","sound","star","step-backward","step-forward","stop","switcher","tablet","tag","tags","taobao-circle","tool","thunderbolt","trophy","unlock","up-circle","up-square","usb","video-camera","wallet","warning","wechat","weibo-circle","windows","yahoo","weibo-square","yuque","youtube","alibaba","align-center","align-left","align-right","alipay","aliyun","amazon","ant-cloud","apartment","ant-design","area-chart","arrow-left","arrow-down","arrow-up","arrows-alt","arrow-right","audit","bar-chart","barcode","bars","behance","bg-colors","block","bold","border-bottom","border-left","border-outer","border-inner","border-right","border-horizontal","border-top","border-verticle","border","branches","check","ci","close","cloud-download","cloud-server","cloud-sync","cloud-upload","cluster","codepen","code-sandbox","colum-height","column-width","column-height","coffee","copyright","dash","deployment-unit","desktop","dingding","disconnect","dollar","double-left","dot-chart","double-right","down","drag","download","dribbble","dropbox","ellipsis","enter","euro","exception","exclamation","export","fall","file-done","file-jpg","file-protect","file-sync","file-search","font-colors","font-size","fork","form","fullscreen-exit","fullscreen","gateway","global","google-plus","gold","google","heat-map","history","ie","import","inbox","info","italic","key","issues-close","laptop","left","line-chart","link","line-height","line","loading-3-quarters","loading","login","logout","man","medium","medium-workmark","menu-unfold","menu-fold","menu","minus","monitor","more","ordered-list","number","pause","percentage","paper-clip","pic-center","pic-left","pic-right","plus","pound","poweroff","pull-request","qq","question","radar-chart","qrcode","radius-bottomleft","radius-bottomright","radius-upleft","radius-setting","radius-upright","reddit","redo","reload","retweet","right","rise","rollback","safety","robot","scan","search","scissor","select","shake","share-alt","shopping-cart","shrink","sketch","slack","small-dash","solution","sort-descending","sort-ascending","stock","swap-left","swap-right","strikethrough","swap","sync","table","team","taobao","to-top","trademark","transaction","twitter","underline","undo","unordered-list","up","upload","user-add","user-delete","usergroup-add","user","usergroup-delete","vertical-align-bottom","vertical-align-middle","vertical-align-top","vertical-left","vertical-right","weibo","wifi","zhihu","woman","zoom-out","zoom-in"]},_=m,h=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;Object(o["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.state={visible:!1,theme:"outlined"},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(){e.setState({visible:!1})},e.handleCancel=function(){e.setState({visible:!1})},e.handleSizeChange=function(t){e.setState({theme:t.target.value})},e}return Object(c["a"])(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,o=t.onChange,c=this.state.theme;return d.a.createElement("div",null,d.a.createElement("div",{style:{display:"flex",alignItems:"center"}},n&&Object(p["b"])({icon:n,restProps:{style:{fontSize:24,marginRight:10}}}),d.a.createElement("div",null,d.a.createElement("span",{style:{color:"#1890ff",cursor:"pointer",marginRight:10},onClick:this.showModal},"\u9009\u62e9\u56fe\u6807"),!!n&&d.a.createElement(i["a"],{onClick:function(){return o("")},type:"close"}))),d.a.createElement(r["a"],{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,width:"60%",footer:null},d.a.createElement(a["a"].Group,{value:c,onChange:this.handleSizeChange},d.a.createElement(a["a"].Button,{value:"outlined"},"\u7ebf\u6846\u98ce\u683c"),d.a.createElement(a["a"].Button,{value:"filled"},"\u5b9e\u5e95\u98ce\u683c")),d.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",marginTop:10,height:800,overflowY:"scroll"}},_[c].map((function(t){var r="".concat(t,"__").concat(c),a=r===n;return d.a.createElement("div",{style:{padding:10,backgroundColor:a?"#1890ff":"white"},key:t},Object(p["b"])({icon:r,restProps:{style:{fontSize:32,color:a?"white":"#595959"},onClick:function(){e.handleOk(),o(r)}}}))})))))}}]),n}(f["a"])},vbsh:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return _}));var r=n("PpiC"),a=n("9og8"),i=n("k1fw"),o=n("WmNS"),c=n.n(o),l=n("LvDl"),u=n.n(l),s=["Create","Update","Delete","List","Detail"],d={},f={};s.forEach((function(e){f["before".concat(e)]="before".concat(e),f["after".concat(e)]="after".concat(e)}));var p=function(e,t,n){e in d||(d[e]=[]),d[e].push({events:Array.isArray(t)?t:[t],handler:n})},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e in d&&d[e].forEach((function(r){var a=r.events,o=r.handler;a.includes(t)&&o(Object(i["a"])({model:e,event:t},n))}))},_=u()(s).map((function(e){return[e,function(t){return function(){var n=Object(a["a"])(c.a.mark((function n(a){var o,l,u,s,d,f,p=arguments;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(o=a.model,l=Object(r["a"])(a,["model"]),m(o,"before".concat(e)),u=p.length,s=new Array(u>1?u-1:0),d=1;d<u;d++)s[d-1]=p[d];return n.next=5,t.apply(void 0,[Object(i["a"])({model:o},l)].concat(s));case 5:return f=n.sent,m(o,"after".concat(e)),n.abrupt("return",f);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}]})).fromPairs().value()},wiuW:function(e,t,n){"use strict";n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return K})),n.d(t,"a",(function(){return H})),n.d(t,"d",(function(){return z})),n.d(t,"f",(function(){return J})),n.d(t,"e",(function(){return Y}));var r=n("oBTY"),a=n("0Owb"),i=n("k1fw"),o=n("q1tI"),c=n.n(o),l=n("eljF"),u=n("2mwZ"),s=n("mmaM"),d=n("3i6F");function f(e){function t(e){var t,n=e.widgetProps,r=e.record,o=n.field;if("default"!==(null===o||void 0===o?void 0:o.name))return c.a.createElement(d["a"],e);var l=r[null===o||void 0===o?void 0:o.name],s=Object(i["a"])({},n),f=Object(i["a"])({},r);f[o.name]=null===l||void 0===l?void 0:l.value;var p=r.name,m=r.type,_=r.verbose_name,h=r.primary_key,b=r.choice_items;return l&&l.value&&(s.field=Object(i["a"])({name:p,displayName:_||p,primaryKey:h,type:u["b"][m]},null!==b&&void 0!==b&&b.length?{choices:b.map((function(e){return[e.value,e.name]}))}:{})),c.a.createElement(d["a"],Object(a["a"])({},e,{widgetProps:s,record:f,widgetName:null===(t=d["e"][u["b"][m]||"string"])||void 0===t?void 0:t[0]}))}var n=e.fetch,o=e.model;return c.a.createElement(l["a"],Object(a["a"])({},e,{fetch:function(e){return n(Object(i["a"])(Object(i["a"])({},e),{},{expandFields:[].concat(Object(r["a"])(Object(s["getExpandFields"])(o,"display")),["choice_items"])}))},renderColumn:t}))}var p=n("/MKj");function m(e){var t=e.tableActions,n=void 0===t?[]:t,i=e.provider,o=Object(r["a"])(n);return"wechat"===i&&o.push({type:"action",title:"\u540c\u6b65\u4f01\u4e1a\u5fae\u4fe1\u7528\u6237",params:{action:"export_wechat_work_departmemt_user"}}),"dingding"===i&&o.push({action:"action",title:"\u540c\u6b65\u9489\u9489\u7528\u6237",params:{action:"export_dingding_departmemt_user"}}),c.a.createElement(l["a"],Object(a["a"])({},e,{tableActions:o}))}var _=Object(p["c"])((function(e){var t=e.bsmSetting.third_party_provider;return{provider:t}}))(m),h=n("yRbM"),b=n("tJVT"),v=n("PpiC"),g=n("jrin"),O=n("fWQN"),y=n("mtLc"),j=n("w4Tj"),w=n("oZsa"),E=n("yKVA"),k=n("879j"),C=n("xJcd"),x=["bigint","timestamp","bigauto"],M=["auto","int","positiveint","smallint","positivesmallint"],P=["uuid","ipaddr","image","url","email","slug","char","file"],S=["array","object","text"],A=[x,P,S,["time"],["date"],["datetime"],["decimal"],M,["float"],["bool"]],D=["bigint","bigauto","uuid","email","slug","char","auto","int","positiveint","smallint","positivesmallint"];function F(e){return A.find((function(t){return t.includes(e)}))}var T={operator:"or",children:[{field:"unique",operator:"=",value:!0},{field:"primary_key",operator:"=",value:!0}]},L=function(e){Object(E["a"])(n,e);var t=Object(k["a"])(n);function n(){return Object(O["a"])(this,n),t.apply(this,arguments)}return Object(y["a"])(n,[{key:"fieldProps",value:function(e,t){var a,o=this,c=this.props.form,l=this.getContentValue("type"),u=this.getContentValue("to_field"),s=M.includes(l)||"fk"===l&&(null===u||M.includes(null===u||void 0===u?void 0:u.type)),d="to_field"===e.name&&(void 0===l||s&&!0===(null===(a=c.getFieldValue("to"))||void 0===a?void 0:a.implicit_id)),f=d?Object(i["a"])(Object(i["a"])({},e),{},{required:!1}):e,p=[],m={field:"primary_key",operator:"=",value:!0};d?(p.push({field:"type",operator:"in",value:M}),p.push(T)):"fk"===l?p.push(m):(p.push({field:"type",operator:"in",value:F(l)}),p.push(T));var _="to_field"===e.name?Object(i["a"])(Object(i["a"])({},t),{},{widget:"Select",params:Object(i["a"])({filterRequired:!0,choicesFilter:[{field:"model",operator:"=",variable:"to"}].concat(Object(r["a"])(p))},d?{choicesPipe:function(e){return[[null,Object(g["a"])({},o.schema.titleField,"\u9ed8\u8ba4\u5173\u8054\u4e3b\u952e")]].concat(Object(r["a"])(e))}}:{})}):t,h=Object(j["a"])(Object(w["a"])(n.prototype),"fieldProps",this).call(this,f,_),O=h.widgetProps,y=Object(v["a"])(h,["widgetProps"]);if(O&&"type"===e.name&&l){var E="fk"===l?null===u?M:F(null===u||void 0===u?void 0:u.type):F(l);O.choices=O.choices.filter((function(e){var t=Object(b["a"])(e,1),n=t[0];return n===l||E&&E.includes(n)||["o2o","fk"].includes(n)&&D.includes(l)}))}return Object(i["a"])({widgetProps:O},y)}}]),n}(C["b"]),I=n("9og8"),U=n("WmNS"),R=n.n(U),V=n("jfUH"),W=function(e){Object(E["a"])(n,e);var t=Object(k["a"])(n);function n(){return Object(O["a"])(this,n),t.apply(this,arguments)}return Object(y["a"])(n,[{key:"submit",value:function(){var e=Object(I["a"])(R.a.mark((function e(t){var r;return R.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.password,!r){e.next=3;break}return e.abrupt("return",Object(j["a"])(Object(w["a"])(n.prototype),"submit",this).call(this,Object(i["a"])(Object(i["a"])({},t),{},{password:Object(V["K"])(r)})));case 3:return e.abrupt("return",Object(j["a"])(Object(w["a"])(n.prototype),"submit",this).call(this,t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(C["b"]),B=W,q=n("AhFF"),N={meta__field:f,member__user:_},K={shield__rule:h["a"],meta__field:L,auth__user:B},H={},z={FieldPermission:q["a"]},J={FieldPermission:["meta__model"]},Y={}},xJcd:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return G})),n.d(t,"a",(function(){return ee})),n.d(t,"b",(function(){return te}));var r,a=n("9og8"),i=n("tS8v"),o=n("w4Tj"),c=n("oZsa"),l=(n("DYRE"),n("zeV3")),u=(n("R/sH"),n("djfd")),s=(n("eNCU"),n("pjJH")),d=n("0Owb"),f=n("oBTY"),p=n("k1fw"),m=n("jrin"),_=n("fWQN"),h=n("mtLc"),b=n("yKVA"),v=n("879j"),g=n("tJVT"),O=(n("5RCp"),n("a82I")),y=(n("Ahcs"),n("k0dM")),j=(n("SePM"),n("PMX6")),w=n("qqnG"),E=(n("vmZS"),n("NjVP")),k=n("WmNS"),C=n.n(k),x=n("q1tI"),M=n.n(x),P=n("/MKj"),S=n("vOnD"),A=n("9Ndd"),D=n("d76M"),F=n("VW+w"),T=n("jfUH"),L=n("rQ+i"),I=n("ctVj"),U=n("mmaM"),R=n("Utjr"),V=n("3V3B"),W=n("fNJA"),B=n("Utzx"),q=E["a"].Item,N=Object(S["a"])(E["a"].Item)(r||(r=Object(w["a"])(["\n  &.bsm-bref .has-error [class^='ant-'] {\n    border-color: #d9d9d9 !important;\n  }\n  &.bsm-bref .has-error .has-error [class^='ant-'] {\n    border-color: red !important;\n  }\n"])));function K(e){if("decimal"===e.type){if(!e.maxDigits||!e.precision)return{};var t=Math.pow(10,e.maxDigits)-Math.pow(10,-1*e.precision);return{precision:e.precision,max:t,min:-t,step:Math.pow(10,-1*e.precision)}}return{}}var H={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}};function z(e){var t=e.title,n=e.children,r=e.description,a=e.style,i=e.index,o=e.loading,c=a;return-1===["group","tab","step"].indexOf(a)&&(c="group"),"group"===c?M.a.createElement(j["a"],{bordered:!1,title:t,style:{marginBottom:24},loading:o},n):"tab"===c?M.a.createElement(y["a"].TabPane,{key:i,tab:t},n):M.a.createElement(O["a"].Step,{title:t,description:r},n)}function J(e){return 0===e.length?[]:e.filter((function(e){return e.variable})).map((function(e){return e.variable})).concat(J(e.filter((function(e){return e.children})).map((function(e){return e.children})).flat()))}function Y(e,t){var n=t;if(!n)return[];var r=[];if((Object(T["D"])(e)||"mref"===e.type)&&(n.params&&n.params.choicesFilter||n.choicesFilter)){var a=n.params&&n.params.choicesFilter||n.choicesFilter,i="string"===typeof a?Object(T["J"])(a).filter((function(e){return!e.startsWith("instance.")})):J(a);r=r.concat(i)}return r}var G=e.flow(E["a"].create({onValuesChange:function(e,t,n){var r=e.onChange,a=e.object;r&&Object.entries(t).some((function(e){var t=Object(g["a"])(e,2),n=t[0],r=t[1];return a[n]!==r}))&&r(n)}}),Object(P["c"])((function(e){var t=e.content,n=e.user.currentUser;return{content:t,currentUser:n}})),Object(T["d"])((function(){return{formWidgets:Object(A["i"])()}}))),Q=["ref","oref"],Z=function(t){Object(b["a"])(r,t);var n=Object(v["a"])(r);function r(){var e;Object(_["a"])(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),e.state={contentObject:void 0},e.inlineData={uniqueValues:{}},e.changingField=[],e.sharedData={brefFields:{}},e.formItemLayout={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20},md:{span:19}}},e}return Object(h["a"])(r,[{key:"componentWillMount",value:function(){var t=this.props.object;if(e.isEmpty(t)){if(this.isAdd()){var n=Object(A["c"])(this.schema,this.formFields);this.setState({contentObject:n})}}else this.setState({contentObject:t})}},{key:"componentWillReceiveProps",value:function(t){var n=t.content,r=t.model,a=t.objectid,i=t.object,o=t.form,c=o.setFieldsValue,l=o.getFieldsValue,u=this.props.object,s=n.data[r];s&&s.detail&&!e.isEmpty(s.detail[a])&&this.setState({contentObject:s.detail[a]}),i&&i!==u&&Object.keys(l()).forEach((function(e){Object.keys(i).includes(e)&&c(Object(m["a"])({},e,i[e]))}))}},{key:"model",get:function(){var e=this.props.model;return e}},{key:"schema",get:function(){return this.schemas[this.model]}},{key:"schemas",get:function(){var e=this.props,t=e.schemas,n=e.content.schemas;return t||n}},{key:"admin",get:function(){return this.admins[this.model]}},{key:"admins",get:function(){var e=this.props,t=e.admins,n=e.content.adminConfig;return t||n}},{key:"formFields",get:function(){var t=this.props,n=t.model,r=t.fields,a=t.admins,i=t.currentUser,o=this.admins;if(r&&e.isEmpty(a))return Object(F["formFieldsPreprocess"])(r,this.schema.fields);var c=o[n]||{},l=c.formFields,u=void 0===l?[]:l,s={fields:u,currentUser:i,model:n},d=Object(L["b"])(s);return a?Object(F["formFieldsPreprocess"])(d,this.schema.fields):this.accessibleFields(d)}},{key:"accessibleFields",value:function(e){var t=this.props.model;if(e.length){var n=Object(T["p"])(t);return e.filter((function(e){var t,r;return null===(t=null===(r=n[e.name])||void 0===r?void 0:r.write)||void 0===t||t}))}return e}},{key:"getContentValue",value:function(e){var t=this.state.contentObject;return null===t||void 0===t?void 0:t[e]}},{key:"getWidget",value:function(t,n){var r=this,a=this.state.contentObject,i=this.props,o=i.form,c=i.objectid,l=i.content.schemas,u=i.formWidgets,s=this.model,d=Object(p["a"])(Object(p["a"])({form:o},K(t)),{},{objectid:c,instance:a});n.options&&Object.keys(n.options).forEach((function(e){"SCHEMAS"===n.options[e]?d[e]=l:/^\$\{.*\}$/.test(n.options[e])?d[e]=o.getFieldValue(Object(T["J"])(n.options[e])[0]):d[e]=n.options[e]}));var f,m=Y(t,n);m&&(d.monitormodel=s,d.monitorfields=m,d.monitorvalues=this.changingField,d.choicesFilter=(null===(f=n.params)||void 0===f?void 0:f.choicesFilter)||n.choicesFilter);(!this.isAdd()&&t.name===this.schema.fields.find((function(e){return e.primaryKey})).name||n&&n.disabled&&this.meetStatement(n.disabled))&&(d.disabled=!0);var _=u[A["e"][t.type]];void 0!==t.choices&&(d.choices=t.choices,_=V["a"]);var h=n.widget;if(e.isString(h))_=u[h];else if(e.isObject(h)){_=u[h.type];var b=h.attrs;d=Object(p["a"])(Object(p["a"])({},d),b)}var v=n&&n.params||{};d=Object(p["a"])(Object(p["a"])({},d),v),d.field=t,d.onChange=function(e){return r.changeHandler(t.name,e,n)},d.validateparams={},d.extra=this.sharedData;var g=n.nestedForm;return!e.isEmpty(g)&&Q.includes(t.type)&&(d=Object(p["a"])(Object(p["a"])({Widget:_,model:s},d),{},{nestedForm:g,parentPk:c}),_=u.RefEdit),{Widget:_,options:d}}},{key:"onFieldChange",value:function(e,t,n){this.changingField=[e,t];var r=this.props,a=r.form,i=r.model,o=r.dispatch,c=r.parentform,l=r.onValuesChange,u=n;if(l&&l(e,t,a),u&&u.changeHandler){var s,d=null!==(s=this.getContentValue(e))&&void 0!==s?s:null;Object(D["a"])(i,u.changeHandler,{name:e,value:t,initialValue:d,form:a,dispatch:o,parentform:c})}}},{key:"changeHandler",value:function(e,t,n){this.onFieldChange(e,t,n);var r=this.props,a=r.form,i=r.model,o=r.content,c=o.adminConfig,l=o.schemas,u=c[i]||{},s=u.formHooks,d=void 0===s?[]:s;Object(W["b"])(W["a"],e,t,a,d,{model:i,schemas:l,adminConfig:c})}},{key:"meetStatement",value:function(e){var t=this.props.form.getFieldValue,n=this.state.contentObject,r=function(e){return void 0===t(e)?null===n||void 0===n?void 0:n[e]:t(e)};return Object(T["i"])(e,(function(e){if(-1!==e.indexOf(".")){var t=e.split("."),n=r(t[0]);if(void 0===n||null===n)return JSON.stringify(n);var a=n;return t.slice(1).forEach((function(e){a=Array.isArray(a)?a.flatMap((function(t){return t[e]})):a[e]})),a}return r(e)}))}},{key:"isAdd",value:function(){var e=this.props.objectid;return!e}},{key:"fieldProps",value:function(t,n){var r=this.props,a=r.form,i=r.hiddenFields,o=this.state.contentObject,c=this.model;if(n&&n.show&&!this.meetStatement(n.show)||n.showIf&&!Object(T["H"])(n.showIf,a.getFieldsValue(),this.schemas,c)||!this.isAdd()&&Object(U["expandDetailFields"])(c).includes(t.name)&&!e.isNull(null===o||void 0===o?void 0:o[t.name])&&!e.isPlainObject(null===o||void 0===o?void 0:o[t.name])&&(!e.isArray(null===o||void 0===o?void 0:o[t.name])||null!==o&&void 0!==o&&o[t.name].length&&!e.isPlainObject(null===o||void 0===o?void 0:o[t.name][0])))return M.a.createElement(x["Fragment"],{key:t.name});if(t.name in i)return a.getFieldDecorator(t.name,{initialValue:i[t.name]});var l=this.schema||{},u=l.validators,s="bref"===t.type?N:q,d=n&&n.alias||t.displayName,f="bsm-".concat(t.type),p=this.getWidget(t,n),m=p.Widget,_=p.options;return{Widget:m,widgetProps:_,Item:s,itemProps:{label:d,key:t.name,className:f,extra:t.help},decoratorArgs:[t.name,{initialValue:this.getContentValue(t.name),rules:Object(B["a"])(t,n,{},Object(B["b"])(a.getFieldsValue(),t,u))}]}}},{key:"renderFields",value:function(t){var n=this,r=this.schema||{},a=r.fields,i=void 0===a?[]:a,o=this.formFields;return e.sortBy(o.filter((function(e){return void 0===t||t.includes(e.name)})),(function(e){return t&&t.indexOf(e.name)})).map((function(e){var t=i.find((function(t){return t.name===e.name}));return t&&!1!==t.editable?n.renderField(t,e):null}))}},{key:"renderField",value:function(e,t){var n=this.fieldProps(e,t),r=n.Widget,a=n.Item,i=n.widgetProps,o=n.itemProps,c=n.decoratorArgs;if(!r)return null;var l=this.props.form;return M.a.createElement(a,Object(d["a"])({},this.formItemLayout,o),l.getFieldDecorator.apply(l,Object(f["a"])(c))(M.a.createElement(r,i)))}},{key:"render",value:function(){return M.a.createElement(E["a"],null,this.renderFields())}}]),r}(M.a.Component);Z.defaultProps={object:void 0,objectid:void 0,parentform:void 0,hiddenvalues:{},hiddenFields:{},partialupdate:!1,showButtons:!0};var X=function(e){var t=e.onSubmit,n=e.onReset,r=e.submitting;return M.a.createElement(l["b"],null,M.a.createElement(u["a"],{title:"Ctrl+Enter",mouseEnterDelay:1,placement:"bottom"},M.a.createElement(s["a"],{type:"primary",onClick:t,loading:r},"\u63d0\u4ea4")),M.a.createElement(s["a"],{onClick:n},"\u91cd\u7f6e"))},$=function(e){var t=e.children,n=e.showButtons,r=e.onSubmit,a=e.onReset,i=e.renderSubmitter,o=void 0===i?function(e){return M.a.createElement(q,Object(d["a"])({},H,{style:{marginTop:32}}),e)}:i,c=Object(I["a"])(),l=c.loading,u=c.dispatchPromise,s=u(r);return M.a.createElement(R["a"],{keyMaps:{"mod+enter":s}},M.a.createElement(E["a"],{hideRequiredMark:!1,style:{marginTop:8}},t,n&&o(M.a.createElement(X,{onSubmit:s,onReset:a,submitting:l}))))},ee=G(Z),te=function(t){Object(b["a"])(r,t);var n=Object(v["a"])(r);function r(){var e;Object(_["a"])(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),e.handleSubmit=function(t){var n=e.props.form;t.preventDefault(),t.stopPropagation();var r=e.sharedData.brefFields,a=Object.keys(r),o={force:!0};return a.length&&(o.force=!0),new Promise((function(e,t){n.validateFieldsAndScroll(o,(function(n,r){n?t(n):e(r)}))})).then(e.submit.bind(Object(i["a"])(e)))},e}return Object(h["a"])(r,[{key:"componentWillMount",value:function(){var t=this.props,n=t.objectid,a=t.object,i=t.model,l=t.dispatch,u=t.content.schemas;if(void 0!==n&&void 0===a&&!e.isEmpty(u)&&!e.isEmpty(this.admins)){var s=this.expandFields,d=s&&{expandFields:s};l({type:"content/detail",payload:Object(p["a"])({model:i,id:n},d)})}Object(o["a"])(Object(c["a"])(r.prototype),"componentWillMount",this).call(this)}},{key:"componentDidUpdate",value:function(t){var n=t.content,r=n.schemas,a=n.adminConfig,i=this.props,o=i.content.schemas,c=i.dispatch,l=i.model,u=i.objectid,s=i.object;if(void 0!==u&&void 0===s&&(e.isEmpty(r)||e.isEmpty(a))&&!e.isEmpty(o)&&!e.isEmpty(this.admins)){var d=this.expandFields,f=d&&{expandFields:d};c({type:"content/detail",payload:Object(p["a"])({model:l,id:u},f)})}}},{key:"onSubmit",value:function(){var e=Object(a["a"])(C.a.mark((function e(t,n){var r,a,i,o,c,l,u;return C.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.props,a=r.dispatch,i=r.model,o=r.onUpdate,c=r.onCreate,l=r.partialupdate,void 0===n){e.next=15;break}if(!l){e.next=9;break}return e.next=5,a({type:"content/patch",payload:{newValues:t,model:i,id:n,schema:this.schema}});case 5:u=e.sent,o(u),e.next=13;break;case 9:return e.next=11,a({type:"content/update",payload:{values:t,model:i,id:n,schema:this.schema}});case 11:u=e.sent,o(u);case 13:e.next=19;break;case 15:return e.next=17,a({type:"content/create",payload:{values:t,model:i,schema:this.schema}});case 17:u=e.sent,c(u);case 19:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"submit",value:function(){var e=Object(a["a"])(C.a.mark((function e(t){var n,r,a,i,o,c,l,u,s;return C.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.props,r=n.objectid,a=n.hiddenvalues,i=n.isCopy,o=n.onSubmit,c=void 0===o?this.onSubmit.bind(this):o,l=i?void 0:r,u=Object(p["a"])({},t),a&&Object.keys(a)&&(s=Object.keys(a).filter((function(e){return-1===Object.keys(t).indexOf(e)})),s.length&&s.forEach((function(e){u[e]=a[e]}))),e.next=6,c(u,l);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"expandFields",get:function(){var e=this,t=this.props.fields,n=[];return t?(t.forEach((function(t){var r,a,i=null===(r=e.schema)||void 0===r||null===(a=r.fields)||void 0===a?void 0:a.find((function(e){return e.name===(t.name||t)}));i&&Object(T["B"])(i)&&n.push(i.name)})),n):null}},{key:"render",value:function(){var e=this,t=this.state.contentObject,n=this.props,r=n.model,a=n.hideCard,i=void 0!==a&&a,o=n.showButtons,c=n.form,l=n.renderSubmitter,u=this.admins,s=this.handleSubmit,d=u[r]||{},f=d.formLayout,p=!this.isAdd()&&!t,m={onReset:function(){return c.resetFields()},onSubmit:s,showButtons:o,renderSubmitter:l};if(f){var _=f.style,h=f.sections,b=x["Fragment"];"tab"===_?b=y["a"]:"step"===_&&(b=O["a"]);var v=M.a.createElement(b,null,h.map((function(t,n){var r=t.title,a=t.fields,i=t.description;return z({title:r,description:i,style:_,children:e.renderFields(a),index:n,loading:p})})));return M.a.createElement($,m,"group"===_?v:M.a.createElement(j["a"],{bordered:!1},v))}var g=M.a.createElement($,m,this.renderFields(this.formFields.map((function(e){return e.name})).filter((function(e){return!e.includes(".")}))));return i?g:M.a.createElement(j["a"],{bordered:!1,loading:p},g)}}]),r}(Z)}).call(this,n("LvDl"))},xceu:function(e,t,n){"use strict";(function(e){n("52nx");var r=n("7bDm"),a=n("fWQN"),i=n("mtLc"),o=n("yKVA"),c=n("879j"),l=(n("eNCU"),n("pjJH")),u=(n("4X2C"),n("xvon")),s=n("q1tI"),d=n.n(s),f=n("hJ9C"),p=n("hNBN"),m=u["a"].TextArea;function _(e){return e.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi," ")}function h(e,t){var n=".txt";"richText"===t&&(n=".html"),"jsonText"===t&&(n=".json");var r=e,a=new Blob([r],{type:"text/plain"}),i=document.createElement("a");i.download="File".concat(n),i.href=URL.createObjectURL(a),document.getElementsByTagName("body")[0].appendChild(i),i.click(),document.getElementsByTagName("body")[0].removeChild(i)}function b(e){var t=e.type,n=e.value;return"richText"===t?d.a.createElement(d.a.Fragment,null,d.a.createElement(f["a"],{value:n,LONGTEXT:!0}),d.a.createElement(l["a"],{style:{"margin-top":"10px"},onClick:function(){return h(n,t)}}," ","\u4e0b\u8f7d")):"jsonText"===t?d.a.createElement("div",{style:{maxHeight:700,overflow:"auto",maxWidth:"100%",margin:"auto"}},d.a.createElement(p["a"],{value:n,theme:"google",iconStyle:"square",isEdit:!1,isAdd:!1,isDelete:!1}),d.a.createElement(l["a"],{style:{"margin-top":"10px"},onClick:function(){return h(n,t)}}," ","\u4e0b\u8f7d")):d.a.createElement(d.a.Fragment,null,d.a.createElement(m,{autoSize:{minRows:1,maxRows:20},style:{resize:"none"},value:n}),d.a.createElement(l["a"],{style:{"margin-top":"10px"},onClick:function(){return h(n,t)}}," ","\u4e0b\u8f7d"))}var v=function(t){Object(o["a"])(l,t);var n=Object(c["a"])(l);function l(){var e;Object(a["a"])(this,l);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),e.state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(){e.setState({visible:!1})},e}return Object(i["a"])(l,[{key:"render",value:function(){var t=this.state.visible,n=this.props,a=n.isExpand,i=n.value,o=n.type,c=e.isPlainObject(i)||e.isArray(i)?JSON.stringify(i):i,l=c;return c&&(l="longText"===o?c.length<10?c:c.substr(0,10):_(c.substr(0,200)).substr(0,20)),"text"===o&&(!c||(null===c||void 0===c?void 0:c.length)<300)?c||"":a&&c&&c.length>50?d.a.createElement(b,{type:o,value:c}):d.a.createElement(d.a.Fragment,null,l,l&&c.length>50&&d.a.createElement(d.a.Fragment,null,"...",d.a.createElement("a",{style:{fontSize:10},onClick:this.showModal},"\u67e5\u770b\u66f4\u591a")),d.a.createElement(r["a"],{width:"60%",visible:t,onCancel:this.handleCancel,footer:null},d.a.createElement(b,{type:o,value:c})))}}]),l}(d.a.Component);t["a"]=v}).call(this,n("LvDl"))},"y/44":function(e,t,n){"use strict";var r=n("jrin"),a=n("k1fw"),i=n("q1tI"),o=n.n(i),c=n("jfUH"),l=n("LvDl"),u=n.n(l),s=n("0TMk"),d="bsm_builtin__plainform",f=["choices","default","displayName","editable","help","maxDigits","maxLength","name","precision","primaryKey","readonly","ref","refField","refTo","required","type","validators"];function p(e){var t=e.fields,n=e.onSubmit,l=Object(c["wb"])();if(!t||0===t.length)return o.a.createElement(i["Fragment"],null);l=Object(a["a"])(Object(a["a"])({},l),{},Object(r["a"])({},d,{fields:t.map((function(e){return u.a.pick(e,f)}))}));var p=Object(r["a"])({},d,{formFields:t.map((function(e){return Object(a["a"])(Object(a["a"])({},u.a.omit(e,f)),{},{name:e.name})}))});return o.a.createElement(s["b"],{hideCard:!0,model:d,schemas:l,admins:p,onSubmit:n})}t["a"]=p},yRbM:function(e,t,n){"use strict";(function(e){var r=n("k1fw"),a=n("fWQN"),i=n("mtLc"),o=n("w4Tj"),c=n("oZsa"),l=n("yKVA"),u=n("879j"),s=n("xJcd"),d=function(t){Object(l["a"])(s,t);var n=Object(u["a"])(s);function s(){return Object(a["a"])(this,s),n.apply(this,arguments)}return Object(i["a"])(s,[{key:"renderField",value:function(t,n){var a=this.props,i=a.form,l=a.content.data;if("condition"===n.name&&n.params&&n.params.fields){var u=e.cloneDeep(n);return u.params.fields=n.params.fields.map((function(t){var n=i.getFieldValue("model"),a=e.isString(n)?n:n&&(e.isObject(n)?n:l.meta__model.detail[n]),o={widget:"FieldPicker",show:String(!!a),params:{model:e.isString(a)?a:a&&"".concat(a.app_label,"__").concat(a.name.toLowerCase()),fieldFilter:function(e){return e.ref}}};return"field"===t?Object(r["a"])({name:"field"},o):"field"===t.name?Object(r["a"])(Object(r["a"])({},t),o):t})),Object(o["a"])(Object(c["a"])(s.prototype),"renderField",this).call(this,t,u)}return Object(o["a"])(Object(c["a"])(s.prototype),"renderField",this).call(this,t,n)}}]),s}(s["b"]);t["a"]=d}).call(this,n("LvDl"))}}]);