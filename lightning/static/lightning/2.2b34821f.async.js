(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"/IKB":function(e,a,t){"use strict";t("vmZS");var n=t("NjVP"),l=(t("yavW"),t("WuMn")),r=t("jrin"),i=t("k1fw"),o=t("tJVT"),c=t("q1tI"),u=t.n(c),m=t("mmaM"),s=t("0Owb"),d=(t("6dnR"),t("CQJL")),f=t("oBTY"),p=t("9Ndd"),v=t("jfUH");function b(e){var a=e.param,t=e.preset,l=e.onChange,r=e.mode,i=p["b"][p["e"][a.type]],o=function(e){var t=e.target.value,n="preset"===t?p["d"][a.type]:null;l(a.name,n,t)},c=function(e){l(a.name,e,r)},m=-1!==[].concat(Object(f["a"])(v["R"]),["date","datetime"]).indexOf(a.type)?{field:a}:{};return u.a.createElement(u.a.Fragment,null,u.a.createElement(n["a"].Item,{label:a.displayName||a.name},u.a.createElement(d["a"].Group,{onChange:o,value:r},u.a.createElement(d["a"],{value:"custom"},"\u7528\u6237\u8f93\u5165"),u.a.createElement(d["a"],{value:"preset"},"\u9884\u8bbe\u503c"))),"preset"===r&&u.a.createElement(n["a"].Item,{label:"\u9884\u8bbe\u503c"},u.a.createElement(i,Object(s["a"])({value:t,onChange:c},m))))}var g=b;function h(e){var a=e.model,t=e.scene,s=e.config,d=e.onChange,f=Object(c["useState"])([]),p=Object(o["a"])(f,2),v=p[0],b=p[1],h=Object(c["useState"])({}),E=Object(o["a"])(h,2),y=(E[0],E[1],function(e){return v.find((function(a){return a.name===e}))}),O=function(e){var a=y(e).params,t=Object(i["a"])(Object(i["a"])({},s),{},{action:e,fields:a});d(t)},C=function(e){d(Object(i["a"])(Object(i["a"])({},s),{},{rsp_processor:e}))},j=function(e,a,t,n){var l=s.fields,o=void 0===l?e.params:l,c=s.payload,u=void 0===c?{}:c;if("preset"===n&&d(Object(i["a"])(Object(i["a"])({},s),{},{action:e.name,fields:o.filter((function(e){return e.name!==a})),payload:Object(i["a"])(Object(i["a"])({},u),{},Object(r["a"])({},a,t))})),"custom"===n){var m=e.params.find((function(e){return e.name===a})),f=Object(i["a"])({},u);delete f[a],d(Object(i["a"])(Object(i["a"])({},s),{},{action:e.name,fields:o.concat(m),payload:f}))}};Object(c["useEffect"])((function(){Object(m["getFunctions"])({model:a,scene:t}).then((function(e){var a=e.data.result;b(a)}))}),[]);var w=y(null===s||void 0===s?void 0:s.action);return u.a.createElement(c["Fragment"],null,u.a.createElement(n["a"],{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},u.a.createElement(n["a"].Item,{label:"\u51fd\u6570\u540d"},u.a.createElement(l["a"],{onChange:O,value:null===s||void 0===s?void 0:s.action},v.map((function(e){return u.a.createElement(l["a"].Option,{value:e.name,key:e.name},e.name)})))),w&&w.params&&u.a.createElement(n["a"].Item,{label:"\u53c2\u6570"},u.a.createElement(n["a"],{layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18}},w.params.map((function(e){var a=null!==s&&void 0!==s&&s.payload?s.payload[e.name]:null,t=null!==s&&void 0!==s&&s.payload&&-1!==Object.keys(s.payload).indexOf(e.name)?"preset":"custom";return u.a.createElement(g,{param:Object(i["a"])(Object(i["a"])({},e),{},{nestForm:!1}),preset:a,mode:t,onChange:function(e,a,t){return j(w,e,a,t)}})})))),u.a.createElement(n["a"].Item,{label:"\u7ed3\u679c\u5904\u7406"},u.a.createElement(l["a"],{value:null===s||void 0===s?void 0:s.rsp_processor,onChange:C},u.a.createElement(l["a"].Option,{key:"nop",value:"nop"},"\u5ffd\u7565"),u.a.createElement(l["a"].Option,{key:"show",value:"show"},"\u5c55\u793a")))))}a["a"]=h},"5jOq":function(e,a,t){e.exports={divider:"divider___35NWu"}},"9fIt":function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return K}));t("+L6B");var n=t("2/Rp"),l=t("0Owb"),r=(t("sRBo"),t("kaz8")),i=(t("OaEy"),t("2fM7")),o=(t("WlnS"),t("7sSx")),c=(t("yavW"),t("WuMn")),u=(t("h/qz"),t("GmeQ")),m=(t("4X2C"),t("xvon")),s=(t("vmZS"),t("NjVP")),d=t("k1fw"),f=t("oBTY"),p=t("tJVT"),v=t("q1tI"),b=t.n(v),g=t("4b23"),h=t.n(g),E=t("bRQS"),y=t("HrPU"),O=t("VW+w"),C=t("3i6F"),j=t("jfUH"),w=t("umGZ"),D=t("cPjh"),S=t("5jOq"),I=t.n(S),N=t("Y4fy"),F=t.n(N),k=t("poQN"),x=[{label:"magenta",value:"magenta"},{label:"red",value:"red"},{label:"orange",value:"orange"},{label:"gold",value:"gold"},{label:"lime",value:"lime"},{label:"green",value:"green"},{label:"cyan",value:"cyan"},{label:"blue",value:"blue"},{label:"purple",value:"purple"}],T=[{label:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{label:"YYYY\u5e74MM\u6708DD\u65e5",value:"YYYY\u5e74MM\u6708DD\u65e5"},{label:"YYYY/MM/DD",value:"YYYY/MM/DD"}],M=[{label:"longText",value:"\u957f\u6587\u672c"},{label:"richText",value:"\u5bcc\u6587\u672c"},{label:"jsonText",value:"JSON"}],A={labelCol:{span:4},wrapperCol:{span:10}},_={Sum:"\u603b\u8ba1",Avg:"\u5e73\u5747",Max:"\u6700\u5927\u503c",Min:"\u6700\u5c0f\u503c"};function V(e){var a=e;return a.params||(a.params={}),"tag"!==a.widget||a.params.tagSetting||(a.params.tagSetting={}),a}var R=function(e,a){var t,n;return(null===(t=a[e])||void 0===t||null===(n=t.display)||void 0===n?void 0:n.map(V))||[]},P=function(e,a){var t;return(null===(t=a[e])||void 0===t?void 0:t.sortable)||[]};function Y(a){var t=a.modelName,n=a.adminConfig,l=a.schemas,r=a.bsmSetting.staff_model,i=Object(v["useState"])((function(){return t&&n&&R(t,n)})),o=Object(p["a"])(i,2),c=o[0],u=o[1],m=Object(v["useState"])((function(){return t&&n&&P(t,n)})),s=Object(p["a"])(m,2),b=s[0],g=s[1],E=Object(v["useState"])([]),y=Object(p["a"])(E,2),O=y[0],j=y[1],w=Object(C["j"])(),D=Object(C["k"])();function S(a,t){var n=e.cloneDeep(c);n[a]={name:t},u(n)}function I(a,t){var n=e.cloneDeep(c);return t?n[a].alias=t:delete n[a].alias,u(n),n}function N(a,t,n){var l=Object(f["a"])(c);l[a]=null===t?e.omit(l[a],["summary"]):Object(d["a"])(Object(d["a"])({},l[a]),{},{summary:{field:n,method:t}}),u(l)}function F(e,a,t){var n=Object(f["a"])(c);n[e]=Object(d["a"])({},n[e]),n[e].summary=Object(d["a"])({},n[e].summary),n[e].summary[a]=t,u(n)}function k(){var e=[].concat(Object(f["a"])(c),[{params:{}}]);return u(e),e}function x(){u([].concat(Object(f["a"])(c),[{type:"combo",fields:{},params:{}}]))}function M(a){var t=e.cloneDeep(c);t.splice(a,1),u(t)}function A(e,a){u(R(e,a)),g(P(e,a))}function _(a,t){var n=e.cloneDeep(c),l=n[t];l.params={},l.name&&("tag"===a&&(l.params.tagSetting={}),"timeStamp"===a&&(l.params.timeFormat=T[0].value),l.fields={value:l.name}),l.widget=a,u(n)}function V(){var a=e.cloneDeep(c);return a.map((function(a){var t=Object(d["a"])({},a);return e.isEmpty(a.groups)||(t.groups=t.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),a.id||(t.id=h()(6)),t}))}function Y(a,t){var n=e.cloneDeep(b),l=c[t].name;if(!0===a)n.push(l),g(n);else{var r=n.filter((function(e){return e!==l}));g(r)}}function L(a,t){var n=e.cloneDeep(c),l=n[t];l.params={},l.widget=a,u(n)}function W(a,t){var n=e.cloneDeep(c);n[t].params.timeFormat=a,u(n)}function K(a,t){var n=e.cloneDeep(c);n[t].params.customFormat=a,u(n)}Object(v["useEffect"])((function(){if(t&&l&&r){var e=[];l[t].fields.forEach((function(a){a.ref===r&&e.push(a)})),j(e)}}),[t,r,l]);var B={modelName:t,adminConfig:n,schemas:l,staffModel:r,sortables:b,display:c,staffModelFields:O,handleFieldChange:S,handleAliasChange:I,handleFieldDelete:M,handleFieldAdd:k,setDisplay:u,handletemp:x,selectWidget:_,changeSortable:Y,changeCombo:L,changeTimeFormat:W,changeCustomFormat:K,handleSummaryChange:N,handleSummaryPropertyChange:F,displayWidgetMapping:w,displayWidgetName:D};return[c,b,A,V,B]}function L(a){var t,n,v,g,h,D,S,N,k,V,R,P,Y=a.index,L=a.field,W=a.display,K=a.setDisplay,B=a.staffModelFields,H=a.handleFieldChange,J=a.handleAliasChange,q=a.sortables,G=a.modelName,U=a.schemas,Z=a.adminConfig,Q=a.staffModel,z=a.selectWidget,X=a.handleSummaryChange,$=a.handleSummaryPropertyChange,ee=a.changeSortable,ae=a.changeCombo,te=a.changeTimeFormat,ne=a.changeCustomFormat,le=a.displayWidgetMapping,re=a.displayWidgetName;if(!L||!G)return null;var ie,oe=L.name,ce=L.type,ue=L.name&&Object(j["t"])(G,L.name);!ue&&null!==(t=L.fields)&&void 0!==t&&t.value&&(ue=Object(j["t"])(G,null===(ie=L.fields)||void 0===ie?void 0:ie.value));var me=[];ue&&le[ue.type]&&(me=le[ue.type]),"combo"===ce&&(me=C["d"]),null!==(n=ue)&&void 0!==n&&n.choices&&me.concat(["tag"]);var se=[];return"mref"===(null===(v=ue)||void 0===v?void 0:v.type)&&U[ue.ref].fields.forEach((function(e){["string","image","file"].includes(e.type)&&se.push({label:e.name,value:e.displayName})})),b.a.createElement(s["a"],Object(l["a"])({},A,{name:"basic"}),b.a.createElement(s["a"].Item,{label:"\u5b57\u6bb5"},b.a.createElement(y["a"],{value:L.name,onChange:function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return H.apply(void 0,[Y].concat(a))},model:G,disabled:"combo"===L.type,allowClear:!1})),b.a.createElement(s["a"].Item,{label:"\u5217\u540d"},b.a.createElement(m["a"],{allowClear:!0,value:L.alias,placeholder:L.name&&Object(O["displayPreprocess"])([e.cloneDeep(L)],G,U)[0].alias,onChange:function(e){return J(Y,e.target.value)}})),!ce&&b.a.createElement(s["a"].Item,{label:"\u5f00\u542f\u6392\u5e8f"},b.a.createElement(u["a"],{defaultChecked:!1,checked:q.includes(oe),onChange:function(e){return ee(e,Y)}})),"combo"!==ce&&!e.isEmpty(me)&&b.a.createElement(s["a"].Item,{label:"\u9009\u62e9\u7ec4\u4ef6"},b.a.createElement(c["a"],{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u7ec4\u4ef6",optionFilterProp:"children",value:L.widget||null,onChange:function(e){return z(e,Y)}},b.a.createElement(c["a"].Option,{value:null},"\u9ed8\u8ba4\uff08",re[me[0]],"\uff09"),!ue||e.uniq(me).map((function(e){return b.a.createElement(c["a"].Option,{value:e},re[e]||e)})))),"combo"===ce&&!e.isEmpty(me)&&b.a.createElement(s["a"].Item,{label:"\u9009\u62e9\u6a21\u677f\u7ec4\u4ef6"},b.a.createElement(c["a"],{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u7ec4\u4ef6",optionFilterProp:"children",value:L.widget?L.widget:null,onChange:function(e){return ae(e,Y)}},ue||e.uniq(me).map((function(e){return b.a.createElement(c["a"].Option,{value:e},re[e]||e)})))),L.widget&&"timeStamp"===L.widget&&b.a.createElement(s["a"].Item,{label:"\u914d\u7f6e\u65f6\u95f4\u683c\u5f0f"},b.a.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},b.a.createElement(c["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u65f6\u95f4\u683c\u5f0f",value:L.params.timeFormat,onChange:function(e){return te(e,Y)}},T.map((function(e){return b.a.createElement(c["a"].Option,{value:e.value},e.label)}))))),L.widget&&"timeStamp"===L.widget&&b.a.createElement(s["a"].Item,{label:"\u81ea\u5b9a\u4e49\u65f6\u95f4\u683c\u5f0f"},b.a.createElement(m["a"],{style:{flex:"auto",width:"50%"},value:L.params.customFormat,onChange:function(e){var a=e.target.value;return ne(a,Y)}})),L.widget&&"tag"===L.widget&&b.a.createElement(s["a"].Item,{label:"\u914d\u7f6e\u989c\u8272"},ue.choices.map((function(a){var t=Object(p["a"])(a,2),n=t[0],l=t[1],r=L.params.tagSetting[n];return b.a.createElement("div",null,b.a.createElement(o["a"],{color:r},l),b.a.createElement(i["a"],{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u914d\u7f6e\u989c\u8272",value:r,onChange:function(a){var t=e.cloneDeep(W);t[Y].params.tagSetting[n]=a,K(t)},menuItemSelectedIcon:b.a.createElement(E["a"],null)},x.map((function(e){return b.a.createElement(i["a"].Option,{className:F.a[e.value],value:e.value},e.label)}))))}))),L.widget&&"longtext"===L.widget&&b.a.createElement(s["a"].Item,{label:"\u914d\u7f6e\u5b57\u6bb5\u7c7b\u578b"},b.a.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},b.a.createElement(c["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u5b57\u6bb5\u7c7b\u578b",value:L.params.textType?M.filter((function(e){return e.label===L.params.textType})).map((function(e){return e.label})):null,onChange:function(a){var t=e.cloneDeep(W);t[Y].params.textType=a,K(t)}},M.map((function(e){return b.a.createElement(c["a"].Option,{value:e.label},e.value)}))))),L.widget&&"textimg"===L.widget&&b.a.createElement(b.a.Fragment,null,b.a.createElement(s["a"].Item,{label:"\u6807\u9898\u5b57\u6bb5"},b.a.createElement(c["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u6807\u9898\u5b57\u6bb5",value:null===(g=L.fields)||void 0===g?void 0:g.title,onChange:function(a){if(a){var t=e.cloneDeep(W);t[Y].fields.title=a,K(t)}}},U[G].fields.map((function(e){return b.a.createElement(c["a"].Option,{value:e.name}," ",e.displayName)})))),b.a.createElement(s["a"].Item,{label:"\u56fe\u7247\u5b57\u6bb5"},b.a.createElement(c["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u56fe\u7247\u5b57\u6bb5",value:null===(h=L.fields)||void 0===h?void 0:h.avatar,onChange:function(a){if(a){var t=e.cloneDeep(W);t[Y].fields.avatar=a,K(t)}}},U[G].fields.map((function(e){return b.a.createElement(c["a"].Option,{value:e.name}," ",e.displayName)})))),b.a.createElement(s["a"].Item,{label:"\u5185\u5bb9\u5b57\u6bb5"},b.a.createElement(c["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u5185\u5bb9\u5b57\u6bb5",value:null===(D=L.fields)||void 0===D?void 0:D.text,onChange:function(a){if(a){var t=e.cloneDeep(W);t[Y].fields.text=a,K(t)}}},U[G].fields.map((function(e){return b.a.createElement(c["a"].Option,{value:e.name}," ",e.displayName)}))))),L.widget&&"urlImg"===L.widget&&"mref"===(null===(S=ue)||void 0===S?void 0:S.type)&&b.a.createElement(s["a"].Item,{label:"\u56fe\u7247\u5b57\u6bb5",help:"\u8be5\u5b57\u6bb5\u5b58\u50a8\u56fe\u7247\u7684URL"},b.a.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},b.a.createElement(c["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u56fe\u7247\u5b57\u6bb5",value:null===(N=L.params)||void 0===N?void 0:N.urlImgName,onChange:function(a){var t=e.cloneDeep(W);t[Y].params.urlImgName=a,K(t)}},se.map((function(e){return b.a.createElement(c["a"].Option,{value:e.label},e.value)}))))),["integer","float","decimal"].includes(null===(k=ue)||void 0===k?void 0:k.type)&&b.a.createElement(b.a.Fragment,null,b.a.createElement(s["a"].Item,{label:"\u603b\u7ed3\u884c"},b.a.createElement(c["a"],{onChange:function(e){return X(Y,e,L.name)},value:L.summary?L.summary.method:null},b.a.createElement(c["a"].Option,{value:null},"\u7981\u7528"),e.map(_,(function(e,a){return b.a.createElement(c["a"].Option,{value:a},e)})))),L.summary&&b.a.createElement(b.a.Fragment,null,b.a.createElement(s["a"].Item,{label:"\u524d\u7f00"},b.a.createElement(m["a"],{allowClear:!0,placeholder:"\u5982\uff1a".concat(_[L.summary.method]),value:L.summary.prefix,onChange:function(e){return $(Y,"prefix",e.target.value)}})),b.a.createElement(s["a"].Item,{label:"\u540e\u7f00"},b.a.createElement(m["a"],{allowClear:!0,value:L.summary.suffix,onChange:function(e){return $(Y,"suffix",e.target.value)}})))),!(null!==(V=ue)&&void 0!==V&&V.type.endsWith("ref"))&&b.a.createElement(s["a"].Item,{label:"\u5408\u5e76\u76f8\u540c\u884c"},b.a.createElement(r["a"],{checked:L.mergeRow,onChange:function(e){var a=Object(f["a"])(W);a[Y]=Object(d["a"])({},a[Y]),e.target.checked?a[Y].mergeRow=!0:delete a[Y].mergeRow,K(a)}})),b.a.createElement("div",{className:I.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),b.a.createElement(w["a"],{groupsValue:null!==(R=null===(P=L.groups)||void 0===P?void 0:P.filter((function(e){return!("number"===typeof e)})))&&void 0!==R?R:[],groupsOnChange:function(a){var t=e.cloneDeep(W);t[Y].groups=a,K(Object(f["a"])(t))},userValue:L.userField,userOnChange:function(a){var t=e.cloneDeep(W);t[Y].userField=a,K(Object(f["a"])(t))},staffModelFields:B,staffModel:Q,defauldGroupValue:Z[G].display[Y]}))}function W(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=Y({modelName:a,adminConfig:t,schemas:n,bsmSetting:l}),i=Object(p["a"])(r,5),o=i[0],c=i[1],u=i[2],m=i[3],s=i[4],f=Object(j["eb"])(a);return[o,c,u,m,Object(d["a"])(Object(d["a"])({},s),{},{pathGetter:f})]}function K(e){var a=e.pathGetter,t=e.display,r=e.handleFieldChange,i=e.handleFieldDelete,o=e.handleFieldAdd,c=e.setDisplay,u=e.handletemp,m=e.modelName;return b.a.createElement(D["b"],{bordered:!1,allData:t,setData:c,title:"\u5217\u8868\u5b57\u6bb5",sections:[(null===t||void 0===t?void 0:t.length)||0],setSections:function(e){c(e[0].fields)},columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,a,t){return b.a.createElement(y["a"],{value:e.name,onChange:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return r.apply(void 0,[t].concat(a))},model:m,disabled:"combo"===e.type},e.name&&b.a.createElement(k["a"],{fieldPath:e.name,modelName:m}))}},{title:"\u663e\u793a\u540d\u79f0",key:"alias",render:function(e){var t;return null!==(t=e.alias)&&void 0!==t?t:e.name&&a(e.name).join("")}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement("a",{onClick:function(){return i(t)}},"\u5220\u9664"))}}],footer:function(){return b.a.createElement("div",null,b.a.createElement(n["a"],{onClick:o},"\u6dfb\u52a0\u4e00\u5217"),b.a.createElement(n["a"],{style:{margin:5},onClick:u},"\u6dfb\u52a0\u7ec4\u5408\u5b57\u6bb5"))},expandedRowRender:function(a,n){return b.a.createElement(L,Object(l["a"])({index:n,field:t[n]},e))}})}a["b"]=W}).call(this,t("LvDl"))},Evl9:function(e,a,t){"use strict";t.d(a,"a",(function(){return we}));t("SePM");var n=t("PMX6"),l=(t("vmZS"),t("NjVP")),r=(t("6dnR"),t("CQJL")),i=(t("QjdF"),t("U4Vl")),o=t("0Owb"),c=t("tJVT"),u=t("q1tI"),m=t.n(u),s=(t("2qtc"),t("kLXV")),d=(t("cW/2"),t("RtDF")),f=(t("eNCU"),t("pjJH")),p=(t("4X2C"),t("xvon")),v=t("jrin"),b=t("k1fw"),g=t("oBTY"),h=t("RsOY"),E=t.n(h),y=t("LvDl"),O=t.n(y),C=t("4b23"),j=t.n(C),w=t("HrPU"),D=t("umGZ"),S=t("cPjh"),I=t("5jOq"),N=t.n(I),F=t("poQN"),k=function(e){return e.name?e:{name:e}};function x(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:0},n=t.id,l=t.title,r=void 0===l?"":l,i=[];return a[e].fields.forEach((function(e){if("bref"!==e.type){var a=n?"".concat(n,".").concat(e.name):e.name,t={id:a,pId:n,value:a,title:"".concat(r?"".concat(r,"."):"").concat(e.displayName)};e.ref&&(t.fieldRef=e.ref),i.push(t)}})),i}var T=function(e,a){var t,n;return(null===a||void 0===a||null===(t=a[e])||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.map(k))||[]};function M(e){var a=e.modelName,t=e.schemas,n=e.adminConfig,l=e.staffModel,r=Object(u["useState"])((function(){return T(a,n)})),i=Object(c["a"])(r,2),o=i[0],m=i[1],s=Object(u["useState"])([]),d=Object(c["a"])(s,2),f=d[0],p=d[1];Object(u["useEffect"])((function(){if(a&&n&&l){var e=[];t[a].fields.forEach((function(a){a.ref===l&&e.push(a)})),p(e)}}),[a,n,l,t]);var h=function(e,a){return m(T(e,a))},E=function(e,a,t){var n=Object(g["a"])(o);n[e]=Object(b["a"])(Object(b["a"])({},n[e]),{},Object(v["a"])({},t,a)),m(n)},y=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return E.apply(void 0,a.concat(["name"]))},C=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return E.apply(void 0,a.concat(["groups"]))},w=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return E.apply(void 0,a.concat(["userField"]))},D=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return E.apply(void 0,a.concat(["displayName"]))},S=function(){var e=O.a.cloneDeep(o);return e.map((function(e){var a=Object(b["a"])({},e);return O.a.isEmpty(e.groups)||(a.groups=a.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),e.id||(a.id=j()(6)),a}))};return[o,m,{handleTitleChange:y,checkFilters:S,reset:h,groupsOnChange:C,userOnChange:w,setDisplayName:D,staffModelFields:f}]}function A(e){var a,t,n=e.adminConfig,r=e.modelName,i=e.index,o=e.filter,c=e.staffModel,u=e.handleTitleChange,s=e.staffModelFields,d=e.groupsOnChange,f=e.userOnChange,v=e.setDisplayName;return o&&m.a.createElement(l["a"],{labelCol:{span:6},wrapperCol:{span:8}},m.a.createElement(l["a"].Item,{label:"\u5b57\u6bb5"},m.a.createElement(w["a"],{value:o.name,onChange:function(e){return u(i,e)},model:r,allowClear:!1})),m.a.createElement(l["a"].Item,{label:"\u6807\u7b7e\u540d"},m.a.createElement(p["a"],{value:o.displayName,onChange:function(e){return v(i,e.target.value)}})),m.a.createElement("div",{className:N.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),m.a.createElement(D["a"],{groupsValue:null!==(a=null===(t=o.groups)||void 0===t?void 0:t.filter((function(e){return!("number"===typeof e)})))&&void 0!==a?a:[],groupsOnChange:function(e){return d(i,e)},userValue:o.userField,userOnChange:function(e){return f(i,e)},staffModelFields:s,staffModel:c,defauldGroupValue:n[r].filter[i]}))}function _(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting.staff_model,r=Object(u["useState"])([]),i=Object(c["a"])(r,2),o=i[0],m=i[1],s=Object(u["useState"])(!1),d=Object(c["a"])(s,2),f=d[0],p=d[1],v=Object(u["useState"])([]),b=Object(c["a"])(v,2),h=b[0],y=b[1],O=M({modelName:a,adminConfig:t,schemas:n,staffModel:l}),C=Object(c["a"])(O,3),j=C[0],w=C[1],D=C[2],S=D.handleTitleChange,I=D.checkFilters,N=D.reset,F=D.groupsOnChange,T=D.userOnChange,A=D.staffModelFields,_=D.setDisplayName;function V(e){var a=Object(g["a"])(j);a.splice(e,1),w(a)}function R(e,a){w(E()(j,{$splice:[[e,1,{name:a}]]}))}function P(e){w([].concat(Object(g["a"])(j),Object(g["a"])(e.map(k))))}function Y(){P(h),p(!1)}function L(){p(!1),y([])}return Object(u["useEffect"])((function(){if(a&&n){var e=x(a,n);e.forEach((function(a){a.fieldRef&&e.push.apply(e,Object(g["a"])(x(a.fieldRef,n,a)))})),m(e)}}),[a,n]),[j,N,I,{selectKeys:h,setSelectKeys:y,setFilters:w,filterData:o,handleFieldChange:R,deleteField:V,visible:f,setVisible:p,onOK:Y,handleTitleChange:S,setDisplayName:_,checkFilters:I,groupsOnChange:F,userOnChange:T,staffModelFields:A,afterClose:L}]}function V(e){var a=e.filters,t=e.modelName,n=e.adminConfig,l=e.bsmSetting.staff_model,r=e.selectKeys,i=e.setSelectKeys,o=e.setFilters,c=e.filterData,u=e.handleFieldChange,p=e.deleteField,v=e.visible,b=e.setVisible,g=e.onOK,h=e.handleTitleChange,y=e.setDisplayName,O=e.groupsOnChange,C=e.userOnChange,j=e.staffModelFields,D=e.afterClose,I=m.a.createElement(S["b"],{allData:a,setData:o,title:"\u7b5b\u9009\u5b57\u6bb5",sections:[(null===a||void 0===a?void 0:a.length)||0],columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,a,n){return m.a.createElement(w["a"],{value:e.name||e,onChange:function(e){return u(n,e)},model:t,layer:2},m.a.createElement(F["a"],{fieldPath:e.name,modelName:t}))}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){return p(t)}},"\u5220\u9664"))}}],footer:function(){return m.a.createElement("div",null,m.a.createElement(f["a"],{onClick:function(){return b(!0)}},"\u6dfb\u52a0\u5b57\u6bb5"))},expandedRowRender:function(e,r){return m.a.createElement(A,{index:r,filter:null===a||void 0===a?void 0:a[r],adminConfig:n,modelName:t,staffModel:l,setFilters:o,handleTitleChange:h,setDisplayName:y,staffModelFields:j,groupsOnChange:O,userOnChange:C})}}),N=m.a.createElement(d["a"],{treeDataSimpleMode:!0,style:{width:"100%"},value:r,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8bf7\u9009\u62e9",onChange:i,multiple:!0,treeData:c.map((function(e){return E()(e,{disabled:{$set:a.some((function(a){return a.name===e.value}))}})})),filterTreeNode:function(e,a){var t=a.props;return["title","value"].some((function(a){return t[a].toLowerCase().includes(e.toLowerCase())}))}});return m.a.createElement(m.a.Fragment,null,m.a.createElement(s["a"],{title:"\u6dfb\u52a0\u5b57\u6bb5",visible:v,onOk:g,onCancel:function(){return b(!1)},afterClose:D,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},N),I)}var R=_,P=t("9fIt"),Y=t("Q8IV"),L=(t("yavW"),t("WuMn")),W=t("EBSl"),K=t("9Ndd"),B=t("0TMk"),H=(t("eE3J"),t("GSZB")),J=t("/MKj");function q(e){var a=e.schemas,t=e.model,n=e.onChange,l=e.fieldFilter,r=e.value,i=void 0===r?[]:r,c=function(){var e=O.a.cloneDeep(i);e.push({}),n(e)};function u(e){var a=O.a.cloneDeep(i);a.splice(e,1),n(a)}if(!O.a.isArray(i))return null;var s=K["b"].TextInput,d={};return m.a.createElement(m.a.Fragment,null,i.map((function(e,r){if(e.name){var c=a[t].fields.find((function(a){return a.name===e.name}));s=K["b"][K["e"][c.type]]}return m.a.createElement("div",null,m.a.createElement("div",{style:{display:"flex"}},m.a.createElement("div",{style:{marginRight:8}},m.a.createElement(w["a"],{value:e.name,fieldFilter:l,onChange:function(e){var a=O.a.cloneDeep(i);a[r].name=e,a[r].value&&(a[r].value=void 0),n(a)},model:t})),m.a.createElement("div",{style:{marginRight:8}},m.a.createElement(s,Object(o["a"])({onChange:function(e){var a=O.a.cloneDeep(i);a[r].value=e,n(a)},value:e.value},d))),m.a.createElement("a",{onClick:function(){return u(r)},style:{marginLeft:8}},m.a.createElement(H["a"],{type:"delete",style:{fontSize:20}}))))})),m.a.createElement(f["a"],{type:"dashed",style:{width:354},onClick:c},m.a.createElement(H["a"],{type:"plus"})))}var G=Object(J["c"])((function(e){var a=e.content.schemas;return{schemas:a}}))(q),U="Form_winght_new",Z=["choices","default","displayName","editable","help","maxDigits","maxLength","name","precision","primaryKey","readonly","ref","refField","refTo","required","type","validators"];function Q(e){return O.a.pick(e,Z)}function z(e,a){var t=a.model,n=a.values,l=Object(b["a"])(Object(b["a"])({},O.a.omit(e,Z)),{},{name:e.name}),r=l.params;return r&&"function"===typeof r&&(l.params=r({model:t,values:n})),l}function X(e){var a=e.paramsDef,t=void 0===a?[]:a,n=e.onChange,l=e.model,r=e.values,i=Object(v["a"])({},U,{fields:t.map(Q)}),o=Object(v["a"])({},U,{formFields:t.map((function(e){return z(e,{model:l,values:r})}))});return m.a.createElement(B["b"],{hideCard:!0,model:U,schemas:i,admins:o,showButtons:!1,object:r,onValuesChange:n})}Object(K["f"])("FieldsSet",G,"\u5b57\u6bb5\u914d\u7f6e\u5668");var $=t("/IKB"),ee=W["a"].ACTION_TYPE_BATCH;function ae(e){var a={action:e,name:ee[e].name,params:{},groups:[]};return a}var te=function(e,a){var t;return(null===(t=a[e])||void 0===t?void 0:t.actions)||[]};function ne(e){var a=e.modelName,t=e.schemas,n=e.adminConfig,l=e.bsmSetting.staff_model,r=Object(u["useState"])((function(){return n&&a&&te(a,n)})),i=Object(c["a"])(r,2),o=i[0],m=void 0===o?[]:o,s=i[1],d=Object(u["useState"])([]),f=Object(c["a"])(d,2),p=f[0],v=f[1];function h(e,a){s(te(e,a))}function E(){s([].concat(Object(g["a"])(m),[{}]))}function y(e){var a=e.map(ae);s([].concat(Object(g["a"])(m),Object(g["a"])(a)))}function C(e){var a=O.a.cloneDeep(m);a.splice(e,1),s(a)}function w(e,a){var t=O.a.cloneDeep(m);t[e].action=a,t[e].name=ee[a].name,t[e].params={},s(t)}function D(e,a){var t=O.a.cloneDeep(m);t[e].name=a,s(t)}function S(e,a){var t=O.a.cloneDeep(m);t[e].confirm=a,s(t)}Object(u["useEffect"])((function(){if(a&&t&&l){var e=[];t[a].fields.forEach((function(a){a.ref===l&&e.push(a)})),v(e)}}),[l,a,t]);var I=function(){var e=O.a.cloneDeep(m);return e.map((function(e){var a=Object(b["a"])({},e);return O.a.isEmpty(e.groups)||(a.groups=a.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),e.id||(a.id=j()(6)),a}))},N={handleTitleChange:D,handleDelete:C,handleAdd:E,setActions:s,addActions:y,handleConfirmChange:S,handleTypeChange:w,staffModelFields:p,modelName:a,schemas:t,adminConfig:n};return[m,h,I,N]}function le(e){var a,t,n,r=e.index,i=e.actions,o=e.staffModel,c=e.modelName,u=e.adminConfig,s=e.setActions,d=e.handleTitleChange,f=e.handleTypeChange,v=e.handleConfirmChange,b=e.staffModelFields;if(void 0===r)return null;var h=i[r];return m.a.createElement(l["a"],{labelCol:{span:6},wrapperCol:{span:14}},m.a.createElement(l["a"].Item,{label:"\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b"},m.a.createElement(L["a"],{value:h.action,onChange:function(e){return f(r,e)}},Object.keys(ee).map((function(e){return m.a.createElement(L["a"].Option,{value:e},ee[e].name)})))),m.a.createElement(l["a"].Item,{label:"\u6279\u91cf\u64cd\u4f5c\u540d\u79f0"},m.a.createElement(p["a"],{value:h.name,onChange:function(e){return d(r,e.target.value)}})),m.a.createElement(l["a"].Item,{label:"\u64cd\u4f5c\u524d\u786e\u8ba4"},m.a.createElement(p["a"],{value:h.confirm,onChange:function(e){return v(r,e.target.value)}})),"action"===h.action?m.a.createElement(l["a"].Item,{label:"\u4e91\u51fd\u6570"},m.a.createElement($["a"],{model:c,scene:"batch",config:h.params,onChange:function(e){var a=Object(g["a"])(i);a[r].params=e,s(a)}})):m.a.createElement(X,{paramsDef:ee[h.action].paramsDef,model:c,values:h.params,onChange:function(e,a){var t=Object(g["a"])(i),n=ee[h.action].paramsDef.find((function(a){return a.name===e}));t[r].params[e]=!0===n.isJson?JSON.parse(a):a,s(t)}}),m.a.createElement("div",{className:N.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),m.a.createElement(D["a"],{groupsValue:null!==(a=null===(t=h.groups)||void 0===t?void 0:t.filter((function(e){return!("number"===typeof e)})))&&void 0!==a?a:[],groupsOnChange:function(e){var a=O.a.cloneDeep(i);a[r].groups=e,s(Object(g["a"])(a))},userValue:h.userField,userOnChange:function(e){var a=O.a.cloneDeep(i);a[r].userField=e,s(Object(g["a"])(a))},staffModelFields:b,staffModel:o,defauldGroupValue:null===(n=u[c].actions)||void 0===n?void 0:n[r]}))}function re(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=ne({modelName:a,schemas:n,adminConfig:t,bsmSetting:l}),i=Object(c["a"])(r,4),o=i[0],m=i[1],s=i[2],d=i[3],f=Object(u["useState"])([]),p=Object(c["a"])(f,2),v=p[0],g=p[1],h=Object(u["useState"])(!1),E=Object(c["a"])(h,2),y=E[0],O=E[1],C=d.addActions;function j(){C(v),O(!1)}function w(){O(!1),g([])}return[o,m,s,Object(b["a"])(Object(b["a"])({},d),{},{selectKeys:v,setSelectKeys:g,visible:y,setVisible:O,afterClose:w,onOK:j})]}function ie(e){var a=e.selectKeys,t=e.setSelectKeys,n=e.visible,r=e.setVisible,i=e.onOK,c=e.afterClose,u=e.setActions,d=e.handleDelete,p=e.actions,v=m.a.createElement("div",null,m.a.createElement(l["a"].Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},m.a.createElement(L["a"],{mode:"multiple",defaultValue:[],value:a,onChange:t,style:{minWidth:160}},Object.keys(ee).map((function(e,a){return m.a.createElement(L["a"].Option,{value:e,key:"".concat(e,"__").concat(a+1)},ee[e].name)}))))),b=m.a.createElement(S["b"],{allData:p,setData:u,sections:[(null===p||void 0===p?void 0:p.length)||0],title:"\u6279\u91cf\u64cd\u4f5c",setSections:function(e){u(e[0].fields)},columns:[{title:"\u6279\u91cf\u64cd\u4f5c",key:"name",render:function(e){return e.name||ee[e.action].name}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){return d(t)}},"\u5220\u9664"))}}],footer:function(){return m.a.createElement(f["a"],{onClick:function(){return r(!0)}},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(a,t){return m.a.createElement(le,Object(o["a"])({index:t,actions:p},e))}});return m.a.createElement(m.a.Fragment,null,m.a.createElement(s["a"],{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:n,onOk:i,onCancel:function(){return r(!1)},afterClose:c,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},v),b)}var oe=re,ce=(t("+L6B"),t("2/Rp")),ue=(t("5NDa"),t("5rEg")),me=(t("y8nQ"),t("Vl3Y")),se=(t("OaEy"),t("2fM7")),de=t("uRgk"),fe=t("O/S9"),pe={add:"\u65b0\u5efa",excelImport:"\u5bfc\u5165",link:"\u94fe\u63a5\u8df3\u8f6c",action:"\u4e91\u51fd\u6570"},ve={link:"\u7f51\u5740",action:"\u4e91\u51fd\u6570"};function be(e){var a={type:e,title:pe[e],params:{},icon:""};return a}var ge=function(e,a){var t;return(null===(t=a[e])||void 0===t?void 0:t.tableActions)||[]};function he(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting.staff_model,r=Object(u["useState"])((function(){return t&&a&&ge(a,t)})),i=Object(c["a"])(r,2),o=i[0],m=void 0===o?[]:o,s=i[1],d=Object(u["useState"])([]),f=Object(c["a"])(d,2),p=f[0],v=f[1];function b(e,a){s(ge(e,a))}function h(){s([].concat(Object(g["a"])(m),[{}]))}function E(e){var a=e.map(be);s([].concat(Object(g["a"])(m),Object(g["a"])(a)))}function y(e){var a=O.a.cloneDeep(m);a.splice(e,1),s(a)}function C(e,a){var t=O.a.cloneDeep(m);t[e].type=a,t[e].title=pe[a],t[e].params={},s(t)}function j(e,a){var t=O.a.cloneDeep(m);t[e].title=a,s(t)}function w(e,a){var t=O.a.cloneDeep(m);t[e].confirm=a,s(t)}function D(e,a,t){var n=O.a.cloneDeep(m);a?n[e].params[a]=t:n[e].params=t,s(n)}function S(e,a){var t=O.a.cloneDeep(m);t[e].icon=a,s(t)}Object(u["useEffect"])((function(){if(a&&l&&n){var e=[];n[a].fields.forEach((function(a){a.ref===l&&e.push(a)})),v(e)}}),[l,a,n]);var I=function(){var e=O.a.cloneDeep(m);return e.filter((function(e){return e.type}))},N={modelName:a,schemas:n,adminConfig:t,staffModel:l,staffModelFields:p,handleTypeChange:C,handleIcon:S,handleConfirmChange:w,handleParamsChange:D,handleTitleChange:j,handleDelete:y,handleAdd:h,setTabAction:s,addTabActions:E};return[m,b,I,N]}function Ee(e){var a,t,n=e.index,l=e.schemas,r=e.modelName,i=e.adminConfig,o=e.staffModel,c=e.tableActions,u=e.setTabAction,s=e.handleTypeChange,d=e.handleIcon,f=e.handleTitleChange,p=e.handleConfirmChange,v=e.handleParamsChange,b=e.staffModelFields;if(void 0===n||!i)return null;var h=c[n];return m.a.createElement(me["a"],{labelCol:{span:6},wrapperCol:{span:14}},m.a.createElement(me["a"].Item,{label:"\u5168\u5c40\u64cd\u4f5c\u7c7b\u578b"},m.a.createElement(se["a"],{value:h.type,onChange:function(e){return s(n,e)}},Object.keys(pe).map((function(e){return m.a.createElement(se["a"].Option,{value:e},pe[e])})))),m.a.createElement(me["a"].Item,{label:"\u64cd\u4f5c\u56fe\u6807"},m.a.createElement(de["a"],{onChange:function(e){d(n,e)},value:h.icon})),m.a.createElement(me["a"].Item,{label:"\u5168\u5c40\u64cd\u4f5c\u540d\u79f0"},m.a.createElement(ue["a"],{value:h.title,onChange:function(e){return f(n,e.target.value)}})),m.a.createElement(me["a"].Item,{label:"\u64cd\u4f5c\u524d\u786e\u8ba4"},m.a.createElement(ue["a"],{value:h.confirm,onChange:function(e){return p(n,e.target.value)}})),"link"===h.type&&m.a.createElement(m.a.Fragment,null,m.a.createElement(me["a"].Item,{label:ve[h.type]},m.a.createElement(ue["a"],{value:h.params[h.type],onChange:function(e){return v(n,h.type,e.target.value)}}))),"action"===h.type&&m.a.createElement(me["a"].Item,{label:ve[h.type]},m.a.createElement($["a"],{model:r,scene:"unlimit",config:h.params,onChange:function(e){return v(n,null,e)}})),m.a.createElement("div",{className:N.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),m.a.createElement(D["a"],{groupsValue:null!==(a=null===(t=h.groups)||void 0===t?void 0:t.filter((function(e){return!("number"===typeof e)})))&&void 0!==a?a:[],groupsOnChange:function(e){var a=O.a.cloneDeep(c);a[n].groups=e,u(Object(g["a"])(a))},userValue:h.userField,userOnChange:function(e){var a=O.a.cloneDeep(h);a[n].userField=e,u(Object(g["a"])(a))},staffModelFields:b,staffModel:o,defauldGroupValue:i[r].inlineActions[n]}),m.a.createElement(me["a"].Item,{label:"\u6ee1\u8db3\u6761\u4ef6\u663e\u793a",wrapperCol:{span:15}},m.a.createElement("div",null,m.a.createElement(fe["a"],{fields:l[r].fields,value:h.showIf||[],context:{model:r},onChange:function(e){var a=O.a.cloneDeep(c);a[n].showIf=e,u(a)},disabledField:function(e){return h.showIf.map((function(e){return e.field})).filter((function(e){return e})).includes(e.name)}}))))}function ye(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=Object(u["useState"])(!1),i=Object(c["a"])(r,2),o=i[0],m=i[1],s=Object(u["useState"])([]),d=Object(c["a"])(s,2),f=d[0],p=d[1],v=he({modelName:a,schemas:n,adminConfig:t,bsmSetting:l}),g=Object(c["a"])(v,4),h=g[0],E=g[1],y=g[2],O=g[3],C=O.addTabActions;function j(){C(f),m(!1)}function w(){m(!1),p([])}function D(){m(!0)}return[h,E,y,Object(b["a"])(Object(b["a"])({},O),{},{addTableActions:D,afterClose:w,onOK:j,visible:o,selectKeys:f,setSelectKeys:p})]}function Oe(e){var a=e.tableActions,t=e.addTableActions,n=e.afterClose,l=e.onOK,r=e.visible,i=e.selectKeys,c=e.setSelectKeys,u=e.handleDelete,d=e.setTabAction,f=m.a.createElement(S["b"],{allData:a,setData:d,sections:[(null===a||void 0===a?void 0:a.length)||0],title:"\u5168\u5c40\u64cd\u4f5c",setSections:function(e){d(e[0].fields)},columns:[{title:"\u5168\u5c40\u64cd\u4f5c",key:"name",render:function(e){return e.title||pe[e.type]}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){return u(t)}},"\u5220\u9664"))}}],footer:function(){return m.a.createElement(ce["a"],{onClick:t},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(t,n){return m.a.createElement(Ee,Object(o["a"])({index:n,tableActions:a},e))}}),p=m.a.createElement("div",null,m.a.createElement(me["a"].Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},m.a.createElement(se["a"],{mode:"multiple",defaultValue:[],value:i,onChange:c,style:{minWidth:160}},Object.keys(pe).map((function(e,a){return m.a.createElement(se["a"].Option,{value:e,key:"".concat(e,"__").concat(a+1)},pe[e])})))));return m.a.createElement(m.a.Fragment,null,m.a.createElement(s["a"],{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:r,onOk:l,onCancel:function(){return setVisible(!1)},afterClose:n,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},p),f)}var Ce=ye;function je(e){var a,t=e.modelName,n=e.schemas,l=e.adminConfig,r=e.bsmSetting,i=R({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),o=Object(c["a"])(i,4),m=o[0],s=o[1],d=o[2],f=o[3],p=Object(P["b"])({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),v=Object(c["a"])(p,5),b=v[0],g=v[1],h=v[2],E=v[3],y=v[4],O=Object(Y["b"])({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),C=Object(c["a"])(O,4),j=C[0],w=C[1],D=C[2],S=C[3],I=oe({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),N=Object(c["a"])(I,4),F=N[0],k=N[1],x=N[2],T=N[3],M=Object(u["useState"])((null===l||void 0===l||null===(a=l[t])||void 0===a?void 0:a.filterLayout)||"default"),A=Object(c["a"])(M,2),_=A[0],V=A[1],L=Ce({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),W=Object(c["a"])(L,4),K=W[0],B=W[1],H=W[2],J=W[3];function q(e,a){var t;V((null===(t=a[e])||void 0===t?void 0:t.filterLayout)||"default")}function G(e,a){h(e,a),w(e,a),k(e,a),B(e,a),s(e,a),q(e,a)}var U={display:b,filter:m,inlineActions:j,actions:F,tableActions:K,sortable:g,filterLayout:_};function Z(){var e=D();U.inlineActions=e;var a=x();U.actions=a;var t=E();U.display=t;var n=d();U.filter=n;var l=H();return U.tableActions=l,U}var Q={modelName:t,schemas:n,adminConfig:l,bsmSetting:r,filter:m,filterProps:f,inlineActions:j,inlineActionsProps:S,display:b,displayFomProps:y,actions:F,actionsProps:T,tableActions:K,tableactionProps:J,filterLayout:_,setFilterLayout:V};return[U,G,Z,Q]}function we(e){var a=e.modelName,t=e.schemas,c=e.adminConfig,u=e.bsmSetting,s=e.filter,d=e.filterProps,f=e.inlineActions,p=e.inlineActionsProps,v=e.display,b=e.displayFomProps,g=e.actions,h=e.actionsProps,E=e.tableActions,y=e.tableactionProps,O=e.filterLayout,C=e.setFilterLayout,j=m.a.createElement(V,Object(o["a"])({filters:s,modelName:a,schemas:t,adminConfig:c,bsmSetting:u},d)),w=m.a.createElement(P["a"],Object(o["a"])({display:v},b)),D=m.a.createElement(Y["a"],Object(o["a"])({inlineActions:f},p)),S=m.a.createElement(ie,Object(o["a"])({actions:g},h)),I=m.a.createElement(Oe,Object(o["a"])({tableActions:E},y));return m.a.createElement(m.a.Fragment,null,w,m.a.createElement(i["a"],null),j,m.a.createElement("div",null,m.a.createElement(n["a"],{type:"inner"},m.a.createElement(l["a"],{layout:"inline"},m.a.createElement(l["a"].Item,{label:"\u4f4d\u7f6e"},m.a.createElement(r["a"].Group,{value:O,onChange:function(e){var a=e.target.value;return C(a)}},m.a.createElement(r["a"],{value:"default"},"\u9876\u90e8"),m.a.createElement(r["a"],{value:"drawer"},"\u4fa7\u62c9")))))),m.a.createElement(i["a"],null),D,m.a.createElement(i["a"],null),S,m.a.createElement(i["a"],null),I)}a["b"]=je},"O/S9":function(e,a,t){"use strict";(function(e){t("eNCU");var n=t("pjJH"),l=(t("eE3J"),t("GSZB")),r=t("q1tI"),i=t.n(r),o=t("4b23"),c=t.n(o),u=t("yNIE"),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e;return e.key||(a.key="index__".concat(c()(5))),a};function s(a){var t=a.value,o=void 0===t?[]:t,c=a.onChange,s=a.fields,d=a.disabledField,f=a.setFieldName,p=a.context,v=a.valueTypes,b=function(){o.push(m()),c(o)};function g(a){var t=e.cloneDeep(o);t.splice(a,1),c(t)}return Object(r["useEffect"])((function(){e.isArray(o)?c(o.map((function(e){return m(e)}))):c([m(o)])}),[]),e.isArray(o)?i.a.createElement(i.a.Fragment,null,o.filter((function(e){return s.find((function(a){return!((!e.field||a.name!==(null===e||void 0===e?void 0:e.field))&&e.field)}))})).map((function(e,a){return i.a.createElement("div",{key:e.key},i.a.createElement(u["a"],{key:e.key,fields:s,onChange:function(e){c(o.map((function(a){return a.key===e.key?e:a})))},value:e,disabledField:d,setFieldName:f,context:p,valueTypes:v}),i.a.createElement("a",{onClick:function(){return g(a)},style:{marginLeft:8}},i.a.createElement(l["a"],{type:"delete",style:{fontSize:20}})))})),i.a.createElement(n["a"],{type:"dashed",style:{width:354},onClick:b},i.a.createElement(l["a"],{type:"plus"}))):null}a["a"]=s}).call(this,t("LvDl"))},Q8IV:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return M}));t("2qtc");var n=t("kLXV"),l=(t("eNCU"),t("pjJH")),r=(t("eE3J"),t("GSZB")),i=t("0Owb"),o=(t("h/qz"),t("GmeQ")),c=(t("4X2C"),t("xvon")),u=(t("vmZS"),t("NjVP")),m=(t("yavW"),t("WuMn")),s=t("k1fw"),d=t("oBTY"),f=t("tJVT"),p=t("q1tI"),v=t.n(p),b=t("4b23"),g=t.n(b),h=t("HrPU"),E=t("556t"),y=t("O/S9"),O=t("umGZ"),C=t("cPjh"),j=t("9Ndd"),w=t("/IKB"),D=t("jfUH"),S=t("5jOq"),I=t.n(S);function N(e){var a={action:e,title:E["a"][e],params:{},showIf:[],groups:[],id:g()(6)};return["partEdit","nowEdit"].includes(e)&&(a.params.fields=[]),"partEdit"===e&&(a.params.editFields=[]),["refEdit","refDetail"].includes(e)&&(a.showInModal=!0),a}var F=function(e,a){return a[e].inlineActions||[]};function k(a){var t=a.modelName,n=a.schemas,l=a.adminConfig,r=a.bsmSetting.staff_model,i=Object(p["useState"])((function(){return t&&l&&F(t,l)})),o=Object(f["a"])(i,2),c=o[0],u=o[1],m=Object(p["useState"])([]),v=Object(f["a"])(m,2),b=v[0],h=v[1];function y(e,a){u(F(e,a))}function O(){u([].concat(Object(d["a"])(c),[{}]))}function C(e){var a=e.map(N);u([].concat(Object(d["a"])(c),Object(d["a"])(a)))}function j(a){var t=e.cloneDeep(c);t.splice(a,1),u(t)}function w(a,t){var n=e.cloneDeep(c);n[a]=N(t),u(n)}function D(a,t){var n=e.cloneDeep(c);n[a].title=t,u(n)}function S(a,t){var n=e.cloneDeep(c);n[a].confirm=t,u(n)}function I(a,t,n){var l=e.cloneDeep(c);t?l[a].params[t]=n:l[a].params=n,u(l)}function k(){var a=e.cloneDeep(c);return a.filter((function(e){var a=!!e.action;return E["b"].includes(e.action)&&(a=a&&!(!e.params.field&&!e.field)),a})).map((function(a){var t,n,l=Object(s["a"])({},a);["partEdit","nowEdit"].includes(a.action)&&(l.params.fields=null===(t=l.params.fields)||void 0===t?void 0:t.filter((function(e){return e.name&&void 0!==e.value})),l.showIf=null===(n=l.showIf)||void 0===n?void 0:n.filter((function(e){return e.field&&e.operator&&void 0!==e.value})));return e.isEmpty(a.groups)||(l.groups=l.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),a.id||(l.id=g()(6)),l}))}Object(p["useEffect"])((function(){if(t&&l){var a=e.cloneDeep(l[t].inlineActions);if(a.forEach((function(a){e.isObject(a.showIf)&&!e.isArray(a.showIf)&&(a.showIf=[a.showIf])})),r){var i=[];n[t].fields.forEach((function(e){e.ref===r&&i.push(e)})),h(i)}var o=new Set;(l[t].inlineActions||[]).forEach((function(a){e.isEmpty(a.groups)||a.groups.forEach((function(e){return o.add(e)}))})),u(a)}}),[l,t,n,r]);var x={inlineActions:c,staffModelFields:b,staffModel:r,modelName:t,schemas:n,adminConfig:l,handleParamsChange:I,handleTitleChange:D,handleDelete:j,handleAdd:O,setInlineActions:u,addActions:C,reset:y,checkInlineActions:k,handleConfirmChange:S,handleTypeChange:w};return[c,y,k,x]}function x(a){var t,n,s=a.inlineActions,f=a.staffModelFields,p=a.staffModel,b=a.modelName,g=a.schemas,C=a.adminConfig,S=a.handleParamsChange,N=a.handleTitleChange,F=a.setInlineActions,k=a.handleConfirmChange,x=a.handleTypeChange,T=a.index;if(void 0===T)return null;var M=s[T];return v.a.createElement(u["a"],{labelCol:{span:6},wrapperCol:{span:14}},v.a.createElement(u["a"].Item,{label:"\u64cd\u4f5c\u7c7b\u578b"},v.a.createElement(m["a"],{value:M.action,onChange:function(e){return x(T,e)}},e.map(E["a"],(function(e,a){return v.a.createElement(m["a"].Option,{value:a},e)})))),v.a.createElement(u["a"].Item,{label:"\u64cd\u4f5c\u540d\u79f0"},v.a.createElement(c["a"],{value:M.title,onChange:function(e){return N(T,e.target.value)}})),v.a.createElement(u["a"].Item,{label:"\u64cd\u4f5c\u524d\u786e\u8ba4"},v.a.createElement(c["a"],{value:M.confirm,onChange:function(e){return k(T,e.target.value)}})),"action"===M.action&&v.a.createElement(u["a"].Item,{label:"\u4e91\u51fd\u6570"},v.a.createElement(w["a"],{model:b,scene:"inline",config:M.params,onChange:function(e){return S(T,null,e)}})),"info"===M.action&&v.a.createElement(v.a.Fragment,null,v.a.createElement(u["a"].Item,{label:"\u6807\u9898"},v.a.createElement(c["a"],{value:M.params.title,onChange:function(e){return S(T,"title",e.target.value)}})),v.a.createElement(u["a"].Item,{label:"\u6b63\u6587"},v.a.createElement(c["a"],{value:M.params.content,onChange:function(e){return S(T,"content",e.target.value)}}))),"link"===M.action&&v.a.createElement(v.a.Fragment,null,v.a.createElement(u["a"].Item,{label:"\u7f51\u5740"},v.a.createElement(c["a"],{value:M.params.link,onChange:function(e){return S(T,"link",e.target.value)}}))),E["b"].includes(M.action)&&v.a.createElement(v.a.Fragment,null,v.a.createElement(u["a"].Item,{label:"\u5173\u8054\u5b57\u6bb5"},v.a.createElement(h["a"],{value:M.params.field||M.field,onChange:function(a){var t=e.cloneDeep(s);t[T].params.field=a,F(t)},layer:1,fieldFilter:function(e){return"refAdd"===M.action?Object(D["z"])(e):Object(D["D"])(e)},model:b})),"refAdd"!==M.action&&v.a.createElement(u["a"].Item,{label:"\u5f39\u7a97\u663e\u793a"},v.a.createElement(o["a"],{checked:M.showInModal,onChange:function(a){var t=e.cloneDeep(s);t[T].showInModal=a,F(t)}}))),["partEdit","nowEdit"].includes(M.action)&&v.a.createElement(v.a.Fragment,null,"partEdit"===M.action&&v.a.createElement(u["a"].Item,{label:"\u53ef\u7f16\u8f91\u5b57\u6bb5"},v.a.createElement(m["a"],{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u6dfb\u52a0\u53ef\u7f16\u8f91\u5b57\u6bb5",value:M.params.editFields,onChange:function(a){var t=e.cloneDeep(s);t[T].params.editFields=a,F(Object(d["a"])(t))}},g[b].fields.map((function(e){return v.a.createElement(m["a"].Option,{key:e.name},e.displayName)})))),v.a.createElement(u["a"].Item,{label:"\u8bbe\u7f6e\u5c5e\u6027\u503c",wrapperCol:{span:10}},v.a.createElement("div",null,(M.params.fields||[]).map((function(a,t){var n=j["b"].TextInput,l={};if(a.name){var o=g[b].fields.find((function(e){return e.name===a.name}));if(!o)return null;l.field=o,n=j["b"][j["e"][o.type]]}return v.a.createElement("div",{style:{display:"flex"}},v.a.createElement("div",{style:{marginRight:8}},v.a.createElement(h["a"],{value:a.name,onChange:function(a){var n=e.cloneDeep(s);n[T].params.fields[t].name=a,n[T].params.fields[t].value=void 0,F(n)},fieldDisable:function(e){return M.params.fields.map((function(e){return e.name})).includes(e.name)},fieldFilter:function(e){return!Object(D["B"])(e)&&!e.primaryKey},model:b})),v.a.createElement("div",{style:{marginRight:8}},v.a.createElement(n,Object(i["a"])({value:a.value,onChange:function(a){var n=e.cloneDeep(s);n[T].params.fields[t].value=a,F(n)}},l))),v.a.createElement("div",null,v.a.createElement("a",{onClick:function(){var a=e.cloneDeep(s);a[T].params.fields=a[T].params.fields.filter((function(e,a){return a!==t})),F(a)},style:{marginLeft:8}},v.a.createElement(r["a"],{type:"delete",style:{fontSize:20}}))))}))),v.a.createElement("div",null,v.a.createElement(l["a"],{type:"dashed",style:{width:"100%"},onClick:function(){var a=e.cloneDeep(s);a[T].params.fields.push({}),F(a)}},v.a.createElement(r["a"],{type:"plus"}))))),v.a.createElement("div",{className:I.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),v.a.createElement(O["a"],{groupsValue:null!==(t=null===(n=M.groups)||void 0===n?void 0:n.filter((function(e){return!("number"===typeof e)})))&&void 0!==t?t:[],groupsOnChange:function(a){var t=e.cloneDeep(s);t[T].groups=a,F(Object(d["a"])(t))},userValue:M.userField,userOnChange:function(a){var t=e.cloneDeep(s);t[T].userField=a,F(Object(d["a"])(t))},staffModelFields:f,staffModel:p,defauldGroupValue:C[b].inlineActions[T]}),v.a.createElement(u["a"].Item,{label:"\u6ee1\u8db3\u6761\u4ef6\u663e\u793a",wrapperCol:{span:15}},v.a.createElement("div",null,v.a.createElement(y["a"],{fields:g[b].fields,value:M.showIf||[],context:{model:b},onChange:function(a){var t=e.cloneDeep(s);t[T].showIf=a,F(t)},disabledField:function(e){return M.showIf.map((function(e){return e.field})).filter((function(e){return e})).includes(e.name)}}))))}function T(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=k({modelName:a,schemas:n,adminConfig:t,bsmSetting:l}),i=Object(f["a"])(r,4),o=i[0],c=i[1],u=i[2],m=i[3],d=Object(p["useState"])([]),v=Object(f["a"])(d,2),b=v[0],g=v[1],h=Object(p["useState"])(!1),E=Object(f["a"])(h,2),y=E[0],O=E[1],C=m.addActions;function j(){C(b),O(!1)}function w(){O(!1),g([])}return[o,c,u,Object(s["a"])(Object(s["a"])({},m),{},{afterClose:w,onOK:j,visible:y,setVisible:O,selectKeys:b,setSelectKeys:g})]}function M(e){var a=e.handleDelete,t=e.setInlineActions,r=e.inlineActions,o=e.setVisible,c=e.visible,s=e.onOK,d=e.afterClose,f=e.selectKeys,p=e.setSelectKeys,b=v.a.createElement("div",null,v.a.createElement(u["a"].Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},v.a.createElement(m["a"],{mode:"multiple",defaultValue:[],value:f,onChange:p,style:{minWidth:160}},Object.keys(E["a"]).map((function(e,a){return v.a.createElement(m["a"].Option,{value:e,key:"".concat(e,"__").concat(a+1)},E["a"][e])}))))),g=v.a.createElement(C["b"],{allData:r,setData:t,sections:[(null===r||void 0===r?void 0:r.length)||0],title:"\u64cd\u4f5c\u9879",setSections:function(e){t(e[0].fields)},columns:[{title:"\u64cd\u4f5c\u9879",key:"name",render:function(e){return e.title||E["a"][e.action]}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return v.a.createElement(v.a.Fragment,null,v.a.createElement("a",{onClick:function(){return a(n)}},"\u5220\u9664"))}}],footer:function(){return v.a.createElement(l["a"],{onClick:function(){return o(!0)}},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(a,t){return v.a.createElement(x,Object(i["a"])({index:t},e))}});return v.a.createElement(v.a.Fragment,null,v.a.createElement(n["a"],{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:c,onOk:s,onCancel:function(){return o(!1)},afterClose:d,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},b),g)}a["b"]=T}).call(this,t("LvDl"))},SWtE:function(e,a,t){},"Va/H":function(e,a,t){"use strict";t("cW/2");var n=t("RtDF"),l=t("oBTY"),r=t("tJVT"),i=t("q1tI"),o=t.n(i),c=t("jfUH");function u(e){var a=e.modelName,t=e.onChange,u=e.value,m=Object(c["wb"])(),s=Object(i["useState"])([]),d=Object(r["a"])(s,2),f=d[0],p=d[1],v=function e(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return m[a].fields.map((function(a){var r=a.ref,i=t.map((function(e){return e.name})).join("."),c=[].concat(Object(l["a"])(t),[a]),u=c.map((function(e){return e.name})).join("."),m=c.map((function(e){return e.displayName})).join(".");return o.a.createElement(n["a"].TreeNode,{displayName:m,title:a.displayName,value:u,key:u},(!t.length||f.includes(i))&&r&&e(r,c))}))},b=function(e){return Object(c["l"])(m,e,a).map((function(e){return e.displayName})).join(".")};return o.a.createElement(n["a"],{treeExpandedKeys:f,onTreeExpand:p,treeDefaultExpandAll:!0,onChange:function(e){return t(e.map((function(e){return e.value})))},value:u&&u.map((function(e){return{label:b(e),value:e}})),showCheckedStrategy:n["a"].SHOW_ALL,treeNodeLabelProp:"displayName",treeCheckable:!0,treeCheckStrictly:!0,style:{width:"100%"}},v(a))}a["a"]=u},Y4fy:function(e,a,t){e.exports={pink:"pink___11lZ9",magenta:"magenta___2XI_B",red:"red___38IBt",volcano:"volcano___17Ijo",orange:"orange___2nOvK",yellow:"yellow___3oql7",gold:"gold___1jiJt",cyan:"cyan___2Ylrb",lime:"lime___3ogcY",green:"green___1gHs5",blue:"blue___3DlPi",geekblue:"geekblue___44zYL",purple:"purple___38pTh"}},cPjh:function(e,a,t){"use strict";(function(e){t.d(a,"c",(function(){return I})),t.d(a,"a",(function(){return T})),t.d(a,"d",(function(){return A}));t("2qtc");var n=t("kLXV"),l=(t("yavW"),t("WuMn")),r=(t("vmZS"),t("NjVP")),i=t("tJVT"),o=(t("eNCU"),t("pjJH"),t("6dnR"),t("CQJL")),c=(t("fu2T"),t("gK9i")),u=(t("SePM"),t("PMX6")),m=(t("Dvpn"),t("myml")),s=(t("eE3J"),t("GSZB")),d=t("0Owb"),f=t("k1fw"),p=t("PpiC"),v=t("q1tI"),b=t.n(v),g=t("RsOY"),h=t.n(g),E=t("4b23"),y=t.n(E),O=t("wiuW"),C=t("4l6Y"),j=t("LvDl"),w=(t("SWtE"),t("Va/H")),D=-1,S=-1;function I(e,a,t){return Object(j["sum"])(t.slice(0,a))+e}function N(e){var a=e.isOver,t=e.connectDragSource,n=e.connectDropTarget,l=(e.moveRow,Object(p["a"])(e,["isOver","connectDragSource","connectDropTarget","moveRow"])),r=Object(f["a"])(Object(f["a"])({},l.style),{},{cursor:"move"}),i=l.className;return a&&((l.sectionindex>S||S===l.sectionindex&&l.index>D)&&(i+=" drop-item-over-downward"),(l.sectionindex<S||S===l.sectionindex&&l.index<D)&&(i+=" drop-item-over-upward")),t(n(b.a.createElement("tr",Object(d["a"])({},l,{className:i,style:r}))))}var F={beginDrag:function(e){return D=e.index,S=e.sectionindex,{index:e.index,sectionindex:e.sectionindex}}},k={drop:function(e,a){var t=a.getItem(),n=t.index,l=t.sectionindex,r=e.index,i=e.sectionindex;l===i&&n===r||e.moveRow(n,r,l,i)}};function x(a){var t=a.setData,n=a.allData,l=a.sections,r=a.sectionTitles,i=a.addAndDeleteView,o=a.styleView,p=a.cardTitle,v=a.footer,g=a.columns,E=a.expandedRowRender,j=a.tableTitle,w=a.setSections,D=a.key,x=void 0===D?y()(5):D,T=a.sectionStyle,M=a.detailStyle,A=a.addAndWidget;function _(e,a,r,i){var o=I(e,r,l),c=I(a,i,l),u=n[o];t(h()(n,{$splice:[[o,1],[c,0,u]]})),w&&r!==i&&w(h()(l,{$splice:[[r,1,l[r]-1],[i,1,l[i]+1]]}))}function V(e,a,r){var i=I(e,a,l),o=I(0,r,l);o>a&&(o-=1);var c=n[i];t(h()(n,{$splice:[[i,1],[o,0,c]]})),w(h()(l,{$splice:[[a,1,l[a]-1],[r,1,l[r]+1]]}))}var R=function(e){return g.map((function(a){var t=Object(f["a"])({},a);if(t.render){var n=t.render;t.render=function(a,t,l){return n(a,t,l,e)}}return t}))},P=function(e){return function(a,t,n,l){return E(a,t,n,l,e)}};function Y(e){var a=0,t=0;l.forEach((function(n,l){l<e&&(a+=n),l===e&&(t=n)}));var r=null===n||void 0===n?void 0:n.slice(a,a+t);return r}return b.a.createElement(C["b"],null,(function(t){var n=t.DropTarget,f=t.DragSource,g=function(e){return n(e,{drop:function(e,a){var t=a.getItem(),n=t.index,l=t.sectionindex,r=e.sectionindex;l!==r&&e.addRow(n,l,r)}},(function(e,a){return{connectDropTarget:e.dropTarget(),isOver:a.isOver()}}))((function(e){var a=e.connectDropTarget,t=e.isOver,n=e.sectionindex,l=t&&S!==n;return a(b.a.createElement("div",{style:{display:"flex",alignItems:"center",marginRight:18,color:"#1890ff"}},"\u52a0\u5165\u672c\u7ec4:\xa0",b.a.createElement(s["a"],{type:l?"fullscreen-exit":"plus",style:{fontSize:20}})))}))},h=g(x),y=function(e){return n(e,k,(function(e,a){return{connectDropTarget:e.dropTarget(),isOver:a.isOver()}}))(f(e,F,(function(e){return{connectDragSource:e.dragSource()}}))(N))},C={body:{row:y(x)}},w=l.map((function(t,n){var o,s,f=Y(n),p=b.a.createElement(u["a"],{title:j&&j(n),bodyStyle:{padding:0},extra:!!i&&b.a.createElement("div",{style:{display:"flex",alignItems:"center"}},e.isEmpty(f)&&!(T&&(null===(o=T[n])||void 0===o?void 0:o.widget)in O["d"])&&b.a.createElement(h,{addRow:V,sectionindex:n}),i(n)),bordered:i},b.a.createElement("div",{className:"container"},"default"!==M&&T&&(null===(s=T[n])||void 0===s?void 0:s.widget)in O["d"]||b.a.createElement(m["a"],Object(d["a"])({},a,{dataSource:f,components:C,onRow:function(e,a){return{index:a,moveRow:_,sectionindex:n}},footer:function(){return b.a.createElement(b.a.Fragment,null,v(n),b.a.createElement("div",{className:"content",style:{float:"right",width:300}},A&&A(n)))},columns:R(n),expandedRowRender:E&&P(n)}))));return l.length>1?b.a.createElement(c["a"].Panel,{header:r[n]||"\u7b2c".concat(n+1,"\u7ec4"),forceRender:!0},p):p}));return b.a.createElement(u["a"],{title:p,bodyStyle:{padding:0},extra:o&&o()},l.length>1?b.a.createElement(c["a"],{defaultActiveKey:["0","1","2","3","4"],ghost:!0},w):w)}))}function T(a){var t=a.onChange,n=a.value,l=a.layouts,r=void 0===l?{}:l;return b.a.createElement("div",null,"\u6392\u5217\u65b9\u5f0f : \xa0\xa0",b.a.createElement(o["a"].Group,{value:n,onChange:function(e){return t(e.target.value)}},b.a.createElement(o["a"],{value:"default"},"\u9ed8\u8ba4"),e.map(r,(function(e,a){return b.a.createElement(o["a"],{value:a},e)}))))}function M(e,a){return e.toLowerCase().includes(a.toLowerCase())}function A(e){var a=e.modelName,t=e.schemas,o=e.fieldDisabled,c=Object(p["a"])(e,["modelName","schemas","fieldDisabled"]),u=Object(v["useState"])([]),m=Object(i["a"])(u,2),s=m[0],d=m[1],f=Object(v["useState"])(!1),g=Object(i["a"])(f,2),h=g[0],E=g[1];function y(){E(!1),c.onOk&&c.onOk()}function O(){E(!0)}function C(){E(!1),d([])}var j=b.a.createElement(r["a"].Item,{label:"\u9009\u62e9\u5b57\u6bb5",labelCol:{span:6},wrapperCol:{span:18}},b.a.createElement(w["a"],{modelName:a,value:s,onChange:d})),D=b.a.createElement("div",null,b.a.createElement(r["a"].Item,{label:"\u9009\u62e9\u5b57\u6bb5",labelCol:{span:6},wrapperCol:{span:18}},b.a.createElement(l["a"],{mode:"multiple",defaultValue:[],value:s,onChange:d,style:{minWidth:160},filterOption:function(e,a){var t=a.props,n=t.value,l=t.children;return M(n,e)||M(l,e)}},t[a].fields.map((function(e){return b.a.createElement(l["a"].Option,{value:e.name,key:e.name,disabled:o&&o(e)},e.displayName)}))))),S=c.expand,I=b.a.createElement(n["a"],{title:"\u6dfb\u52a0\u5b57\u6bb5",visible:h,onOk:y,onCancel:function(){return E(!1)},afterClose:C,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},S?j:D);return[I,s,O]}function _(e){var a=e.sections,t=void 0===a?[{}]:a,n=e.sectionTitles,l=void 0===n?[]:n,r=e.setData,i=e.columns,o=e.footer,c=e.expandedRowRender,u=e.hiddenAdd,m=void 0!==u&&u,s=e.addAndDeleteView,d=e.styleView,f=e.title,p=e.modalView,v=e.allData,g=e.tableTitle,h=e.setSections,E=e.sectionStyle,y=e.style,O=e.addAndWidget,C=e.bordered,j=void 0===C||C;return b.a.createElement("div",null,p,b.a.createElement(x,{modalView:p,columns:i,expandedRowRender:c,sections:t,sectionTitles:l,allData:v,setData:r,size:"middle",bordered:j,pagination:!1,footer:o,styleView:d,addAndDeleteView:s,hiddenAdd:m,cardTitle:f,tableTitle:g,setSections:h,sectionStyle:E,detailStyle:y,addAndWidget:O}))}a["b"]=_}).call(this,t("LvDl"))},poQN:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));t("GNNt");var n=t("wEI+"),l=(t("+L6B"),t("2/Rp")),r=t("q1tI"),i=t.n(r),o=t("jfUH"),c=function(e){var a=e.children;return i.a.createElement(n["a"],{autoInsertSpaceInButton:!1},i.a.createElement(l["a"],{style:{border:"none"}},a))},u=function(e){var a=e.fieldPath,t=e.modelName,n=Object(o["eb"])(t);return i.a.createElement(c,null,n(a).join(" > "))}},umGZ:function(e,a,t){"use strict";t("yavW");var n=t("WuMn"),l=(t("vmZS"),t("NjVP")),r=t("q1tI"),i=t.n(r),o=t("LvDl"),c=t.n(o),u=t("mmaM"),m=t("3V3B");function s(e){var a=e.groupsValue,t=e.groupsOnChange,o=e.userValue,s=e.userOnChange,d=e.staffModelFields,f=e.staffModel,p=e.defauldGroupValue,v=void 0===p?{}:p;return Object(r["useEffect"])((function(){c.a.isEmpty(v.groups)||Object(u["queryContent"])({model:"auth__group",filters:[{field:"id",operator:"in",value:v.groups}]}).then((function(e){var a=e.list;t(a)}))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(l["a"].Item,{label:"\u4ec5\u6307\u5b9a\u89d2\u8272\u53ef\u89c1"},i.a.createElement(m["a"],{value:a,field:{displayName:"\u89d2\u8272",name:"group",ref:"auth__group",refField:"permissions",refTo:"id",required:!1,type:"mref"},onChange:t})),!c.a.isEmpty(d)&&f&&i.a.createElement(l["a"].Item,{label:"\u8be5\u5b57\u6bb5\u503c\u4e3a\u5f53\u524d\u7528\u6237\u65f6\u53ef\u89c1"},i.a.createElement(n["a"],{style:{width:"100%"},placeholder:"\u672a\u9009\u62e9",value:o,onChange:s},d.map((function(e){return i.a.createElement(n["a"].Option,{key:e.name},e.displayName)})))))}a["a"]=s},yNIE:function(e,a,t){"use strict";t("4csm");var n=t("2Fwu"),l=(t("eNCU"),t("pjJH")),r=(t("eE3J"),t("GSZB")),i=t("0Owb"),o=t("k1fw"),c=(t("7Kak"),t("9yH6")),u=(t("9kbU"),t("vbHR")),m=t("tJVT"),s=(t("yavW"),t("WuMn")),d=t("q1tI"),f=t.n(d),p=t("LvDl"),v=t.n(p),b=t("9Ndd"),g=t("jfUH"),h=s["a"].Option,E={">":{name:"\u5927\u4e8e"},"=":{name:"\u7b49\u4e8e"},"<":{name:"\u5c0f\u4e8e"},between:{name:"\u65e5\u671f\u8303\u56f4"},"!=":{name:"\u4e0d\u7b49\u4e8e"},isnull:{name:"\u7a7a\u503c"}},y="\u6307\u5b9a\u503c",O="\u53ef\u53d8\u503c",C={string:[">","<","=","!=","isnull"],integer:[">","<","=","!=","isnull"],decimal:[">","<","=","!=","isnull"],datetime:[">","<","=","!=","isnull"],float:[">","<","=","!=","isnull"],bool:["=","!=","isnull"],date:[">","<","=","!=","isnull"],ref:[">","<","=","!=","isnull"],oref:[">","<","=","!=","isnull"],boref:[">","<","=","!=","isnull"],mref:[">","<","=","!=","isnull"],bref:["=","!=","isnull"],richtext:[">","<","=","!=","isnull"]};function j(e){var a=e.value,t=void 0===a?{}:a,p=e.onChange,j=e.fields,w=e.disabledField,D=e.setFieldName,S=e.valueTypes,I=void 0===S?[y]:S,N=e.context.model,F={};t.field&&(F=j.find((function(e){return e.name===t.field})));var k=F,x=k.type,T=function(e){var a=v.a.cloneDeep(t);a.field=e,p(a)},M=function(e){var a=v.a.cloneDeep(t);a.operator=e,p(a)},A=function(e){var a=v.a.cloneDeep(t);a.value=e,p(a)},_=function(e){var a=v.a.cloneDeep(t);a.variable=e,p(a)},V=y;t.variable&&(V=O);var R=Object(d["useState"])(V),P=Object(m["a"])(R,2),Y=P[0],L=P[1],W=f.a.createElement(u["a"],{onClick:function(e){var a=e.key;return L(a)}},I.map((function(e){return f.a.createElement(u["a"].Item,{key:e},e)}))),K=function(){var e=function(e){return f.a.createElement(b["b"].TextInput,e)};if("isnull"===t.operator)e=function(e){var a=e.value,t=e.onChange;return f.a.createElement(c["a"].Group,{value:a,onChange:function(e){return t(e.target.value)}},f.a.createElement(c["a"],{value:!0},"\u4e3a\u7a7a"),f.a.createElement(c["a"],{value:!1},"\u975e\u7a7a"))};else if(!v.a.isEmpty(F)){var a=b["b"][b["e"][x]],n=b["b"].Select;e=Object(g["D"])(F)?function(e){return f.a.createElement(n,Object(i["a"])({},e,{placeholder:"\u641c\u7d22".concat(F.displayName),field:Object(o["a"])(Object(o["a"])({},F),{},{type:"mref"}),allowUndefined:!0}))}:["mref","bref"].includes(F.type)?function(e){return f.a.createElement(n,Object(i["a"])({},e,{placeholder:"\u641c\u7d22".concat(F.displayName),field:Object(o["a"])(Object(o["a"])({},F),{},{type:"mref"})}))}:function(e){return f.a.createElement(a,Object(i["a"])({},e,{field:F}))}}return e};return f.a.createElement(f.a.Fragment,null,f.a.createElement(s["a"],{placeholder:"\u8bf7\u9009\u62e9",onChange:T,style:{width:110},value:t.field,allowClear:!0},j.map((function(e){return"text"!==e.type&&f.a.createElement(h,{key:e.name,value:e.name,disabled:w&&w(e)},D?D(e):e.displayName)}))),!v.a.isEmpty(t.field)&&f.a.createElement(f.a.Fragment,null,f.a.createElement(s["a"],{placeholder:"\u64cd\u4f5c\u7b26",style:{width:90,marginLeft:8,marginRight:8},onSelect:M,value:t.operator},C[x].map((function(e){return f.a.createElement(h,{key:e,value:e},E[e].name)}))),I.length>1&&f.a.createElement(n["a"],{overlay:W},f.a.createElement(l["a"],null,Y," ",f.a.createElement(r["a"],{type:"down",theme:"outlined"}))),Y===y?K()({style:{width:130},value:t.value,onChange:A}):f.a.createElement(s["a"],{placeholder:"\u8bf7\u9009\u62e9\u5b57\u6bb5",style:{width:130},onSelect:_,value:t.variable},Object(g["s"])(N).fields.filter((function(e){return e.type===x&&(!Object(g["C"])(x)||e.ref===F.ref)})).map((function(e){return f.a.createElement(h,{key:e.name,value:e.name},e.displayName)})))))}a["a"]=j}}]);